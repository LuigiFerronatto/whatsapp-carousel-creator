{"version":3,"file":"static/js/422.fcc4778f.chunk.js","mappings":"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","sources":["webpack://whatsapp-carousel-creator/./src/components/ui/Input/Input.module.css?7a73","webpack://whatsapp-carousel-creator/./src/components/ui/CharacterCounter/CharacterCounter.module.css?ae34","components/ui/CharacterCounter/CharacterCounter.js","webpack://whatsapp-carousel-creator/./src/components/ui/TextFormatter/TextFormatter.module.css?3a79","components/ui/TextFormatter/TextFormatter.js","webpack://whatsapp-carousel-creator/./src/components/ui/Hints/Hints.module.css?d9ef","components/ui/Hints/Hints.js","components/ui/Input/Input.js","webpack://whatsapp-carousel-creator/./src/components/editors/CardUploadInput.module.css?9950","components/editors/CardUploadInput.js","hooks/useFileUpload.js","webpack://whatsapp-carousel-creator/./src/components/steps/StepOne.module.css?44b2","webpack://whatsapp-carousel-creator/./src/styles/Steps.module.css?c49a","components/steps/StepOne.js","webpack://whatsapp-carousel-creator/./src/components/editors/ButtonEditor.module.css?c5f0","components/editors/ButtonEditor.js","webpack://whatsapp-carousel-creator/./src/components/editors/CardTemplateEditor.module.css?99fa","components/editors/CardTemplateEditor.js","webpack://whatsapp-carousel-creator/./src/components/previews/CarouselPreview.module.css?7da0","components/previews/CarouselPreview.js","webpack://whatsapp-carousel-creator/./src/components/steps/StepTwo.module.css?748b","components/steps/StepTwo.js","webpack://whatsapp-carousel-creator/./src/components/ui/JsonViewer/JsonViewer.module.css?3914","components/ui/JsonViewer/JsonViewer.js","components/previews/downloadPreview.js","webpack://whatsapp-carousel-creator/./src/components/steps/StepThree.module.css?d714","components/previews/CarouselController.js","webpack://whatsapp-carousel-creator/./src/components/ui/PreRenderStatus/PreRenderStatus.module.css?7925","components/ui/PreRenderStatus/PreRenderStatus.js","components/steps/StepThree.js","webpack://whatsapp-carousel-creator/./src/components/ui/ProgressHeader/ProgressHeader.module.css?4c1b","components/ui/ProgressHeader/ProgressHeader.js","webpack://whatsapp-carousel-creator/./src/components/ui/IntroductionGuide/IntroductionGuide.module.css?1dd0","components/ui/IntroductionGuide/IntroductionGuide.js","webpack://whatsapp-carousel-creator/./src/components/WhatsAppCarouselCreator.module.css?81f8","webpack://whatsapp-carousel-creator/./src/components/ui/Footer/Footer.module.css?1850","components/ui/Footer/Footer.js","components/WhatsAppCarouselCreator.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Input_container__id-8D\",\"sizeSmall\":\"Input_sizeSmall__nXEZ+\",\"inputWrapper\":\"Input_inputWrapper__x4IWK\",\"sizeMedium\":\"Input_sizeMedium__ZoMPb\",\"sizeLarge\":\"Input_sizeLarge__jFz8+\",\"input\":\"Input_input__2YT+q\",\"textarea\":\"Input_textarea__XLnW6\",\"inline\":\"Input_inline__ryJ4z\",\"label\":\"Input_label__tjboa\",\"requiredMark\":\"Input_requiredMark__mxYa0\",\"focused\":\"Input_focused__ZEm8c\",\"hasError\":\"Input_hasError__ISZ6x\",\"inputError\":\"Input_inputError__wxorL\",\"disabled\":\"Input_disabled__M3FmD\",\"readOnly\":\"Input_readOnly__dEUV-\",\"icon\":\"Input_icon__dX8O1\",\"iconLeft\":\"Input_iconLeft__itEuW\",\"iconRight\":\"Input_iconRight__9wSDW\",\"passwordToggle\":\"Input_passwordToggle__PNp5z\",\"clearButton\":\"Input_clearButton__2fOad\",\"bottomContent\":\"Input_bottomContent__KTADF\",\"counterWrapper\":\"Input_counterWrapper__kgfLh\",\"visibilityToggle\":\"Input_visibilityToggle__TjEGf\",\"optionalBadge\":\"Input_optionalBadge__4XNpX\",\"optionalBadgeSubtle\":\"Input_optionalBadgeSubtle__NUpmO\",\"optionalBadgeOutlined\":\"Input_optionalBadgeOutlined__yf5xz\",\"isDropdown\":\"Input_isDropdown__v-OrW\",\"dropdownContainer\":\"Input_dropdownContainer__3CAKD\",\"dropdownInput\":\"Input_dropdownInput__+aUeL\",\"dropdownToggle\":\"Input_dropdownToggle__jLPWV\",\"dropdownOptions\":\"Input_dropdownOptions__-TDUp\",\"searchContainer\":\"Input_searchContainer__LKTYu\",\"searchInput\":\"Input_searchInput__mBw9t\",\"optionsList\":\"Input_optionsList__7DrWn\",\"option\":\"Input_option__5Iisj\",\"selectedOption\":\"Input_selectedOption__Zc7Yj\",\"optionCheckbox\":\"Input_optionCheckbox__piDk4\",\"optionLabel\":\"Input_optionLabel__kydi6\",\"noOptions\":\"Input_noOptions__FIkS3\",\"createOption\":\"Input_createOption__uo5dK\",\"dropdownOpen\":\"Input_dropdownOpen__dC+AQ\"};","// extracted by mini-css-extract-plugin\nexport default {\"wrapper\":\"CharacterCounter_wrapper__EJLlC\",\"progressWrapper\":\"CharacterCounter_progressWrapper__4npeD\",\"progress\":\"CharacterCounter_progress__UXh2V\",\"count\":\"CharacterCounter_count__5Iddo\",\"warning\":\"CharacterCounter_warning__XP2qo\",\"warningProgress\":\"CharacterCounter_warningProgress__wtdZj\",\"warningCount\":\"CharacterCounter_warningCount__i3USf\",\"danger\":\"CharacterCounter_danger__iLNeC\",\"dangerProgress\":\"CharacterCounter_dangerProgress__3Caof\",\"dangerCount\":\"CharacterCounter_dangerCount__49afj\",\"compact\":\"CharacterCounter_compact__8m3MD\",\"minimal\":\"CharacterCounter_minimal__ltg2L\"};","// components/ui/CharacterCounter/CharacterCounter.js\r\nimport React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './CharacterCounter.module.css';\r\n\r\n/**\r\n * Character counter component with visual feedback\r\n * @param {Object} props - Component properties\r\n * @returns {JSX.Element} Character counter component\r\n */\r\nconst CharacterCounter = ({ \r\n  current, \r\n  max, \r\n  threshold = 75, \r\n  dangerThreshold = 90,\r\n  className = '',\r\n  variant = 'default', // 'default', 'compact', 'minimal'\r\n  showFormatting = true // Controla se ser mostrado feedback visual\r\n}) => {\r\n  // Calculate percentage\r\n  const percentage = Math.min((current / max) * 100, 100);\r\n  \r\n  // Determine status based on thresholds (only if showFormatting is true)\r\n  const isWarning = showFormatting && percentage >= threshold && percentage < dangerThreshold;\r\n  const isDanger = showFormatting && percentage >= dangerThreshold;\r\n  \r\n  // Build class names\r\n  const wrapperClasses = [\r\n    styles.wrapper,\r\n    isWarning ? styles.warning : '',\r\n    isDanger ? styles.danger : '',\r\n    styles[variant],\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n  \r\n  const progressClasses = [\r\n    styles.progress,\r\n    isWarning ? styles.warningProgress : '',\r\n    isDanger ? styles.dangerProgress : '',\r\n  ].filter(Boolean).join(' ');\r\n  \r\n  const countClasses = [\r\n    styles.count,\r\n    isWarning ? styles.warningCount : '',\r\n    isDanger ? styles.dangerCount : '',\r\n  ].filter(Boolean).join(' ');\r\n\r\n  // Render different variants\r\n  if (variant === 'minimal') {\r\n    return (\r\n      <div className={wrapperClasses}>\r\n        <span className={countClasses}>\r\n          {current}/{max}\r\n        </span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={wrapperClasses}>\r\n      <div className={styles.progressWrapper}>\r\n        <div \r\n          className={progressClasses}\r\n          style={{ width: `${percentage}%` }}\r\n        />\r\n      </div>\r\n      <span className={countClasses}>\r\n        {current}/{max}\r\n      </span>\r\n    </div>\r\n  );\r\n};\r\n\r\nCharacterCounter.propTypes = {\r\n  current: PropTypes.number.isRequired,\r\n  max: PropTypes.number.isRequired,\r\n  threshold: PropTypes.number,\r\n  dangerThreshold: PropTypes.number,\r\n  className: PropTypes.string,\r\n  variant: PropTypes.oneOf(['default', 'compact', 'minimal']),\r\n  showFormatting: PropTypes.bool\r\n};\r\n\r\nexport default CharacterCounter;","// extracted by mini-css-extract-plugin\nexport default {\"formattingToolbar\":\"TextFormatter_formattingToolbar__azvE2\",\"compact\":\"TextFormatter_compact__rS2Cf\",\"toolbarGroup\":\"TextFormatter_toolbarGroup__SdJl2\",\"formatButton\":\"TextFormatter_formatButton__VD5Ix\",\"active\":\"TextFormatter_active__0GD4P\",\"buttonLabel\":\"TextFormatter_buttonLabel__4dlS9\",\"divider\":\"TextFormatter_divider__bHliT\",\"dark\":\"TextFormatter_dark__IbSuk\",\"formatHint\":\"TextFormatter_formatHint__D19Uz\",\"helpButton\":\"TextFormatter_helpButton__1w8pE\",\"formatHintContent\":\"TextFormatter_formatHintContent__MN7JC\",\"fadeIn\":\"TextFormatter_fadeIn__iehTX\",\"hintGrid\":\"TextFormatter_hintGrid__RRh6N\",\"hintItem\":\"TextFormatter_hintItem__ywSQA\",\"inlineCode\":\"TextFormatter_inlineCode__4V2mO\",\"strikethrough\":\"TextFormatter_strikethrough__xuhph\",\"moreOptionsWrapper\":\"TextFormatter_moreOptionsWrapper__2F9ol\",\"moreButton\":\"TextFormatter_moreButton__G-KGO\",\"moreOptionsMenu\":\"TextFormatter_moreOptionsMenu__T6Y03\"};","// components/TextFormatter/TextFormatter.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { \r\n  FiBold,\r\n  FiItalic,\r\n  FiList,\r\n  FiCode,\r\n  FiHash,\r\n  FiCornerUpRight,\r\n  FiType,\r\n  FiAlignLeft,\r\n  FiHelpCircle\r\n} from 'react-icons/fi';\r\nimport { RiListOrdered, RiQuoteText } from 'react-icons/ri';\r\nimport styles from './TextFormatter.module.css';\r\n\r\n/**\r\n * Barra de ferramentas de formatao de texto\r\n * @param {Object} props - Propriedades do componente\r\n * @param {Function} props.onChange - Funo chamada quando o texto  formatado\r\n * @param {string} props.value - Valor atual do texto\r\n * @param {React.RefObject} props.inputRef - Referncia para o elemento de input/textarea\r\n * @param {boolean} props.compact - Utilizar layout compacto\r\n * @param {boolean} props.darkMode - Utilizar tema escuro\r\n * @param {boolean} props.showHint - Mostrar dica de formatao\r\n * @returns {JSX.Element} Componente de formatao de texto\r\n */\r\nconst TextFormatter = ({ \r\n  onChange,\r\n  value = '',\r\n  inputRef,\r\n  compact = false,\r\n  darkMode = false,\r\n  showHint = true\r\n}) => {\r\n  const [showHintContent, setShowHintContent] = useState(false);\r\n  const [activeFormat, setActiveFormat] = useState(null);\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [showMoreOptions, setShowMoreOptions] = useState(false);\r\n\r\n  // Detecta se  dispositivo mvel\r\n  useEffect(() => {\r\n    const checkIfMobile = () => {\r\n      setIsMobile(window.innerWidth <= 768);\r\n    };\r\n    \r\n    checkIfMobile();\r\n    window.addEventListener('resize', checkIfMobile);\r\n    \r\n    return () => {\r\n      window.removeEventListener('resize', checkIfMobile);\r\n    };\r\n  }, []);\r\n\r\n  // Funo que aplica a formatao ao texto\r\n  const applyFormatting = (format) => {\r\n    if (!inputRef || !inputRef.current) return;\r\n\r\n    const input = inputRef.current;\r\n    const start = input.selectionStart;\r\n    const end = input.selectionEnd;\r\n    const selectedText = value.substring(start, end);\r\n    let newText = value;\r\n    let newPosition = end;\r\n\r\n    // Mostra feedback visual temporrio\r\n    setActiveFormat(format);\r\n    setTimeout(() => setActiveFormat(null), 300);\r\n\r\n    switch (format) {\r\n      case 'bold':\r\n        newText = newText.substring(0, start) + '*' + selectedText + '*' + newText.substring(end);\r\n        newPosition = end + 4;\r\n        break;\r\n      case 'italic':\r\n        newText = newText.substring(0, start) + '_' + selectedText + '_' + newText.substring(end);\r\n        newPosition = end + 2;\r\n        break;\r\n      case 'strikethrough':\r\n        newText = newText.substring(0, start) + '~' + selectedText + '~' + newText.substring(end);\r\n        newPosition = end + 4;\r\n        break;\r\n      case 'code':\r\n        newText = newText.substring(0, start) + '`' + selectedText + '`' + newText.substring(end);\r\n        newPosition = end + 7;\r\n        break;\r\n      case 'bullet':\r\n        // Adiciona lista com marcadores\r\n        const bulletText = selectedText ? \r\n          selectedText.split('\\n').map(line => `* ${line}`).join('\\n') :\r\n          '* ';\r\n        newText = newText.substring(0, start) + bulletText + newText.substring(end);\r\n        newPosition = start + bulletText.length;\r\n        break;\r\n      case 'numbered':\r\n        // Adiciona lista numerada\r\n        const numberedText = selectedText ? \r\n          selectedText.split('\\n').map((line, i) => `${i + 1}. ${line}`).join('\\n') :\r\n          '1. ';\r\n        newText = newText.substring(0, start) + numberedText + newText.substring(end);\r\n        newPosition = start + numberedText.length;\r\n        break;\r\n      case 'quote':\r\n        // Adiciona citao\r\n        const quoteText = selectedText ? \r\n          selectedText.split('\\n').map(line => `> ${line}`).join('\\n') :\r\n          '> ';\r\n        newText = newText.substring(0, start) + quoteText + newText.substring(end);\r\n        newPosition = start + quoteText.length;\r\n        break;\r\n      case 'newline':\r\n        newText = newText.substring(0, start) + '\\n' + newText.substring(end);\r\n        newPosition = start + 1;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    // Chama o callback onChange com o novo texto\r\n    if (onChange) {\r\n      const syntheticEvent = {\r\n        target: { value: newText },\r\n        preventDefault: () => {},\r\n        stopPropagation: () => {}\r\n      };\r\n      onChange(syntheticEvent);\r\n    }\r\n\r\n    // Reposiciona o cursor\r\n    setTimeout(() => {\r\n      if (inputRef.current) {\r\n        inputRef.current.focus();\r\n        inputRef.current.setSelectionRange(newPosition, newPosition);\r\n      }\r\n    }, 0);\r\n  };\r\n\r\n  // Renderiza um boto de formatao\r\n  const renderFormatButton = (format, icon, label) => {\r\n    const isActive = activeFormat === format;\r\n    \r\n    return (\r\n      <button \r\n        type=\"button\"\r\n        className={`${styles.formatButton} ${isActive ? styles.active : ''}`}\r\n        onClick={() => applyFormatting(format)}\r\n        aria-label={label}\r\n        title={label}\r\n      >\r\n        {icon}\r\n        {!compact && !isMobile && <span className={styles.buttonLabel}>{label}</span>}\r\n      </button>\r\n    );\r\n  };\r\n\r\n  // Grupo principal de botes (sempre visveis)\r\n  const primaryButtons = (\r\n    <>\r\n      {renderFormatButton('bold', <FiBold size={compact ? 14 : 16} />, 'Negrito')}\r\n      {renderFormatButton('italic', <FiItalic size={compact ? 14 : 16} />, 'Itlico')}\r\n      {renderFormatButton('strikethrough', <span className={styles.strikethrough}>S</span>, 'Tachado')}\r\n    </>\r\n  );\r\n\r\n  // Grupo secundrio de botes (expandido ou em menu)\r\n  const secondaryButtons = (\r\n    <>\r\n      {renderFormatButton('code', <FiCode size={compact ? 14 : 16} />, 'Bloco de cdigo')}\r\n      {renderFormatButton('numbered', <RiListOrdered size={compact ? 14 : 16} />, 'Lista numerada')}\r\n      {renderFormatButton('bullet', <FiList size={compact ? 14 : 16} />, 'Lista')}\r\n      {renderFormatButton('quote', <RiQuoteText size={compact ? 14 : 16} />, 'Citao')}\r\n    </>\r\n  );\r\n\r\n  return (\r\n    <div className={`${styles.formattingToolbar} ${compact ? styles.compact : ''} ${darkMode ? styles.dark : ''}`}>\r\n      <div className={styles.toolbarGroup}>\r\n        {primaryButtons}\r\n        \r\n        {isMobile ? (\r\n          <div className={styles.moreOptionsWrapper}>\r\n            <button \r\n              type=\"button\"\r\n              className={`${styles.formatButton} ${styles.moreButton}`}\r\n              onClick={() => setShowMoreOptions(!showMoreOptions)}\r\n              aria-expanded={showMoreOptions}\r\n              aria-label=\"Mais opes\"\r\n            >\r\n              <FiAlignLeft size={compact ? 14 : 16} />\r\n              <span className={styles.buttonLabel}>Mais</span>\r\n            </button>\r\n            \r\n            {showMoreOptions && (\r\n              <div className={styles.moreOptionsMenu}>\r\n                {secondaryButtons}\r\n              </div>\r\n            )}\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className={styles.divider}></div>\r\n            {secondaryButtons}\r\n          </>\r\n        )}\r\n      </div>\r\n      \r\n      {showHint && (\r\n        <div className={styles.formatHint}>\r\n          <button \r\n            className={styles.helpButton} \r\n            aria-label=\"Ajuda de formatao\"\r\n            onClick={() => setShowHintContent(!showHintContent)}\r\n            onMouseEnter={() => setShowHintContent(true)}\r\n            onMouseLeave={() => setShowHintContent(false)}\r\n          >\r\n            <FiHelpCircle size={16} />\r\n          </button>\r\n          \r\n          {showHintContent && (\r\n            <div \r\n              className={styles.formatHintContent}\r\n              role=\"tooltip\"\r\n            >\r\n              <h4>Formatao de Texto</h4>\r\n              <div className={styles.hintGrid}>\r\n                <div className={styles.hintItem}>\r\n                  <strong>Negrito</strong>\r\n                  <code>**texto**</code>\r\n                </div>\r\n                <div className={styles.hintItem}>\r\n                  <strong>Itlico</strong>\r\n                  <code>_texto_</code>\r\n                </div>\r\n                <div className={styles.hintItem}>\r\n                  <strong>Tachado</strong>\r\n                  <code>~~texto~~</code>\r\n                </div>\r\n                <div className={styles.hintItem}>\r\n                  <strong>Lista</strong>\r\n                  <code>* item</code>\r\n                </div>\r\n                <div className={styles.hintItem}>\r\n                  <strong>Lista numerada</strong>\r\n                  <code>1. item</code>\r\n                </div>\r\n                <div className={styles.hintItem}>\r\n                  <strong>Citao</strong>\r\n                  <code>&gt; texto</code>\r\n                </div>\r\n                <div className={styles.hintItem}>\r\n                  <strong>Cdigo inline</strong>\r\n                  <code>`cdigo`</code>\r\n                </div>\r\n                <div className={styles.hintItem}>\r\n                  <strong>Bloco de cdigo</strong>\r\n                  <code>`cdigo`</code>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TextFormatter;\r\n\r\n\r\n// // Inserir formatao no texto selecionado\r\n// const insertFormatting = (format) => {\r\n//     if (!textareaRef.current) return;\r\n\r\n//     const start = textareaRef.current.selectionStart;\r\n//     const end = textareaRef.current.selectionEnd;\r\n//     const selectedText = card.bodyText ? card.bodyText.substring(start, end) : '';\r\n//     let newText = card.bodyText || '';\r\n//     let newPosition = end;\r\n\r\n//     switch (format) {\r\n//       case 'bold':\r\n//         newText = newText.substring(0, start) + '*' + selectedText + '*' + newText.substring(end);\r\n//         newPosition = end + 2;\r\n//         break;\r\n//       case 'italic':\r\n//         newText = newText.substring(0, start) + '_' + selectedText + '_' + newText.substring(end);\r\n//         newPosition = end + 2;\r\n//         break;\r\n//       case 'strikethrough':\r\n//         newText = newText.substring(0, start) + '~' + selectedText + '~' + newText.substring(end);\r\n//         newPosition = end + 2;\r\n//         break;\r\n//       case 'code':\r\n//         newText = newText.substring(0, start) + '```' + selectedText + '```' + newText.substring(end);\r\n//         newPosition = end + 6;\r\n//         break;\r\n//       case 'bullet':\r\n//         // Adiciona lista com marcadores\r\n//         const bulletText = selectedText ? \r\n//           selectedText.split('\\n').map(line => `* ${line}`).join('\\n') :\r\n//           '* ';\r\n//         newText = newText.substring(0, start) + bulletText + newText.substring(end);\r\n//         newPosition = start + bulletText.length;\r\n//         break;\r\n//       case 'numbered':\r\n//         // Adiciona lista numerada\r\n//         const numberedText = selectedText ? \r\n//           selectedText.split('\\n').map((line, i) => `${i + 1}. ${line}`).join('\\n') :\r\n//           '1. ';\r\n//         newText = newText.substring(0, start) + numberedText + newText.substring(end);\r\n//         newPosition = start + numberedText.length;\r\n//         break;\r\n//       case 'quote':\r\n//         // Adiciona citao\r\n//         const quoteText = selectedText ? \r\n//           selectedText.split('\\n').map(line => `> ${line}`).join('\\n') :\r\n//           '> ';\r\n//         newText = newText.substring(0, start) + quoteText + newText.substring(end);\r\n//         newPosition = start + quoteText.length;\r\n//         break;\r\n//       case 'inline-code':\r\n//         // Cdigo inline\r\n//         newText = newText.substring(0, start) + '`' + selectedText + '`' + newText.substring(end);\r\n//         newPosition = end + 2;\r\n//         break;\r\n//       case 'newline':\r\n//         newText = newText.substring(0, start) + '\\n' + newText.substring(end);\r\n//         newPosition = start + 1;\r\n//         break;\r\n//       default:\r\n//         break;\r\n//     }\r\n\r\n//     updateCard(index, 'bodyText', newText);\r\n//     if (!changedFields.includes('bodyText')) {\r\n//       setChangedFields(prev => [...prev, 'bodyText']);\r\n//     }\r\n\r\n//     // Reposiciona o cursor\r\n//     setTimeout(() => {\r\n//       if (textareaRef.current) {\r\n//         textareaRef.current.focus();\r\n//         textareaRef.current.setSelectionRange(newPosition, newPosition);\r\n//       }\r\n//     }, 0);\r\n//   };","// extracted by mini-css-extract-plugin\nexport default {\"hintContainer\":\"Hints_hintContainer__AtW-O\",\"hintIconWrapper\":\"Hints_hintIconWrapper__Z9jaV\",\"hintContent\":\"Hints_hintContent__F46AO\",\"hintTitle\":\"Hints_hintTitle__8Av5T\",\"hintMessage\":\"Hints_hintMessage__w-YTs\",\"hintList\":\"Hints_hintList__kbKwG\",\"hintAction\":\"Hints_hintAction__dkXyv\",\"info\":\"Hints_info__CkTCb\",\"warning\":\"Hints_warning__n1TiJ\",\"success\":\"Hints_success__hsb-L\",\"error\":\"Hints_error__BNG73\",\"whatsapp\":\"Hints_whatsapp__UW4ci\",\"buttonHint\":\"Hints_buttonHint__QqSiZ\",\"textHint\":\"Hints_textHint__x8fQZ\",\"simple\":\"Hints_simple__7OGWi\",\"detailed\":\"Hints_detailed__Ziv7L\",\"animated\":\"Hints_animated__CEYFh\",\"subtlePulse\":\"Hints_subtlePulse__7asS+\",\"dismissable\":\"Hints_dismissable__lUeNQ\",\"dismissButton\":\"Hints_dismissButton__c58XB\",\"checkList\":\"Hints_checkList__YNrNX\",\"checkItem\":\"Hints_checkItem__1rzpx\",\"checkbox\":\"Hints_checkbox__GfpDg\",\"hintsGroup\":\"Hints_hintsGroup__Tmkgj\",\"progress\":\"Hints_progress__Bt+a+\",\"progressBar\":\"Hints_progressBar__jOTyU\",\"socialProof\":\"Hints_socialProof__l+qDI\",\"socialCount\":\"Hints_socialCount__KMnIi\",\"important\":\"Hints_important__NgSXk\",\"compact\":\"Hints_compact__55R3t\",\"whatsappRequirement\":\"Hints_whatsappRequirement__rBUxv\",\"infoIcon\":\"Hints_infoIcon__IiuF7\"};","// Hints.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { \r\n  FiInfo, \r\n  FiAlertCircle, \r\n  FiCheckCircle, \r\n  FiMessageCircle, \r\n  FiX,\r\n  FiChevronRight,\r\n  FiCheckSquare,\r\n  FiSquare\r\n} from 'react-icons/fi';\r\nimport styles from './Hints.module.css';\r\n\r\n/**\r\n * Enhanced Hints component leveraging cognitive biases:\r\n * - Salience bias: Visual hierarchy with icons and colors to highlight importance\r\n * - Von Restorff effect: Distinctiveness through visual contrasts\r\n * - Serial position effect: Important information first\r\n * - Loss aversion: Warning hints emphasize potential losses\r\n * - Social proof: Optional count of others who found the hint useful\r\n * - Anchoring: Progress indicators to anchor expectations\r\n * - Chunking: Breaking information into digestible pieces\r\n * - Cognitive ease: Simple language and clear formatting\r\n */\r\nconst Hints = ({\r\n  variant = 'info',\r\n  message,\r\n  title,\r\n  list,\r\n  className,\r\n  isAnimated = false,\r\n  isDismissable = false,\r\n  isCheckable = false,\r\n  isImportant = false,\r\n  isCompact = false,\r\n  progressValue = null,\r\n  socialCount = null,\r\n  actionText = null,\r\n  actionCallback = null,\r\n  onDismiss = null,\r\n  iconOverride = null\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  const [checkedItems, setCheckedItems] = useState(\r\n    list ? Array(list.length).fill(false) : []\r\n  );\r\n\r\n  // Apply animated effect on mount if needed\r\n  useEffect(() => {\r\n    if (isAnimated) {\r\n      const timeout = setTimeout(() => {\r\n        const element = document.getElementById(`hint-${hintId}`);\r\n        if (element) {\r\n          element.classList.remove(styles.animated);\r\n        }\r\n      }, 2000);\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isAnimated]);\r\n\r\n  // Generate unique ID for this hint instance\r\n  const hintId = Math.random().toString(36).substr(2, 9);\r\n\r\n  const getIcon = () => {\r\n    if (iconOverride) return iconOverride;\r\n    \r\n    switch (variant) {\r\n      case 'info': return <FiInfo size={isCompact ? 14 : 18} />;\r\n      case 'warning': return <FiAlertCircle size={isCompact ? 14 : 18} />;\r\n      case 'success': return <FiCheckCircle size={isCompact ? 14 : 18} />;\r\n      case 'whatsapp': return <FiMessageCircle size={isCompact ? 14 : 18} />;\r\n      case 'simple': return <FiInfo size={isCompact ? 12 : 16} />;\r\n      default: return <FiInfo size={isCompact ? 14 : 18} />;\r\n    }\r\n  };\r\n\r\n  const handleDismiss = () => {\r\n    setIsVisible(false);\r\n    if (onDismiss) onDismiss();\r\n  };\r\n\r\n  const toggleCheckItem = (index) => {\r\n    const newCheckedItems = [...checkedItems];\r\n    newCheckedItems[index] = !newCheckedItems[index];\r\n    setCheckedItems(newCheckedItems);\r\n  };\r\n\r\n  // Don't render if dismissed\r\n  if (!isVisible) return null;\r\n\r\n  return (\r\n    <div \r\n      id={`hint-${hintId}`}\r\n      className={`\r\n        ${styles.hintContainer} \r\n        ${styles[variant]} \r\n        ${isAnimated ? styles.animated : ''}\r\n        ${isDismissable ? styles.dismissable : ''}\r\n        ${isImportant ? styles.important : ''}\r\n        ${isCompact ? styles.compact : ''}\r\n        ${className || ''}\r\n      `}\r\n      role=\"alert\"\r\n      aria-live={isImportant ? \"assertive\" : \"polite\"}\r\n    >\r\n      <div className={styles.hintIconWrapper}>\r\n        {getIcon()}\r\n      </div>\r\n      \r\n      <div className={styles.hintContent}>\r\n        {title && (\r\n          <div className={styles.hintTitle}>\r\n            {title}\r\n          </div>\r\n        )}\r\n        \r\n        {typeof message === 'string' ? (\r\n          <p className={styles.hintMessage}>{message}</p>\r\n        ) : (\r\n          message\r\n        )}\r\n        \r\n        {list && list.length > 0 && (\r\n          <ul className={isCheckable ? styles.checkList : styles.hintList}>\r\n            {list.map((item, index) => (\r\n              isCheckable ? (\r\n                <li key={index} className={styles.checkItem}>\r\n                  <div \r\n                    className={styles.checkbox}\r\n                    onClick={() => toggleCheckItem(index)}\r\n                    role=\"checkbox\"\r\n                    aria-checked={checkedItems[index]}\r\n                    tabIndex={0}\r\n                  >\r\n                    {checkedItems[index] ? (\r\n                      <FiCheckSquare size={16} />\r\n                    ) : (\r\n                      <FiSquare size={16} />\r\n                    )}\r\n                  </div>\r\n                  <span style={checkedItems[index] ? {textDecoration: 'line-through', opacity: 0.7} : {}}>\r\n                    {item}\r\n                  </span>\r\n                </li>\r\n              ) : (\r\n                <li key={index}>{item}</li>\r\n              )\r\n            ))}\r\n          </ul>\r\n        )}\r\n        \r\n        {progressValue !== null && (\r\n          <div className={styles.progressBar} style={{ width: `${progressValue}%` }} />\r\n        )}\r\n        \r\n        {socialCount !== null && (\r\n          <div className={styles.socialProofInfo}>\r\n            <span className={styles.socialCount}>{socialCount}</span> users found this helpful\r\n          </div>\r\n        )}\r\n        \r\n        {actionText && actionCallback && (\r\n          <div \r\n            className={styles.hintAction}\r\n            onClick={actionCallback}\r\n            role=\"button\"\r\n            tabIndex={0}\r\n          >\r\n            {actionText}\r\n            <FiChevronRight size={14} />\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {isDismissable && (\r\n        <button \r\n          className={styles.dismissButton} \r\n          onClick={handleDismiss}\r\n          aria-label=\"Dismiss\"\r\n        >\r\n          <FiX size={16} />\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nHints.propTypes = {\r\n  variant: PropTypes.oneOf([\r\n    'simple', 'info', 'warning', 'success', 'whatsapp', \r\n    'detailed', 'buttonHint', 'textHint'\r\n  ]),\r\n  message: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.node\r\n  ]).isRequired,\r\n  title: PropTypes.string,\r\n  list: PropTypes.arrayOf(PropTypes.string),\r\n  className: PropTypes.string,\r\n  isAnimated: PropTypes.bool,\r\n  isDismissable: PropTypes.bool,\r\n  isCheckable: PropTypes.bool,\r\n  isImportant: PropTypes.bool,\r\n  isCompact: PropTypes.bool,\r\n  progressValue: PropTypes.number,\r\n  socialCount: PropTypes.number,\r\n  actionText: PropTypes.string,\r\n  actionCallback: PropTypes.func,\r\n  onDismiss: PropTypes.func,\r\n  iconOverride: PropTypes.node\r\n};\r\n\r\n/**\r\n * HintsGroup component for grouping related hints\r\n */\r\nexport const HintsGroup = ({ children, title, className }) => {\r\n  return (\r\n    <div className={`${styles.hintsGroup} ${className || ''}`}>\r\n      {title && <h4>{title}</h4>}\r\n      {children}\r\n    </div>\r\n  );\r\n};\r\n\r\nHintsGroup.propTypes = {\r\n  children: PropTypes.node.isRequired,\r\n  title: PropTypes.string,\r\n  className: PropTypes.string\r\n};\r\n\r\nexport default Hints;","// Input.js\r\nimport React, { forwardRef, useState, useEffect, useRef } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport styles from './Input.module.css';\r\nimport CharacterCounter from '../CharacterCounter/CharacterCounter';\r\nimport TextFormatter from '../TextFormatter/TextFormatter';\r\nimport Hints from '../Hints/Hints';\r\nimport { FiEye, FiEyeOff, FiChevronDown, FiChevronUp, FiX, FiInfo, FiAlertCircle } from 'react-icons/fi';\r\n\r\n/**\r\n * Enhanced Input component with validation, masks, formatting, dropdown support, and improved hints\r\n * @param {Object} props - Component properties\r\n * @returns {JSX.Element} Input component\r\n */\r\nconst Input = forwardRef(({\r\n  id,\r\n  name,\r\n  type = 'text',\r\n  label,\r\n  placeholder,\r\n  value,\r\n  onChange,\r\n  onBlur,\r\n  error,\r\n  // Hints specific props\r\n  hintMessage,\r\n  hintVariant = 'simple',\r\n  hintTitle,\r\n  hintList,\r\n  hintIsDismissable = false,\r\n  hintIsAnimated = false,\r\n  hintIsImportant = false,\r\n  hintIsCompact = false,\r\n  hintSocialCount = null,\r\n  hintActionText = null,\r\n  hintActionCallback = null,\r\n  hintOnDismiss = null,\r\n  hintClassName = '',\r\n  // Dropdown specific props\r\n  isDropdown = false,\r\n  options = [],\r\n  optionLabelKey = 'label',\r\n  optionValueKey = 'value',\r\n  multiple = false,\r\n  searchable = false,\r\n  creatable = false,\r\n  noOptionsMessage = 'No options available',\r\n  onOptionCreate,\r\n  customOptionComponent,\r\n  dropdownWidth,\r\n  dropdownMaxHeight = '250px',\r\n  closeOnSelect = true,\r\n  // Optional badge\r\n  showOptionalBadge = false,\r\n  optionalText = 'Optional',\r\n  optionalBadgeClassName = '',\r\n  // Existing props\r\n  required = false,\r\n  disabled = false,\r\n  readOnly = false,\r\n  icon,\r\n  iconPosition = 'right',\r\n  maxLength,\r\n  minLength,\r\n  regexPattern,\r\n  regexErrorMessage,\r\n  variant = 'default',\r\n  mask,\r\n  showCharCounter = false,\r\n  showCounterFormatting = true,\r\n  allowFormatting = false,\r\n  className = '',\r\n  inputClassName = '',\r\n  clearable = false,\r\n  size = 'medium',\r\n  fullWidth = true,\r\n  formatOnBlur = false,\r\n  validateOnChange = false,\r\n  validateOnBlur = true,\r\n  toolbar,\r\n  rightElement,\r\n  leftElement,\r\n  characterCounterVariant = 'default',\r\n  textFormatting = false,\r\n  textFormattingCompact = false,\r\n  textFormattingDarkMode = false,\r\n  textFormattingShowHint = true,\r\n  ...restProps\r\n}, ref) => {\r\n  // Create internal ref if none provided\r\n  const inputRef = useRef(null);\r\n  const dropdownRef = useRef(null);\r\n  const combinedRef = ref || inputRef;\r\n  \r\n  // Local state\r\n  const [localValue, setLocalValue] = useState(value || '');\r\n  const [localError, setLocalError] = useState(error || '');\r\n  const [isFocused, setIsFocused] = useState(false);\r\n  const [isTouched, setIsTouched] = useState(false);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [changedFields, setChangedFields] = useState([]);\r\n  \r\n  // Dropdown specific state\r\n  const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n  const [searchValue, setSearchValue] = useState('');\r\n  const [selectedOptions, setSelectedOptions] = useState([]);\r\n  const [filteredOptions, setFilteredOptions] = useState(options);\r\n  \r\n  // Update local value when prop changes\r\n  useEffect(() => {\r\n    if (!isDropdown && value !== localValue) {\r\n      setLocalValue(value || '');\r\n    }\r\n  }, [value, isDropdown]);\r\n  \r\n  // Initialize selected options for dropdown\r\n  useEffect(() => {\r\n    if (isDropdown && options && options.length > 0) {\r\n      if (multiple) {\r\n        const initialSelected = Array.isArray(value) \r\n          ? options.filter(option => \r\n              value.includes(option[optionValueKey] || option)\r\n            )\r\n          : [];\r\n        \r\n        setSelectedOptions(initialSelected);\r\n        \r\n        const displayText = initialSelected.length > 0\r\n          ? initialSelected.map(opt => opt[optionLabelKey] || opt).join(', ')\r\n          : '';\r\n        \r\n        if (displayText !== localValue) {\r\n          setLocalValue(displayText);\r\n        }\r\n      } else {\r\n        const selectedOption = options.find(option => \r\n          (option[optionValueKey] || option) === value\r\n        );\r\n        \r\n        setSelectedOptions(selectedOption ? [selectedOption] : []);\r\n        \r\n        const displayValue = selectedOption ? (selectedOption[optionLabelKey] || selectedOption) : '';\r\n        if (displayValue !== localValue) {\r\n          setLocalValue(displayValue);\r\n        }\r\n      }\r\n    }\r\n  }, [isDropdown, options, value, optionValueKey, optionLabelKey, multiple]); // Remove selectedOptions e localValue\r\n  \r\n  // Update filtered options based on search\r\n  useEffect(() => {\r\n    // Comparar os arrays antes de atualizar\r\n    const newFilteredOptions = isDropdown && searchable\r\n      ? options.filter(option => {\r\n          const optionLabel = option[optionLabelKey] || option;\r\n          return String(optionLabel).toLowerCase().includes(searchValue.toLowerCase());\r\n        })\r\n      : options;\r\n  \r\n    // Verificar se realmente precisa atualizar\r\n    const needsUpdate = JSON.stringify(filteredOptions) !== JSON.stringify(newFilteredOptions);\r\n    \r\n    if (needsUpdate) {\r\n      setFilteredOptions(newFilteredOptions);\r\n    }\r\n  }, [isDropdown, options, searchValue, searchable, optionLabelKey]);\r\n\r\n  // Handle outside click to close dropdown\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target)) {\r\n        setIsDropdownOpen(false);\r\n      }\r\n    };\r\n    \r\n    if (isDropdownOpen) {\r\n      document.addEventListener('mousedown', handleClickOutside);\r\n    }\r\n    \r\n    return () => {\r\n      document.removeEventListener('mousedown', handleClickOutside);\r\n    };\r\n  }, [isDropdownOpen]);\r\n\r\n  // Error state synchronization\r\n  useEffect(() => {\r\n    setLocalError(error || '');\r\n  }, [error]);\r\n\r\n  // Reset changed fields indication after some time\r\n  useEffect(() => {\r\n    if (changedFields.length > 0) {\r\n      const timer = setTimeout(() => {\r\n        setChangedFields([]);\r\n      }, 3000);\r\n      \r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [changedFields]);\r\n\r\n  // Pre-defined regex patterns\r\n  const patterns = {\r\n    phoneNumber: /^\\(\\d{2}\\) \\d{5}-\\d{4}$/,\r\n    cpf: /^\\d{3}\\.\\d{3}\\.\\d{3}-\\d{2}$/,\r\n    cnpj: /^\\d{2}\\.\\d{3}\\.\\d{3}\\/\\d{4}-\\d{2}$/,\r\n    cep: /^\\d{5}-\\d{3}$/,\r\n    rg: /^(\\d{1,2})\\.(\\d{3})\\.(\\d{3})-(\\d{1}|X|x)$/,\r\n    name: /^[A-Za-z---\\s'.-]+$/,\r\n    email: /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/,\r\n    url: /^(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)$/,\r\n    creditCard: /^(?:\\d{4}[ -]?){3}\\d{4}$/,\r\n    number: /^[0-9]+$/,\r\n    onlyLetters: /^[A-Za-z---]+$/,\r\n    alphanumeric: /^[A-Za-z---0-9]+$/,\r\n    templateName: /^[a-z0-9_]{3,}$/\r\n  };\r\n\r\n  // Input mask function\r\n  const applyMask = (value, maskType) => {\r\n    if (!value) return '';\r\n    \r\n    const digits = value.replace(/\\D/g, '');\r\n    \r\n    switch (maskType) {\r\n      case 'phoneNumber':\r\n        if (digits.length <= 11) {\r\n          return digits.replace(/^(\\d{2})(\\d{0,5})(\\d{0,4})/, (_, p1, p2, p3) => {\r\n            let result = '';\r\n            if (p1) result += `(${p1}`;\r\n            if (p2) result += `) ${p2}`;\r\n            if (p3) result += `-${p3}`;\r\n            return result;\r\n          }).trim();\r\n        }\r\n        return value;\r\n\r\n        case 'internationalPhone':\r\n          // Format: 55(country)55(state)9(verification digit)XXXXXXX(number)\r\n          return digits.replace(/^(\\d{0,2})(\\d{0,2})(\\d{0,1})(\\d{0,7})/, (_, country, state, verificationDigit, number) => {\r\n            let result = '';\r\n            if (country) result += country;\r\n            if (state) result += state;\r\n            if (verificationDigit) result += verificationDigit;\r\n            if (number) result += number;\r\n            return result;\r\n          }).trim();\r\n      \r\n      case 'cpf':\r\n        return digits.replace(/^(\\d{0,3})(\\d{0,3})(\\d{0,3})(\\d{0,2})/, (_, p1, p2, p3, p4) => {\r\n          let result = '';\r\n          if (p1) result += p1;\r\n          if (p2) result += `.${p2}`;\r\n          if (p3) result += `.${p3}`;\r\n          if (p4) result += `-${p4}`;\r\n          return result;\r\n        }).trim();\r\n      \r\n      case 'cnpj':\r\n        return digits.replace(/^(\\d{0,2})(\\d{0,3})(\\d{0,3})(\\d{0,4})(\\d{0,2})/, (_, p1, p2, p3, p4, p5) => {\r\n          let result = '';\r\n          if (p1) result += p1;\r\n          if (p2) result += `.${p2}`;\r\n          if (p3) result += `.${p3}`;\r\n          if (p4) result += `/${p4}`;\r\n          if (p5) result += `-${p5}`;\r\n          return result;\r\n        }).trim();\r\n      \r\n      case 'cep':\r\n        return digits.replace(/^(\\d{0,5})(\\d{0,3})/, (_, p1, p2) => {\r\n          let result = '';\r\n          if (p1) result += p1;\r\n          if (p2) result += `-${p2}`;\r\n          return result;\r\n        }).trim();\r\n      \r\n      default:\r\n        return value;\r\n    }\r\n  };\r\n\r\n  // Value formatting function\r\n  const formatValue = (value, variant) => {\r\n    if (!value || !allowFormatting) return value;\r\n    \r\n    switch (variant) {\r\n      case 'name':\r\n        // Capitalize each word\r\n        return value.replace(/\\b\\w/g, char => char.toUpperCase());\r\n      \r\n      case 'uppercase':\r\n        return value.toUpperCase();\r\n      \r\n      case 'lowercase':\r\n        return value.toLowerCase();\r\n      \r\n      case 'capitalize':\r\n        return value.charAt(0).toUpperCase() + value.slice(1);\r\n      \r\n      case 'sentence':\r\n        // Capitalize first letter of each sentence\r\n        return value.replace(/(^\\s*\\w|[.!?]\\s*\\w)/g, char => char.toUpperCase());\r\n      \r\n      default:\r\n        return value;\r\n    }\r\n  };\r\n\r\n  // Input validation function\r\n  // Modificao para a funo validateValue no Input.js\r\nconst validateValue = (valueToValidate) => {\r\n  // Skip validation if disabled or read-only\r\n  if (disabled || readOnly) return '';\r\n  \r\n  // For dropdown, check if a value is selected when required\r\n  if (isDropdown && required && selectedOptions.length === 0) {\r\n    return 'Este campo  obrigatrio';\r\n  }\r\n  \r\n  // Required validation for text inputs\r\n  if (required && !valueToValidate?.trim() && !isDropdown) {\r\n    return 'Este campo  obrigatrio';\r\n  }\r\n  \r\n  // Skip more validations if the field is empty and not required\r\n  if (!valueToValidate && !isDropdown) return '';\r\n  \r\n  // Existing validations for text inputs\r\n  if (!isDropdown) {\r\n    // Min length validation\r\n    if (minLength && valueToValidate.length < minLength) {\r\n      return `O comprimento mnimo  de ${minLength} caracteres`;\r\n    }\r\n    \r\n    // Max length validation (should not happen due to maxLength attribute)\r\n    if (maxLength && valueToValidate.length > maxLength) {\r\n      return `O comprimento mximo  de ${maxLength} caracteres`;\r\n    }\r\n    \r\n    // MODIFICAO AQUI: Pular validao de regex para phoneNumber\r\n    if (variant === 'phoneNumber') {\r\n      // Verificar apenas se contm pelo menos alguns dgitos (bsico)\r\n      if (!/\\d/.test(valueToValidate)) {\r\n        return 'O nmero de telefone deve conter pelo menos um dgito';\r\n      }\r\n      return ''; // Pular validao regex\r\n    }\r\n    \r\n    // Regex validation (custom or predefined)\r\n    const patternToUse = regexPattern || (patterns[variant] || null);\r\n    if (patternToUse && valueToValidate && !patternToUse.test(valueToValidate)) {\r\n      if (variant === 'templateName') {\r\n        return \"Use um nome descritivo sem espaos, mnimo de 3 caracteres. Exemplo: 'promo_verao' ou 'lancamento_produto'\";\r\n      }\r\n      return regexErrorMessage || `Formato invlido para ${variant || 'campo'}`;\r\n    }\r\n  }\r\n  \r\n  return '';\r\n};\r\n\r\n  // Dropdown specific handlers\r\n  const handleDropdownToggle = () => {\r\n    if (!disabled && !readOnly) {\r\n      setIsDropdownOpen(!isDropdownOpen);\r\n      if (!isDropdownOpen && combinedRef.current) {\r\n        combinedRef.current.focus();\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleOptionSelect = (option) => {\r\n    if (multiple) {\r\n      // Check if option is already selected\r\n      const isSelected = selectedOptions.some(\r\n        selected => (selected[optionValueKey] || selected) === (option[optionValueKey] || option)\r\n      );\r\n      \r\n      let newSelectedOptions;\r\n      if (isSelected) {\r\n        // Remove from selection\r\n        newSelectedOptions = selectedOptions.filter(\r\n          selected => (selected[optionValueKey] || selected) !== (option[optionValueKey] || option)\r\n        );\r\n      } else {\r\n        // Add to selection\r\n        newSelectedOptions = [...selectedOptions, option];\r\n      }\r\n      \r\n      setSelectedOptions(newSelectedOptions);\r\n      \r\n      // Update displayed text for multiple select\r\n      const displayText = newSelectedOptions.length > 0\r\n        ? newSelectedOptions.map(opt => opt[optionLabelKey] || opt).join(', ')\r\n        : '';\r\n      \r\n      setLocalValue(displayText);\r\n      \r\n      // Call onChange with array of values\r\n      if (onChange) {\r\n        const values = newSelectedOptions.map(opt => opt[optionValueKey] || opt);\r\n        const syntheticEvent = {\r\n          target: { name, value: values },\r\n          preventDefault: () => {},\r\n          stopPropagation: () => {}\r\n        };\r\n        onChange(syntheticEvent);\r\n      }\r\n    } else {\r\n      // Single select\r\n      setSelectedOptions([option]);\r\n      const displayValue = option[optionLabelKey] || option;\r\n      setLocalValue(displayValue);\r\n      \r\n      // Close dropdown if configured to close on select\r\n      if (closeOnSelect) {\r\n        setIsDropdownOpen(false);\r\n      }\r\n      \r\n      // Call onChange with the selected value\r\n      if (onChange) {\r\n        const optionValue = option[optionValueKey] || option;\r\n        const syntheticEvent = {\r\n          target: { name, value: optionValue },\r\n          preventDefault: () => {},\r\n          stopPropagation: () => {}\r\n        };\r\n        onChange(syntheticEvent);\r\n      }\r\n    }\r\n    \r\n    // Mark as changed\r\n    if (!changedFields.includes('value')) {\r\n      setChangedFields(prev => [...prev, 'value']);\r\n    }\r\n    \r\n    // Clear search value if searchable\r\n    if (searchable) {\r\n      setSearchValue('');\r\n    }\r\n  };\r\n\r\n  const handleSearchChange = (e) => {\r\n    setSearchValue(e.target.value);\r\n  };\r\n\r\n  const handleCreateOption = () => {\r\n    if (creatable && searchValue && onOptionCreate) {\r\n      const newOption = onOptionCreate(searchValue);\r\n      if (newOption) {\r\n        handleOptionSelect(newOption);\r\n        setSearchValue('');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Password toggle\r\n  const togglePasswordVisibility = () => {\r\n    setShowPassword(!showPassword);\r\n  };\r\n  \r\n  // Clear input field\r\n  const handleClear = () => {\r\n    if (isDropdown) {\r\n      setSelectedOptions([]);\r\n      setLocalValue('');\r\n      \r\n      // Call onChange with empty value\r\n      if (onChange) {\r\n        const syntheticEvent = {\r\n          target: { name, value: multiple ? [] : '' },\r\n          preventDefault: () => {},\r\n          stopPropagation: () => {}\r\n        };\r\n        onChange(syntheticEvent);\r\n      }\r\n    } else {\r\n      setLocalValue('');\r\n      \r\n      // Call onChange with empty value\r\n      if (onChange) {\r\n        const syntheticEvent = {\r\n          target: { name, value: '' },\r\n          preventDefault: () => {},\r\n          stopPropagation: () => {}\r\n        };\r\n        onChange(syntheticEvent);\r\n      }\r\n    }\r\n    \r\n    // Focus the input after clearing\r\n    if (combinedRef.current) {\r\n      combinedRef.current.focus();\r\n    }\r\n    \r\n    // Mark as changed\r\n    if (!changedFields.includes('value')) {\r\n      setChangedFields(prev => [...prev, 'value']);\r\n    }\r\n  };\r\n\r\n  // Input change handler\r\n  const handleChange = (e) => {\r\n    if (isDropdown) {\r\n      // Para dropdown, no permite alteraes diretas de texto\r\n      return;\r\n    }\r\n    \r\n    // Obtm o valor do evento\r\n    let newValue = e.target.value;\r\n    \r\n    // Extrai apenas os dgitos para nmeros de telefone antes de qualquer manipulao\r\n    // para poder passar isso de volta ao componente pai\r\n    const digitsOnly = variant === 'phoneNumber' ? newValue.replace(/\\D/g, '') : null;\r\n    \r\n    // Primeiro impede entrada de caracteres invlidos com base no variant\r\n    newValue = preventInvalidInput(newValue, variant);\r\n    \r\n    // Depois aplica a mscara (formatao de exibio)\r\n    if (variant && variant !== 'default') {\r\n      newValue = applyMask(newValue, variant);\r\n    } else if (mask) {\r\n      newValue = applyMask(newValue, 'custom');\r\n    }\r\n    \r\n    // Aplica formatao se permitido\r\n    if (allowFormatting && !formatOnBlur) {\r\n      newValue = formatValue(newValue, variant);\r\n    }\r\n    \r\n    // Atualiza estado local com o valor formatado (para exibio)\r\n    setLocalValue(newValue);\r\n    \r\n    // Chama onChange original com o valor apropriado\r\n    if (onChange) {\r\n      // Para campos de telefone, passa apenas os dgitos ao componente pai\r\n      if (variant === 'phoneNumber' && digitsOnly !== null) {\r\n        const syntheticEvent = { ...e, target: { ...e.target, value: digitsOnly, displayValue: newValue } };\r\n        onChange(syntheticEvent);\r\n      } else {\r\n        const syntheticEvent = { ...e, target: { ...e.target, value: newValue } };\r\n        onChange(syntheticEvent);\r\n      }\r\n    }\r\n    \r\n    // Valida durante digitao se habilitado\r\n    if (validateOnChange && isTouched) {\r\n      const validationError = validateValue(newValue);\r\n      setLocalError(validationError);\r\n    }\r\n    \r\n    // Marca como alterado\r\n    if (!changedFields.includes('value')) {\r\n      setChangedFields(prev => [...prev, 'value']);\r\n    }\r\n  };\r\n\r\n  // Focus handler\r\n  const handleFocus = (e) => {\r\n    setIsFocused(true);\r\n    setIsTouched(true);\r\n    \r\n    if (restProps.onFocus) {\r\n      restProps.onFocus(e);\r\n    }\r\n    \r\n    // Open dropdown on focus if it's a dropdown\r\n    if (isDropdown && !isDropdownOpen) {\r\n      setIsDropdownOpen(true);\r\n    }\r\n  };\r\n\r\n  // Blur handler\r\n  const handleBlur = (e) => {\r\n    // Don't blur immediately for dropdowns to allow clicking options\r\n    if (isDropdown) {\r\n      // We'll handle this with the click outside listener\r\n      return;\r\n    }\r\n    \r\n    setIsFocused(false);\r\n    \r\n    let finalValue = e.target.value;\r\n    \r\n    // Apply formatting on blur if configured\r\n    if (allowFormatting && formatOnBlur) {\r\n      finalValue = formatValue(finalValue, variant);\r\n      setLocalValue(finalValue);\r\n      \r\n      // Call onChange with formatted value\r\n      if (onChange) {\r\n        const syntheticEvent = { ...e, target: { ...e.target, value: finalValue } };\r\n        onChange(syntheticEvent);\r\n      }\r\n    }\r\n    \r\n    // Validate on blur if configured\r\n    if (validateOnBlur) {\r\n      const validationError = validateValue(finalValue);\r\n      setLocalError(validationError);\r\n    }\r\n    \r\n    // Call original onBlur\r\n    if (onBlur) {\r\n      if (allowFormatting && formatOnBlur) {\r\n        // Pass the formatted value\r\n        const syntheticEvent = { ...e, target: { ...e.target, value: finalValue } };\r\n        onBlur(syntheticEvent);\r\n      } else {\r\n        onBlur(e);\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  const preventInvalidInput = (value, variant) => {\r\n    // Se no houver variant especificado, permite qualquer input\r\n    if (!variant || variant === 'default') return value;\r\n    \r\n    switch (variant) {\r\n      case 'phoneNumber':\r\n     // Permite apenas nmeros e alguns caracteres especiais para formatao\r\n        return value.replace(/[^\\d() -]/g, '');\r\n        \r\n      case 'number':\r\n      case 'onlyNumbers':\r\n        // Permite apenas nmeros\r\n        return value.replace(/[^\\d]/g, '');\r\n        \r\n      case 'onlyLetters':\r\n        // Permite apenas letras, incluindo acentuadas\r\n        return value.replace(/[^A-Za-z--- ]/g, '');\r\n        \r\n      case 'alphanumeric':\r\n        // Permite letras e nmeros\r\n        return value.replace(/[^A-Za-z---0-9 ]/g, '');\r\n        \r\n      case 'name':\r\n        // Permite letras, espaos, apstrofos, pontos e hfens\r\n        return value.replace(/[^A-Za-z---\\s'.-]/g, '');\r\n        \r\n      case 'email':\r\n        // Validao bsica para email - permite caracteres vlidos em email\r\n        return value.replace(/[^A-Za-z0-9@._+-]/g, '');\r\n        \r\n      case 'url':\r\n        // Permite caracteres vlidos em URL\r\n        return value.replace(/[^A-Za-z0-9:/.?&=_-]/g, '');\r\n        \r\n      case 'cpf':\r\n        // Permite apenas nmeros e pontos/hfen para formatao\r\n        return value.replace(/[^\\d.-]/g, '');\r\n        \r\n      case 'cnpj':\r\n        // Permite apenas nmeros e pontos/hfen/barra para formatao\r\n        return value.replace(/[^\\d./-]/g, '');\r\n        \r\n      case 'cep':\r\n        // Permite apenas nmeros e hfen para formatao\r\n        return value.replace(/[^\\d-]/g, '');\r\n        \r\n      case 'rg':\r\n        // Permite nmeros, pontos, hfen e X (para RG)\r\n        return value.replace(/[^\\dXx.-]/g, '');\r\n        \r\n      case 'creditCard':\r\n        // Permite apenas nmeros, espaos e hfens\r\n        return value.replace(/[^\\d -]/g, '');\r\n        \r\n      case 'templateName':\r\n        // Permite apenas letras minsculas, nmeros e underscore\r\n        return value.replace(/[^a-z0-9_]/g, '');\r\n        \r\n      default:\r\n        return value;\r\n    }\r\n  };\r\n\r\n  // Build class names\r\n  const containerClasses = [\r\n    styles.container,\r\n    styles[`size${size.charAt(0).toUpperCase() + size.slice(1)}`],\r\n    localError ? styles.hasError : '',\r\n    disabled ? styles.disabled : '',\r\n    readOnly ? styles.readOnly : '',\r\n    icon ? styles.hasIcon : '',\r\n    leftElement ? styles.hasLeftElement : '',\r\n    rightElement ? styles.hasRightElement : '',\r\n    icon && iconPosition === 'left' ? styles.iconLeft : '',\r\n    icon && iconPosition === 'right' ? styles.iconRight : '',\r\n    isFocused ? styles.focused : '',\r\n    !fullWidth ? styles.inline : '',\r\n    isDropdown ? styles.isDropdown : '',\r\n    isDropdownOpen ? styles.dropdownOpen : '',\r\n    changedFields.includes('value') ? styles.changed : '',\r\n    className\r\n  ].filter(Boolean).join(' ');\r\n\r\n  const inputClasses = [\r\n    styles.input,\r\n    localError ? styles.inputError : '',\r\n    isDropdown ? styles.dropdownInput : '',\r\n    inputClassName\r\n  ].filter(Boolean).join(' ');\r\n\r\n  // Determine input type based on variant and settings\r\n  const getInputType = () => {\r\n    if (isDropdown) {\r\n      return 'text';\r\n    }\r\n    \r\n    // Handle password toggle\r\n    if (type === 'password') {\r\n      return showPassword ? 'text' : 'password';\r\n    }\r\n    \r\n    // Override type for specific variants\r\n    if (['phoneNumber', 'cpf', 'cnpj', 'cep', 'rg'].includes(variant)) {\r\n      return 'tel';\r\n    }\r\n    \r\n    if (variant === 'email') {\r\n      return 'email';\r\n    }\r\n    \r\n    if (variant === 'number' || variant === 'onlyNumbers') {\r\n      return 'tel'; // Use tel instead of number for better mask control\r\n    }\r\n    \r\n    if (variant === 'url') {\r\n      return 'url';\r\n    }\r\n    \r\n    return type;\r\n  };\r\n\r\n  // Render password toggle button\r\n  const renderPasswordToggle = () => {\r\n    if (type !== 'password' || isDropdown) return null;\r\n    \r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={styles.visibilityToggle}\r\n        onClick={togglePasswordVisibility}\r\n        aria-label={showPassword}\r\n        tabIndex=\"-1\"\r\n      >\r\n        {showPassword ? (\r\n          <FiEyeOff size={16} />\r\n        ) : (\r\n          <FiEye size={16} />\r\n        )}\r\n        <span>{showPassword ? \"Esconder\" : \"Mostrar\"}</span>\r\n      </button>\r\n    );\r\n  };\r\n  \r\n  // Render dropdown toggle button\r\n  const renderDropdownToggle = () => {\r\n    if (!isDropdown) return null;\r\n    \r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={styles.dropdownToggle}\r\n        onClick={handleDropdownToggle}\r\n        aria-label={isDropdownOpen ? \"Close dropdown\" : \"Open dropdown\"}\r\n        tabIndex=\"-1\"\r\n        disabled={disabled || readOnly}\r\n      >\r\n        {isDropdownOpen ? (\r\n          <FiChevronUp size={16} />\r\n        ) : (\r\n          <FiChevronDown size={16} />\r\n        )}\r\n      </button>\r\n    );\r\n  };\r\n  \r\n  // Render clear button\r\n  const renderClearButton = () => {\r\n    if (!clearable || (!localValue && selectedOptions.length === 0) || disabled || readOnly) return null;\r\n    \r\n    return (\r\n      <button\r\n        type=\"button\"\r\n        className={styles.clearButton}\r\n        onClick={handleClear}\r\n        aria-label=\"Clear input\"\r\n        tabIndex=\"-1\"\r\n      >\r\n        <FiX />\r\n      </button>\r\n    );\r\n  };\r\n\r\n  // Render dropdown options\r\n  const renderDropdownOptions = () => {\r\n    if (!isDropdown || !isDropdownOpen) return null;\r\n    \r\n    const dropdownStyles = {\r\n      maxHeight: dropdownMaxHeight,\r\n      width: dropdownWidth || '100%'\r\n    };\r\n    \r\n    const isOptionSelected = (option) => {\r\n      return selectedOptions.some(\r\n        selected => (selected[optionValueKey] || selected) === (option[optionValueKey] || option)\r\n      );\r\n    };\r\n    \r\n    return (\r\n      <div \r\n        className={styles.dropdownOptions}\r\n        style={dropdownStyles}\r\n        ref={dropdownRef}\r\n      >\r\n        {searchable && (\r\n          <div className={styles.searchContainer}>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Search...\"\r\n              value={searchValue}\r\n              onChange={handleSearchChange}\r\n              className={styles.searchInput}\r\n              autoFocus\r\n            />\r\n          </div>\r\n        )}\r\n        \r\n        {filteredOptions.length > 0 ? (\r\n          <ul className={styles.optionsList}>\r\n            {filteredOptions.map((option, index) => {\r\n              const optionLabel = option[optionLabelKey] || option;\r\n              const optionValue = option[optionValueKey] || option;\r\n              const selected = isOptionSelected(option);\r\n              \r\n              return (\r\n                <li \r\n                  key={`${optionValue}-${index}`}\r\n                  className={`${styles.option} ${selected ? styles.selectedOption : ''}`}\r\n                  onClick={() => handleOptionSelect(option)}\r\n                >\r\n                  {customOptionComponent ? (\r\n                    customOptionComponent(option, selected)\r\n                  ) : (\r\n                    <>\r\n                      {multiple && (\r\n                        <input \r\n                          type=\"checkbox\" \r\n                          checked={selected}\r\n                          onChange={() => {}}\r\n                          className={styles.optionCheckbox}\r\n                        />\r\n                      )}\r\n                      <span className={styles.optionLabel}>{optionLabel}</span>\r\n                    </>\r\n                  )}\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        ) : (\r\n          <div className={styles.noOptions}>\r\n            <p>{noOptionsMessage}</p>\r\n            {creatable && searchValue && (\r\n              <button \r\n                className={styles.createOption}\r\n                onClick={handleCreateOption}\r\n              >\r\n                Criar \"{searchValue}\"\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Render text formatting toolbar\r\n  const renderFormatting = () => {\r\n    if (isDropdown) return null;\r\n    \r\n    if (textFormatting) {\r\n      return (\r\n        <TextFormatter \r\n          onChange={handleChange}\r\n          value={localValue}\r\n          inputRef={combinedRef}\r\n          compact={textFormattingCompact}\r\n          darkMode={textFormattingDarkMode}\r\n          showHint={textFormattingShowHint}\r\n        />\r\n      );\r\n    }\r\n    return toolbar;\r\n  };\r\n\r\n  const renderBottomContent = () => {\r\n    return (\r\n      <div className={styles.bottomWrapper}>\r\n        <div className={styles.bottomContent}>\r\n        <div className={styles.hintWrapper}>\r\n            {renderHintOrError()}\r\n          </div>\r\n          {showCharCounter && maxLength && !isDropdown && (\r\n            <div className={styles.counterWrapper}>\r\n              <CharacterCounter \r\n                current={localValue ? localValue.length : 0} \r\n                max={maxLength} \r\n                className={styles.charCounter}\r\n                variant={characterCounterVariant}\r\n                showFormatting={showCounterFormatting}\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Render hint or error message using the new Hints component\r\n  const renderHintOrError = () => {\r\n    if (!hintMessage && !localError) return null;\r\n    \r\n    if (localError) {\r\n      return (\r\n        <Hints\r\n          variant=\"warning\"\r\n          message={localError}\r\n          className={hintClassName}\r\n          isAnimated={hintIsAnimated}\r\n          isDismissable={hintIsDismissable}\r\n          isImportant={hintIsImportant}\r\n          isCompact={hintIsCompact}\r\n          iconOverride={<FiAlertCircle size={hintIsCompact ? 14 : 18} />}\r\n        />\r\n      );\r\n    }\r\n    \r\n    if (hintMessage) {\r\n      return (\r\n        <Hints\r\n          variant={hintVariant}\r\n          message={hintMessage}\r\n          title={hintTitle}\r\n          list={hintList}\r\n          className={hintClassName}\r\n          isAnimated={hintIsAnimated}\r\n          isDismissable={hintIsDismissable}\r\n          isImportant={hintIsImportant}\r\n          isCompact={hintIsCompact}\r\n          socialCount={hintSocialCount}\r\n          actionText={hintActionText}\r\n          actionCallback={hintActionCallback}\r\n          onDismiss={hintOnDismiss}\r\n          iconOverride={hintVariant === 'simple' ? <FiInfo size={hintIsCompact ? 12 : 16} /> : null}\r\n        />\r\n      );\r\n    }\r\n    \r\n    return null;\r\n  };\r\n\r\n  return (\r\n    <div className={containerClasses}>\r\n      {label && (\r\n        <label htmlFor={id} className={styles.label}>\r\n          {label}\r\n          {required && <span className={styles.requiredMark}>*</span>}\r\n          {!required && showOptionalBadge && (\r\n            <span className={`${styles.optionalBadge} ${optionalBadgeClassName}`}>\r\n              {optionalText}\r\n            </span>\r\n          )}\r\n        </label>\r\n      )}\r\n      \r\n      {!isDropdown && (textFormatting || toolbar) && (\r\n        <div className={styles.toolbar}>\r\n          {renderFormatting()}\r\n        </div>\r\n      )}\r\n      \r\n      <div className={styles.inputWrapper}>\r\n        {leftElement && (\r\n          <div className={styles.leftElement}>{leftElement}</div>\r\n        )}\r\n      \r\n        {icon && iconPosition === 'left' && (\r\n          <span className={styles.icon}>{icon}</span>\r\n        )}\r\n        \r\n        {isDropdown ? (\r\n  <>\r\n    <div className={`${styles.dropdownContainer} ${isDropdownOpen ? styles.open : ''}`} onClick={handleDropdownToggle}>\r\n      <input\r\n        ref={combinedRef}\r\n        id={id}\r\n        name={name}\r\n        type=\"text\"\r\n        value={localValue}\r\n        placeholder={placeholder}\r\n        disabled={disabled}\r\n        readOnly={true}\r\n        className={inputClasses}\r\n        onFocus={handleFocus}\r\n        required={required}\r\n        {...restProps}\r\n      />\r\n      {renderDropdownOptions()}\r\n    </div>\r\n    {renderDropdownToggle()}\r\n    </>\r\n        ) : type === 'textarea' ? (\r\n          <textarea\r\n            ref={combinedRef}\r\n            id={id}\r\n            name={name}\r\n            value={localValue}\r\n            onChange={handleChange}\r\n            onBlur={handleBlur}\r\n            onFocus={handleFocus}\r\n            placeholder={placeholder}\r\n            disabled={disabled}\r\n            readOnly={readOnly}\r\n            maxLength={maxLength}\r\n            minLength={minLength}\r\n            className={`${styles.textarea} ${inputClasses}`}\r\n            required={required}\r\n            rows={restProps.rows || 3}\r\n            {...restProps}\r\n          />\r\n        ) : (\r\n          <input\r\n            ref={combinedRef}\r\n            id={id}\r\n            name={name}\r\n            type={getInputType()}\r\n            value={localValue}\r\n            onChange={handleChange}\r\n            onBlur={handleBlur}\r\n            onFocus={handleFocus}\r\n            placeholder={placeholder}\r\n            disabled={disabled}\r\n            readOnly={readOnly}\r\n            maxLength={maxLength}\r\n            minLength={minLength}\r\n            className={inputClasses}\r\n            required={required}\r\n            {...restProps}\r\n          />\r\n        )}\r\n        \r\n        {type === 'password' && renderPasswordToggle()}\r\n        {clearable && renderClearButton()}\r\n        \r\n        {icon && iconPosition === 'right' && (\r\n          <span className={styles.icon}>{icon}</span>\r\n        )}\r\n        \r\n        {rightElement && (\r\n          <div className={styles.rightElement}>{rightElement}</div>\r\n        )}\r\n      </div>\r\n  \r\n  {renderBottomContent()}\r\n</div>\r\n  );\r\n});\r\n\r\nInput.displayName = 'Input';\r\n\r\nInput.propTypes = {\r\n  // Base props (identity and core functionality)\r\n  id: PropTypes.string,\r\n  name: PropTypes.string,\r\n  type: PropTypes.oneOf(['text', 'email', 'password', 'tel', 'number', 'url', 'textarea', 'date', 'time', 'search']),\r\n  label: PropTypes.string,\r\n  placeholder: PropTypes.string,\r\n  value: PropTypes.oneOfType([\r\n    PropTypes.string,\r\n    PropTypes.array, // For multiple dropdown\r\n    PropTypes.number,\r\n    PropTypes.bool\r\n  ]),\r\n  onChange: PropTypes.func,\r\n  onBlur: PropTypes.func,\r\n  error: PropTypes.string,\r\n  \r\n  // Enhanced Hints specific props\r\n  hintMessage: PropTypes.string,\r\n  hintVariant: PropTypes.oneOf(['simple', 'info', 'warning', 'success', 'whatsapp', 'detailed']),\r\n  hintTitle: PropTypes.string,\r\n  hintList: PropTypes.arrayOf(PropTypes.string),\r\n  hintIsDismissable: PropTypes.bool,\r\n  hintIsAnimated: PropTypes.bool,\r\n  hintIsImportant: PropTypes.bool,\r\n  hintIsCompact: PropTypes.bool,\r\n  hintSocialCount: PropTypes.number,\r\n  hintActionText: PropTypes.string,\r\n  hintActionCallback: PropTypes.func,\r\n  hintOnDismiss: PropTypes.func,\r\n  hintClassName: PropTypes.string,\r\n  \r\n  // Display configuration\r\n  size: PropTypes.oneOf(['small', 'medium', 'large']),\r\n  fullWidth: PropTypes.bool,\r\n  required: PropTypes.bool,\r\n  disabled: PropTypes.bool,\r\n  readOnly: PropTypes.bool,\r\n  className: PropTypes.string,\r\n  inputClassName: PropTypes.string,\r\n  clearable: PropTypes.bool,\r\n  \r\n  // Decoration elements\r\n  icon: PropTypes.node,\r\n  iconPosition: PropTypes.oneOf(['left', 'right']),\r\n  rightElement: PropTypes.node,\r\n  leftElement: PropTypes.node,\r\n  toolbar: PropTypes.node,\r\n  \r\n  // Validation and formatting\r\n  maxLength: PropTypes.number,\r\n  minLength: PropTypes.number,\r\n  regexPattern: PropTypes.instanceOf(RegExp),\r\n  regexErrorMessage: PropTypes.string,\r\n  variant: PropTypes.oneOf([\r\n    'default', 'phoneNumber', 'cpf', 'cnpj', 'cep', 'rg', 'name', \r\n    'email', 'url', 'onlyNumbers', 'onlyLetters', 'alphanumeric', \r\n    'creditCard', 'date', 'uppercase', 'lowercase', 'capitalize', 'sentence', 'templateName'\r\n  ]),\r\n  mask: PropTypes.string,\r\n  allowFormatting: PropTypes.bool,\r\n  formatOnBlur: PropTypes.bool,\r\n  validateOnChange: PropTypes.bool,\r\n  validateOnBlur: PropTypes.bool,\r\n  \r\n  // Character counter\r\n  showCharCounter: PropTypes.bool,\r\n  showCounterFormatting: PropTypes.bool,\r\n  characterCounterVariant: PropTypes.oneOf(['default', 'compact', 'minimal']),\r\n  \r\n  // Text formatter\r\n  textFormatting: PropTypes.bool,\r\n  textFormattingCompact: PropTypes.bool,\r\n  textFormattingDarkMode: PropTypes.bool,\r\n  textFormattingShowHint: PropTypes.bool,\r\n  \r\n  // Dropdown functionality\r\n  isDropdown: PropTypes.bool,\r\n  options: PropTypes.array,\r\n  optionLabelKey: PropTypes.string,\r\n  optionValueKey: PropTypes.string,\r\n  multiple: PropTypes.bool,\r\n  searchable: PropTypes.bool,\r\n  creatable: PropTypes.bool,\r\n  noOptionsMessage: PropTypes.string,\r\n  onOptionCreate: PropTypes.func,\r\n  customOptionComponent: PropTypes.func,\r\n  dropdownWidth: PropTypes.string,\r\n  dropdownMaxHeight: PropTypes.string,\r\n  closeOnSelect: PropTypes.bool,\r\n\r\n  // Optional badge props\r\n  showOptionalBadge: PropTypes.bool,\r\n  optionalText: PropTypes.string,\r\n  optionalBadgeClassName: PropTypes.string,\r\n};\r\n\r\nexport default Input;","// extracted by mini-css-extract-plugin\nexport default {\"cardContainer\":\"CardUploadInput_cardContainer__rn1bp\",\"evenCard\":\"CardUploadInput_evenCard__9h+BG\",\"oddCard\":\"CardUploadInput_oddCard__QdSaI\",\"hasContent\":\"CardUploadInput_hasContent__LintI\",\"cardHeader\":\"CardUploadInput_cardHeader__-xtHK\",\"cardNumberWrapper\":\"CardUploadInput_cardNumberWrapper__YDOQ8\",\"cardNumber\":\"CardUploadInput_cardNumber__Zh2K9\",\"fileNameDisplay\":\"CardUploadInput_fileNameDisplay__fYk0n\",\"progressIndicator\":\"CardUploadInput_progressIndicator__eFArm\",\"active\":\"CardUploadInput_active__ReKmG\",\"progressBar\":\"CardUploadInput_progressBar__0zfDE\",\"shimmer\":\"CardUploadInput_shimmer__w4bvR\",\"fileTypeSelect\":\"CardUploadInput_fileTypeSelect__pJT-z\",\"select\":\"CardUploadInput_select__8d1Kt\",\"fileTypeIconWrapper\":\"CardUploadInput_fileTypeIconWrapper__ggDTy\",\"fileTypeInfo\":\"CardUploadInput_fileTypeInfo__kl7Sm\",\"typeIcon\":\"CardUploadInput_typeIcon__QZBJB\",\"cardBody\":\"CardUploadInput_cardBody__KUtxR\",\"uploadMethods\":\"CardUploadInput_uploadMethods__1Fzni\",\"methodButton\":\"CardUploadInput_methodButton__16X2+\",\"activeMethod\":\"CardUploadInput_activeMethod__ufI9K\",\"formGroup\":\"CardUploadInput_formGroup__wa3XN\",\"uploadHeader\":\"CardUploadInput_uploadHeader__8R1u9\",\"label\":\"CardUploadInput_label__d1Kds\",\"urlActions\":\"CardUploadInput_urlActions__foG6o\",\"testUrlButton\":\"CardUploadInput_testUrlButton__S-opu\",\"dropArea\":\"CardUploadInput_dropArea__KDe94\",\"dragging\":\"CardUploadInput_dragging__2zwfa\",\"activeDrop\":\"CardUploadInput_activeDrop__c4qGa\",\"pulseArea\":\"CardUploadInput_pulseArea__xT9cK\",\"uploading\":\"CardUploadInput_uploading__pp6BJ\",\"uploadingSpinner\":\"CardUploadInput_uploadingSpinner__U-osR\",\"spin\":\"CardUploadInput_spin__1+D7z\",\"uploadSuccess\":\"CardUploadInput_uploadSuccess__9U9Q+\",\"successPulse\":\"CardUploadInput_successPulse__dAMV9\",\"uploadError\":\"CardUploadInput_uploadError__GZ6I+\",\"errorPulse\":\"CardUploadInput_errorPulse__p65Cr\",\"uploadIcon\":\"CardUploadInput_uploadIcon__8bB6R\",\"dropText\":\"CardUploadInput_dropText__T2ZY1\",\"dropHint\":\"CardUploadInput_dropHint__e70Lk\",\"dropHintEnhanced\":\"CardUploadInput_dropHintEnhanced__nygPl\",\"formatBadges\":\"CardUploadInput_formatBadges__Bxt39\",\"formatBadge\":\"CardUploadInput_formatBadge__VVglQ\",\"sizeLimit\":\"CardUploadInput_sizeLimit__68O2j\",\"errorMessageContainer\":\"CardUploadInput_errorMessageContainer__82awP\",\"errorMessage\":\"CardUploadInput_errorMessage__tr00F\",\"slideIn\":\"CardUploadInput_slideIn__JR646\",\"previewContent\":\"CardUploadInput_previewContent__byj2x\",\"loading\":\"CardUploadInput_loading__KKQBR\",\"error\":\"CardUploadInput_error__UPeQx\",\"previewLoader\":\"CardUploadInput_previewLoader__5fX3F\",\"spinner\":\"CardUploadInput_spinner__XWzgY\",\"previewErrorMessage\":\"CardUploadInput_previewErrorMessage__GU5iu\",\"hidden\":\"CardUploadInput_hidden__ALJzB\",\"removeMediaButton\":\"CardUploadInput_removeMediaButton__roF2K\",\"previewImage\":\"CardUploadInput_previewImage__UkhfZ\",\"previewVideo\":\"CardUploadInput_previewVideo__7-4II\",\"videoWrapper\":\"CardUploadInput_videoWrapper__rMJcj\",\"videoOverlay\":\"CardUploadInput_videoOverlay__FBXcY\",\"videoFormatInfo\":\"CardUploadInput_videoFormatInfo__dBYLU\",\"previewActions\":\"CardUploadInput_previewActions__ieD3o\",\"previewActionGroup\":\"CardUploadInput_previewActionGroup__J1fK4\",\"clearingAnimation\":\"CardUploadInput_clearingAnimation__YrbWi\",\"clearAway\":\"CardUploadInput_clearAway__qJcRT\",\"mediaDetailsFooter\":\"CardUploadInput_mediaDetailsFooter__tDkcG\",\"uploadDetails\":\"CardUploadInput_uploadDetails__UFkuj\",\"uploadTimestamp\":\"CardUploadInput_uploadTimestamp__Ebm3S\",\"previewHeader\":\"CardUploadInput_previewHeader__J53zR\",\"previewControls\":\"CardUploadInput_previewControls__6EEmH\",\"loadSuccess\":\"CardUploadInput_loadSuccess__GE7TP\",\"pulseSuccess\":\"CardUploadInput_pulseSuccess__LFyb0\",\"pulse\":\"CardUploadInput_pulse__DBBzw\",\"successFade\":\"CardUploadInput_successFade__YtmL7\",\"fadeIn\":\"CardUploadInput_fadeIn__2vd9B\"};","// React e Hooks\r\nimport React, { useState, useRef, useEffect, useCallback } from 'react';\r\n\r\n// Hooks personalizados\r\nimport { useFileUpload } from '../../hooks/useFileUpload';\r\nimport { useAlert } from '../ui/AlertMessage/AlertContext';\r\n\r\n// Componentes\r\nimport Button from '../ui/Button/Button';\r\nimport Input from '../ui/Input/Input';\r\n\r\n// cones\r\nimport { \r\n  FiImage, FiVideo, FiUploadCloud, FiLink, \r\n  FiCheck, FiAlertCircle, FiX, FiExternalLink,\r\n  FiTrendingUp, FiCopy, FiInfo, FiEye, \r\n  FiRefreshCw, FiTrash2, FiEdit3 \r\n} from 'react-icons/fi';\r\n\r\n// Estilos\r\nimport styles from './CardUploadInput.module.css';\r\n\r\n/**\r\n * Componente aprimorado para upload ou seleo de URL para cada carto do carrossel\r\n * Design refinado e UX simplificada com foco na experincia do usurio\r\n * Corrigido para lidar corretamente com URLs e uploads de arquivo\r\n * \r\n * @param {Object} props Propriedades do componente\r\n * @param {number} props.index ndice do carto\r\n * @param {Object} props.card Dados do carto\r\n * @param {Function} props.updateCard Funo para atualizar dados do carto\r\n * @param {number} props.totalCards Total de cartes\r\n * @returns {JSX.Element} Componente CardUploadInput\r\n */\r\nconst CardUploadInput = ({ index, card, updateCard, totalCards }) => {\r\n  // Inicializar sistema de alertas\r\n  const alert = useAlert();\r\n  \r\n  // Estado local\r\n  const [uploadMethod, setUploadMethod] = useState(card.fileUrl ? 'url' : 'file');\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [previewUrl, setPreviewUrl] = useState(card.fileUrl || '');\r\n  const [urlValidationError, setUrlValidationError] = useState('');\r\n  const [loadingPreview, setLoadingPreview] = useState(false);\r\n  const [previewError, setPreviewError] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  const [forceRender, setForceRender] = useState(0);\r\n\r\n  // Refs\r\n  const fileInputRef = useRef(null);\r\n  const dropAreaRef = useRef(null);\r\n  const previewImgRef = useRef(null);\r\n  const urlInputRef = useRef(null);\r\n  \r\n  // Hook customizado para upload de arquivos\r\n  const { \r\n    uploadToAzure, \r\n    isUploading, \r\n    uploadError, \r\n    uploadedFile, \r\n    resetUpload \r\n  } = useFileUpload();\r\n\r\n  // Atualiza preview quando a URL do carto muda\r\n  useEffect(() => {\r\n    // S iniciar carregamento se houver uma URL vlida\r\n    if (card.fileUrl) {\r\n      // Resetar estados de erro\r\n      setUrlValidationError('');\r\n      setPreviewError(false);\r\n      \r\n      // Iniciar carregamento apenas se o preview ainda no estiver visvel\r\n      if (!previewUrl || previewUrl !== card.fileUrl) {\r\n        setLoadingPreview(true);\r\n        setPreviewUrl(card.fileUrl);\r\n      }\r\n      \r\n      // Para tipo URL, verificar pr-carregamento fora do DOM\r\n      if (card.fileType === 'image') {\r\n        // Criar um objeto de imagem para pr-carregar\r\n        const preloadImg = new Image();\r\n        \r\n        // Definir handlers antes de definir src\r\n        preloadImg.onload = () => {\r\n          // S atualizar estado se o componente ainda estiver montado e a URL no mudou\r\n          setLoadingPreview(false);\r\n          setPreviewError(false);\r\n        };\r\n        \r\n        preloadImg.onerror = () => {\r\n          // S atualizar estado se o componente ainda estiver montado e a URL no mudou\r\n          setLoadingPreview(false);\r\n          setPreviewError(true);\r\n          console.error(`Erro ao carregar imagem para Card ${index + 1}: ${card.fileUrl}`);\r\n          \r\n          // Feedback visual sobre o erro\r\n          alert.warning(`No foi possvel carregar a imagem do Card ${index + 1}. Verifique se a URL est correta.`, {\r\n            position: 'bottom-right',\r\n            autoCloseTime: 4000\r\n          });\r\n        };\r\n        \r\n        // Iniciar carregamento\r\n        preloadImg.src = card.fileUrl;\r\n      }\r\n      // Vdeos sero tratados pelos eventos onLoadedData/onError no componente de vdeo\r\n    } else {\r\n      // Se no h URL, limpar o preview\r\n      setPreviewUrl('');\r\n      setLoadingPreview(false);\r\n      setPreviewError(false);\r\n    }\r\n  }, [card.fileUrl, card.fileType, index, alert]);\r\n\r\n  // Monitora drag & drop para melhorar UX\r\n  useEffect(() => {\r\n    const handleGlobalDragEnter = (e) => {\r\n      // Se o usurio est arrastando arquivos e o mtodo atual no  'file'\r\n      if (e.dataTransfer.types.includes('Files') && uploadMethod !== 'file') {\r\n        // Mude automaticamente para o mtodo de arquivo\r\n        setUploadMethod('file');\r\n        // Mostre um toast informativo\r\n        alert.info(`Modo de upload de arquivo ativado para o Card ${index + 1}`, {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 2000\r\n        });\r\n      }\r\n    };\r\n    \r\n    document.addEventListener('dragenter', handleGlobalDragEnter);\r\n    \r\n    return () => {\r\n      document.removeEventListener('dragenter', handleGlobalDragEnter);\r\n    };\r\n  }, [uploadMethod, index, alert]);\r\n\r\n  // Manipuladores de arrastar e soltar aprimorados\r\n  const handleDragEnter = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(true);\r\n    \r\n    // Feedback visual na rea de drop\r\n    if (dropAreaRef.current) {\r\n      dropAreaRef.current.classList.add(styles.activeDrop);\r\n    }\r\n  }, []);\r\n\r\n  const handleDragLeave = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n    \r\n    // Remover feedback visual\r\n    if (dropAreaRef.current) {\r\n      dropAreaRef.current.classList.remove(styles.activeDrop);\r\n    }\r\n  }, []);\r\n\r\n  const handleDragOver = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    if (!isDragging) {\r\n      setIsDragging(true);\r\n    }\r\n  }, [isDragging]);\r\n\r\n  const handleDrop = useCallback((e) => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    setIsDragging(false);\r\n    \r\n    // Remover feedback visual\r\n    if (dropAreaRef.current) {\r\n      dropAreaRef.current.classList.remove(styles.activeDrop);\r\n    }\r\n    \r\n    if (e.dataTransfer.files && e.dataTransfer.files.length > 0) {\r\n      handleFileUpload({ target: { files: e.dataTransfer.files } });\r\n    }\r\n  }, []);\r\n\r\n  // Validao de tipo de arquivo\r\n  const validateFileType = useCallback((file) => {\r\n    const acceptedImageTypes = ['image/jpeg', 'image/png', 'image/gif', 'image/webp'];\r\n    const acceptedVideoTypes = ['video/mp4', 'video/webm'];\r\n    \r\n    const isAcceptedType = [...acceptedImageTypes, ...acceptedVideoTypes].includes(file.type);\r\n    \r\n    if (!isAcceptedType) {\r\n      alert.error(`Tipo de arquivo no suportado: ${file.type}. Use JPEG, PNG, GIF, WebP, MP4 ou WebM.`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 5000\r\n      });\r\n      return false;\r\n    }\r\n    \r\n    // Verificar tamanho (limite de 10MB para imagens, 30MB para vdeos)\r\n    const isImage = acceptedImageTypes.includes(file.type);\r\n    const maxSize = isImage ? 10 * 1024 * 1024 : 30 * 1024 * 1024;\r\n    \r\n    if (file.size > maxSize) {\r\n      const sizeInMB = (file.size / (1024 * 1024)).toFixed(2);\r\n      const limit = isImage ? '10MB' : '30MB';\r\n      alert.error(`Arquivo muito grande: ${sizeInMB}MB. O limite para ${isImage ? 'imagens' : 'vdeos'}  ${limit}.`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 5000\r\n      });\r\n      return false;\r\n    }\r\n    \r\n    return true;\r\n  }, [alert]);\r\n\r\n  // Manipulador de upload de arquivo com feedback visual e controle de progresso\r\n  const handleFileUpload = useCallback(async (event) => {\r\n    const file = event.target.files[0];\r\n    if (!file) return;\r\n    \r\n    // Validar o tipo de arquivo antes de iniciar upload\r\n    if (!validateFileType(file)) {\r\n      // Limpar input de arquivo\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      // Determina o tipo de arquivo (imagem ou vdeo)\r\n      const fileType = file.type.startsWith('image/') ? 'image' : 'video';\r\n      updateCard(index, 'fileType', fileType);\r\n      \r\n      // Cria preview local temporrio\r\n      const tempUrl = URL.createObjectURL(file);\r\n      setPreviewUrl(tempUrl);\r\n      setLoadingPreview(true);\r\n      setPreviewError(false);\r\n      \r\n      // Funo para atualizar o progresso\r\n      const updateProgress = (progress) => {\r\n        setUploadProgress(progress);\r\n      };\r\n      \r\n      // Mostrar feedback visual de carregamento\r\n      dropAreaRef.current?.classList.add(styles.uploading);\r\n      \r\n      // Mostrar alerta de progresso\r\n      const progressToastId = `upload-progress-${index}-${Date.now()}`;\r\n      setTimeout(() => {\r\n        alert.info(`Enviando ${fileType === 'image' ? 'imagem' : 'vdeo'} para o Card ${index + 1}...`, {\r\n          id: progressToastId,\r\n          position: 'bottom-right',\r\n          autoCloseTime: false,\r\n          progress: 0\r\n        });\r\n      }, 0);\r\n      \r\n      // Upload do arquivo\r\n      const uploadResult = await uploadToAzure(file, updateProgress);\r\n    \r\n      if (!uploadResult || !uploadResult.url) {\r\n        throw new Error(\"Upload falhou: nenhuma URL retornada.\");\r\n      }\r\n    \r\n      console.log(\"Upload concludo!\", uploadResult);\r\n    \r\n      // Formatar filename mais amigvel para exibio\r\n      const displayName = file.name.length > 20 \r\n        ? file.name.substring(0, 18) + '...' + file.name.slice(-8)\r\n        : file.name;\r\n      \r\n      // Atualiza o card com URL e metadados - URL manipulada da mesma forma para uploads e URLs\r\n      updateCard(index, 'fileUrl', uploadResult.url);\r\n      updateCard(index, 'fileType', fileType);\r\n      updateCard(index, 'fileName', displayName);\r\n      updateCard(index, 'fileSize', file.size);\r\n      updateCard(index, 'uploadDate', new Date().toISOString());\r\n      updateCard(index, 'hasFile', true);\r\n      updateCard(index, 'uploadMethod', 'file'); // Marcar como upload de arquivo\r\n      \r\n      // CORREO: Adicionar pequeno atraso para garantir que o estado seja atualizado\r\n      setTimeout(() => {\r\n        // Garantir que a URL seja tratada como uma URL externa normal aps o upload\r\n        // Isso garante que o tratamento seja consistente entre URLs de upload e manuais\r\n        setPreviewUrl(''); // Limpar primeiro\r\n        setTimeout(() => {\r\n          setPreviewUrl(uploadResult.url); // Definir novamente para forar re-renderizao\r\n          setLoadingPreview(false); // Importante: definir como falso aps URL ser aplicada\r\n          setPreviewError(false);\r\n        }, 50);\r\n      }, 100);\r\n      \r\n      // Alerta de sucesso com animao\r\n      alert.success(`Arquivo \"${displayName}\" configurado para o Card ${index + 1}!`, {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 3000\r\n      });\r\n      \r\n      // Adicionar classe para animao de sucesso\r\n      dropAreaRef.current?.classList.add(styles.uploadSuccess);\r\n      setTimeout(() => {\r\n        dropAreaRef.current?.classList.remove(styles.uploadSuccess);\r\n      }, 1000);\r\n      \r\n      // Salvar o rascunho aps o upload\r\n      if (typeof window.saveCurrentDraft === 'function') {\r\n        window.saveCurrentDraft();\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro no processamento do arquivo:', error);\r\n      \r\n      // Adicionar classe para animao de erro\r\n      dropAreaRef.current?.classList.add(styles.uploadError);\r\n      setTimeout(() => {\r\n        dropAreaRef.current?.classList.remove(styles.uploadError);\r\n      }, 1000);\r\n      \r\n      alert.error(`Erro no upload: ${error.message || 'Erro desconhecido'}`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 5000\r\n      });\r\n      \r\n      setPreviewError(true);\r\n    } finally {\r\n      // Limpa input de arquivo\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      \r\n      // CORREO: No desativa o loading aqui, ser tratado aps o timeout\r\n      // para garantir que a imagem aparea\r\n      \r\n      // Remover classe de upload\r\n      dropAreaRef.current?.classList.remove(styles.uploading);\r\n      setUploadProgress(0);\r\n    }\r\n  }, [index, updateCard, uploadToAzure, alert, validateFileType]);\r\n\r\n  // Abre seletor de arquivos\r\n  const handleFileInputClick = useCallback(() => {\r\n    resetUpload();\r\n    fileInputRef.current?.click();\r\n  }, [resetUpload]);\r\n\r\n  // Validao de URL aprimorada com deteco de tipo\r\n  const validateUrl = useCallback((url) => {\r\n    if (!url) {\r\n      setUrlValidationError('URL  obrigatria');\r\n      return false;\r\n    }\r\n    \r\n    try {\r\n      new URL(url);\r\n      \r\n      // Validar se a URL termina com uma extenso de imagem/vdeo conhecida\r\n      const fileExtension = url.split('.').pop().toLowerCase();\r\n      const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg'];\r\n      const videoExtensions = ['mp4', 'webm', 'ogg', 'mov'];\r\n      \r\n      const isImage = imageExtensions.includes(fileExtension);\r\n      const isVideo = videoExtensions.includes(fileExtension);\r\n      \r\n      // Se conseguirmos detectar o tipo, atualizar automaticamente\r\n      if (isImage) {\r\n        updateCard(index, 'fileType', 'image');\r\n      } else if (isVideo) {\r\n        updateCard(index, 'fileType', 'video');\r\n      }\r\n      \r\n      setUrlValidationError('');\r\n      return true;\r\n    } catch (e) {\r\n      setUrlValidationError('URL invlida. Inclua \"https://\" ou \"http://\"');\r\n      return false;\r\n    }\r\n  }, [index, updateCard]);\r\n\r\n  // Manipulador de mudana de URL - CORRIGIDO para no enviar URLs para o Azure\r\n  const handleUrlChange = useCallback((e) => {\r\n    const url = e.target.value.trim();\r\n    \r\n    if (!url) {\r\n      updateCard(index, 'fileUrl', '');\r\n      updateCard(index, 'hasFile', false);\r\n      setUrlValidationError('');\r\n      setPreviewUrl('');\r\n      return;\r\n    }\r\n    \r\n    // Validar a URL antes de aplicar\r\n    if (validateUrl(url)) {\r\n      // Mostrar feedback de carregamento\r\n      setLoadingPreview(true);\r\n      setPreviewError(false);\r\n      \r\n      // Atualizar card com a URL diretamente (sem enviar para Azure)\r\n      updateCard(index, 'fileUrl', url);\r\n      updateCard(index, 'uploadMethod', 'url'); // Marcar como URL externa\r\n      updateCard(index, 'hasFile', true);\r\n      \r\n      // Definir data/hora de \"upload\" (na verdade, quando a URL foi adicionada)\r\n      updateCard(index, 'uploadDate', new Date().toISOString());\r\n      \r\n      // Para URLs, no temos tamanho do arquivo, mas podemos definir um nome descritivo\r\n      const urlParts = url.split('/');\r\n      const fileName = urlParts[urlParts.length - 1];\r\n      updateCard(index, 'fileName', fileName || `url-${index + 1}`);\r\n      \r\n      // Atualizar preview\r\n      setPreviewUrl(url);\r\n      \r\n      // Mostrar alerta de sucesso\r\n      alert.success(`URL configurada para o Card ${index + 1}!`, {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 3000\r\n      });\r\n      \r\n      // Salvar o rascunho aps a alterao\r\n      if (typeof window.saveCurrentDraft === 'function') {\r\n        window.saveCurrentDraft();\r\n      }\r\n    }\r\n  }, [index, updateCard, validateUrl, alert]);\r\n\r\n  // Aplicar URL quando o usurio pressionar Enter\r\n  const handleUrlKeyDown = useCallback((e) => {\r\n    if (e.key === 'Enter') {\r\n      handleUrlChange(e);\r\n    }\r\n  }, [handleUrlChange]);\r\n\r\n  // Usa URL de teste\r\n  const handleTestUrlClick = useCallback(() => {\r\n    // Mostra alerta de carregamento\r\n    const loadingToastId = `loading-test-url-${index}`;\r\n    alert.info(`Carregando URL de teste para o Card ${index + 1}...`, {\r\n      id: loadingToastId,\r\n      position: 'bottom-right',\r\n      autoCloseTime: false,\r\n    });\r\n    \r\n    // Array com URLs de teste\r\n    const testUrls = [\r\n      \"https://images.sympla.com.br/64999ce2a7792.png\"\r\n    ];\r\n    \r\n    // Seleciona uma URL baseada no ndice do card (para consistncia)\r\n    const newUrl = testUrls[index % testUrls.length];\r\n    \r\n    // Simular um pequeno atraso para uma experincia mais realista\r\n    setTimeout(() => {\r\n      updateCard(index, 'fileUrl', newUrl);\r\n      updateCard(index, 'fileType', 'image');\r\n      updateCard(index, 'fileName', `imagem-teste-${index + 1}.png`);\r\n      updateCard(index, 'uploadMethod', 'url'); // Marcar como URL\r\n      updateCard(index, 'fileSize', 124500);\r\n      updateCard(index, 'uploadDate', new Date().toISOString());\r\n      updateCard(index, 'hasFile', true);\r\n      \r\n      setUploadMethod('url'); // Mudar para mtodo URL\r\n      validateUrl(newUrl);\r\n      setPreviewUrl(newUrl);\r\n      \r\n      // Mostrar alerta de sucesso\r\n      setTimeout(() => {\r\n        alert.success(`URL de teste aplicada ao Card ${index + 1}`, {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 3000\r\n        });\r\n      }, 0);\r\n      \r\n      // Salvar o rascunho aps a alterao\r\n      if (typeof window.saveCurrentDraft === 'function') {\r\n        window.saveCurrentDraft();\r\n      }\r\n    }, 800); // Pequeno atraso para feedback visual\r\n  }, [index, updateCard, validateUrl, alert]);\r\n\r\n  // Limpa arquivo/URL com confirmao simplificada\r\n  const handleClearFile = useCallback(() => {\r\n    // Sem verificao de bloqueio, conforme solicitado\r\n    if (card.fileUrl && !window.confirm(`Tem certeza que deseja remover o arquivo do Card ${index + 1}?`)) {\r\n      return;\r\n    }\r\n    \r\n    // Animao de limpeza\r\n    const previewSection = document.querySelector(`#preview-section-${index}`);\r\n    if (previewSection) {\r\n      previewSection.classList.add(styles.clearingAnimation);\r\n    }\r\n    \r\n    // Pequeno atraso para a animao ser visvel\r\n    setTimeout(() => {\r\n      // Limpar a URL e arquivo\r\n      updateCard(index, 'fileUrl', '');\r\n      updateCard(index, 'fileName', '');\r\n      updateCard(index, 'fileSize', null);\r\n      updateCard(index, 'hasFile', false);\r\n      updateCard(index, 'uploadMethod', ''); // Limpar mtodo de upload\r\n      \r\n      // Limpar o preview\r\n      setPreviewUrl('');\r\n      \r\n      // Resetar o input de arquivo\r\n      if (fileInputRef.current) {\r\n        fileInputRef.current.value = '';\r\n      }\r\n      \r\n      // Resetar o input de URL\r\n      if (urlInputRef.current) {\r\n        urlInputRef.current.value = '';\r\n      }\r\n      \r\n      // Resetar quaisquer erros\r\n      setUrlValidationError('');\r\n      setPreviewError(false);\r\n      resetUpload && resetUpload();\r\n      \r\n      // Mostrar alerta de informao\r\n      setTimeout(() => {\r\n        alert.info(`Card ${index + 1} foi limpo`, {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 3000\r\n        });\r\n      }, 0);\r\n      \r\n      // Salvar o rascunho aps a alterao\r\n      if (typeof window.saveCurrentDraft === 'function') {\r\n        window.saveCurrentDraft();\r\n      }\r\n      \r\n      // Remover classe de animao\r\n      if (previewSection) {\r\n        previewSection.classList.remove(styles.clearingAnimation);\r\n      }\r\n    }, 300);\r\n  }, [index, updateCard, resetUpload, card.fileUrl, alert]);\r\n\r\n  // Muda tipo de arquivo com feedback visual\r\n  const handleFileTypeChange = useCallback((e) => {\r\n    const newType = e.target.value;\r\n    \r\n    // Verificar se o tipo  compatvel com a extenso do arquivo se tivermos fileName\r\n    if (card.fileName) {\r\n      const extension = card.fileName.split('.').pop().toLowerCase();\r\n      const imageExtensions = ['jpg', 'jpeg', 'png', 'gif', 'webp', 'svg'];\r\n      const videoExtensions = ['mp4', 'webm', 'ogg', 'mov'];\r\n      \r\n      if (newType === 'image' && videoExtensions.includes(extension)) {\r\n        alert.warning(`A extenso .${extension} geralmente  um formato de vdeo.`, {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 4000\r\n        });\r\n      } else if (newType === 'video' && imageExtensions.includes(extension)) {\r\n        alert.warning(`A extenso .${extension} geralmente  um formato de imagem.`, {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 4000\r\n        });\r\n      }\r\n    }\r\n    \r\n    updateCard(index, 'fileType', newType);\r\n    \r\n    // Feedback visual sobre a alterao\r\n    setTimeout(() => {\r\n      alert.info(`Tipo de arquivo alterado para ${newType === 'image' ? 'imagem' : 'vdeo'} no Card ${index + 1}`, {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 2000\r\n      });\r\n    }, 0);\r\n  }, [index, updateCard, alert, card.fileName]);\r\n\r\n  // Verificar URL para melhorar feedback ao usurio\r\n  const checkUrl = useCallback(() => {\r\n    if (!card.fileUrl) return;\r\n    \r\n    // Mostrar alerta de verificao\r\n    const checkingToastId = `checking-url-${index}`;\r\n    alert.info(`Verificando URL para o Card ${index + 1}...`, {\r\n      id: checkingToastId,\r\n      position: 'bottom-right',\r\n      autoCloseTime: false\r\n    });\r\n    \r\n    // Criar um objeto Image para verificar se a URL carrega\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      // URL funciona para imagem\r\n      alert.success(`URL verificada com sucesso para o Card ${index + 1}!`, {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 3000\r\n      });\r\n      setPreviewError(false);\r\n    };\r\n    \r\n    img.onerror = () => {\r\n      // Falha ao carregar imagem, verificar se  vdeo\r\n      const video = document.createElement('video');\r\n      \r\n      video.onloadeddata = () => {\r\n        // URL funciona para vdeo\r\n        alert.success(`URL de vdeo verificada com sucesso para o Card ${index + 1}!`, {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 3000\r\n        });\r\n        setPreviewError(false);\r\n        \r\n        // Atualizar o tipo para vdeo se o usurio tinha selecionado imagem\r\n        if (card.fileType !== 'video') {\r\n          updateCard(index, 'fileType', 'video');\r\n          alert.info(`Tipo de arquivo atualizado para vdeo no Card ${index + 1}`, {\r\n            position: 'bottom-right',\r\n            autoCloseTime: 3000\r\n          });\r\n        }\r\n      };\r\n      \r\n      video.onerror = () => {\r\n        // URL no funciona para imagem nem vdeo\r\n        alert.error(`A URL fornecida no Card ${index + 1} no parece ser vlida. Verifique se o endereo est correto.`, {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 5000\r\n        });\r\n        setPreviewError(true);\r\n      };\r\n      \r\n      video.src = card.fileUrl;\r\n    };\r\n    \r\n    img.src = card.fileUrl;\r\n  }, [card.fileUrl, card.fileType, index, alert, updateCard]);\r\n\r\n  const videoRef = useRef(null);\r\n\r\nconst handleVideoLoad = useCallback(() => {\r\n  setLoadingPreview(false);\r\n  setPreviewError(false);\r\n  \r\n  // Adicionar classe de sucesso temporria para feedback visual\r\n  const videoElement = videoRef.current;\r\n  if (videoElement) {\r\n    videoElement.classList.add(styles.loadSuccess);\r\n    setTimeout(() => {\r\n      if (videoElement) {\r\n        videoElement.classList.remove(styles.loadSuccess);\r\n      }\r\n    }, 500);\r\n  }\r\n  \r\n  // Log para depurao\r\n  console.log(`Vdeo carregado com sucesso para o Card ${index + 1}`);\r\n}, [index]);\r\n\r\n  // Obtm cone do tipo de arquivo\r\n  const getFileTypeIcon = useCallback(() => {\r\n    return card.fileType === 'image' ? \r\n      <FiImage size={20} className={styles.typeIcon} /> : \r\n      <FiVideo size={20} className={styles.typeIcon} />;\r\n  }, [card.fileType]);\r\n\r\n  // Atualizao do status da imagem de preview\r\n  const handlePreviewLoad = useCallback(() => {\r\n    console.log(`Imagem/vdeo carregado com sucesso para Card ${index + 1}`);\r\n    \r\n    // CORREO: Definir estados de carregamento independentemente do mtodo\r\n    setLoadingPreview(false);\r\n    setPreviewError(false);\r\n    \r\n    // Adicionar feedback visual de sucesso\r\n    const element = card.fileType === 'image' ? previewImgRef.current : videoRef.current;\r\n    if (element) {\r\n      element.classList.add(styles.loadSuccess);\r\n      setTimeout(() => {\r\n        if (element) {\r\n          element.classList.remove(styles.loadSuccess);\r\n        }\r\n      }, 500);\r\n    }\r\n  }, [index, card.fileType]);\r\n\r\n  const handlePreviewError = useCallback(() => {\r\n    setLoadingPreview(false);\r\n    setPreviewError(true);\r\n    \r\n    // Mostrar alerta sobre erro de carregamento\r\n    alert.warning(`No foi possvel carregar a prvia para o Card ${index + 1}. Verifique se a URL  vlida.`, {\r\n      position: 'bottom-right',\r\n      autoCloseTime: 4000\r\n    });\r\n  }, [index, alert]);\r\n\r\n  // Classe CSS do carto baseada no ndice e status\r\n  const cardClass = `${styles.cardContainer} ${index % 2 === 0 ? styles.evenCard : styles.oddCard} ${card.fileUrl ? styles.hasContent : ''}`;\r\n\r\n  // Quando o componente montar, verifique se j existe uma URL e defina o mtodo de upload correto\r\n  useEffect(() => {\r\n    if (card.fileUrl) {\r\n      // Se foi marcado como upload ou se tem fileSize, consideramos como um arquivo carregado\r\n      // caso contrrio, consideramos como uma URL externa\r\n      setUploadMethod(card.uploadMethod === 'file' || card.fileSize ? 'file' : 'url');\r\n    }\r\n  }, [card.fileUrl, card.uploadMethod, card.fileSize]);\r\n\r\n  return (\r\n    <div className={cardClass}>\r\n      {/* Progresso de upload animado */}\r\n      {uploadProgress > 0 && (\r\n        <div className={`${styles.progressIndicator} ${styles.active}`}>\r\n          <div \r\n            className={styles.progressBar} \r\n            style={{ width: `${uploadProgress}%` }}\r\n          ></div>\r\n        </div>\r\n      )}\r\n      \r\n      <div className={styles.cardHeader}>\r\n        <div className={styles.cardNumberWrapper}>\r\n          <div className={styles.cardNumber}>\r\n            Carto {index + 1}\r\n          </div>\r\n        </div>\r\n\r\n        <div className={styles.fileTypeSelect}>\r\n          <select \r\n            className={styles.select}\r\n            value={card.fileType || 'image'}\r\n            onChange={handleFileTypeChange}\r\n            aria-label=\"Tipo de mdia\"\r\n          >\r\n            <option value=\"image\">Imagem</option>\r\n            <option value=\"video\">Vdeo</option>\r\n          </select>\r\n          <div className={styles.fileTypeIconWrapper}>\r\n            {getFileTypeIcon()}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className={styles.cardBody}>\r\n        <div className={styles.uploadMethods}>\r\n          <button \r\n            className={`${styles.methodButton} ${uploadMethod === 'url' ? styles.activeMethod : ''}`}\r\n            onClick={() => setUploadMethod('url')}\r\n            aria-label=\"Mudar para mtodo URL\"\r\n          >\r\n            <FiLink size={16} />\r\n            <span>URL</span>\r\n          </button>\r\n          <button \r\n            className={`${styles.methodButton} ${uploadMethod === 'file' ? styles.activeMethod : ''}`}\r\n            onClick={() => setUploadMethod('file')}\r\n            aria-label=\"Mudar para mtodo Upload\"\r\n          >\r\n            <FiUploadCloud size={16} />\r\n            <span>Upload</span>\r\n          </button>\r\n        </div>\r\n\r\n        {!previewUrl ? (\r\n          uploadMethod === 'url' ? (\r\n            <div className={styles.formGroup}>\r\n              <div className={styles.uploadHeader}>\r\n                <label className={styles.label}>URL do Arquivo</label>\r\n              </div>\r\n              \r\n              <Input\r\n                type=\"url\"\r\n                clearable\r\n                ref={urlInputRef}\r\n                value={card.fileUrl || ''}\r\n                onChange={(e) => validateUrl(e.target.value)} // Validar ao digitar\r\n                onBlur={handleUrlChange} // Aplicar ao sair do campo\r\n                onKeyDown={handleUrlKeyDown} // Aplicar ao pressionar Enter\r\n                onClear={handleClearFile}\r\n                placeholder=\"https://exemplo.com/imagem.jpg\"\r\n                error={urlValidationError}\r\n                aria-label=\"URL do arquivo de mdia\"\r\n              />\r\n              \r\n              <div className={styles.urlHelpActions}>\r\n                <span className={styles.urlHint}>Cole uma URL direta para uma imagem ou vdeo</span>\r\n                <Button\r\n                  variant=\"text\"\r\n                  size=\"small\"\r\n                  color=\"primary\"\r\n                  onClick={handleTestUrlClick}\r\n                  iconLeft={<FiTrendingUp size={14} />}\r\n                >\r\n                  Usar URL de teste\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className={styles.formGroup}>\r\n              <div className={styles.uploadHeader}>\r\n                <label className={styles.label}>{previewUrl ? 'Visualizao do Arquivo' : 'Upload de Arquivo'}</label>\r\n              </div>\r\n              \r\n              <div \r\n                className={`${styles.dropArea} ${isDragging ? styles.dragging : ''}`}\r\n                onDragEnter={handleDragEnter}\r\n                onDragLeave={handleDragLeave}\r\n                onDragOver={handleDragOver}\r\n                onDrop={handleDrop}\r\n                ref={dropAreaRef}\r\n                onClick={handleFileInputClick}\r\n                role=\"button\"\r\n                tabIndex={0}\r\n                aria-label=\"rea de arrastar e soltar\"\r\n              >\r\n                {isUploading ? (\r\n                  <>\r\n                    <div className={styles.uploadingSpinner}></div>\r\n                    <p className={styles.dropText}>Enviando arquivo...</p>\r\n                    <p className={styles.dropHint}>\r\n                      {uploadProgress > 0 ? `${Math.round(uploadProgress)}% concludo` : 'Preparando upload...'}\r\n                    </p>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <FiUploadCloud size={32} className={styles.uploadIcon} />\r\n                    <p className={styles.dropText}>\r\n                      Arraste um arquivo ou clique para escolher\r\n                    </p>\r\n                    <div className={styles.dropHintEnhanced}>\r\n                      <div className={styles.formatBadges}>\r\n                        <span className={styles.formatBadge}>JPEG</span>\r\n                        <span className={styles.formatBadge}>PNG</span>\r\n                        <span className={styles.formatBadge}>MP4</span>\r\n                      </div>\r\n                      <span className={styles.sizeLimit}>\r\n                        Limite: {card.fileType === 'image' ? '10MB' : '30MB'}\r\n                      </span>\r\n                    </div>\r\n                  </>\r\n                )}\r\n              </div>\r\n              <input \r\n                type=\"file\" \r\n                ref={fileInputRef}\r\n                accept=\"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm\"\r\n                onChange={handleFileUpload}\r\n                style={{ display: 'none' }}\r\n                disabled={isUploading}\r\n                aria-hidden=\"true\"\r\n              />\r\n            </div>\r\n          )\r\n        ) : (\r\n          <div className={styles.formGroup}>\r\n            <div className={styles.uploadHeader}>\r\n              <label className={styles.label}>Visualizao do Arquivo</label>\r\n            </div>\r\n            <div \r\n              className={`${styles.dropArea} ${styles.previewContent} ${loadingPreview ? styles.loading : ''} ${previewError ? styles.error : ''}`}\r\n              id={`preview-section-${index}`}>\r\n              {loadingPreview && (\r\n                <div className={styles.previewLoader}>\r\n                  <div className={styles.spinner}></div>\r\n                  <p>Carregando...</p>\r\n                </div>\r\n              )}\r\n              \r\n              {previewError && (\r\n                <div className={styles.previewErrorMessage}>\r\n                  <FiAlertCircle size={32} />\r\n                  <p>No foi possvel carregar a mdia</p>\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    size=\"small\"\r\n                    color=\"secondary\"\r\n                    onClick={() => {\r\n                      setPreviewError(false);\r\n                      setLoadingPreview(true);\r\n                      const imgEl = previewImgRef.current;\r\n                      if (imgEl) {\r\n                        imgEl.src = card.fileUrl + '?t=' + Date.now();\r\n                      }\r\n                    }}\r\n                    iconLeft={<FiRefreshCw size={14} />}\r\n                  >\r\n                    Tentar novamente\r\n                  </Button>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Boto de remover estilizado no canto superior direito */}\r\n              <button\r\n                className={styles.removeMediaButton}\r\n                onClick={handleClearFile}\r\n                aria-label=\"Remover mdia\"\r\n                title=\"Remover mdia\"\r\n              >\r\n                <FiX size={18} />\r\n              </button>\r\n              \r\n              {card.fileType === 'image' ? (\r\n  // Renderizao de imagem com tratamento correto de carregamento\r\n<img \r\n  ref={previewImgRef}\r\n  src={previewUrl} \r\n  alt={`Pr-visualizao do Carto ${index + 1}`} \r\n  className={`${styles.previewImage} ${previewError ? styles.hidden : ''}`}\r\n  loading=\"lazy\"\r\n  onLoad={handlePreviewLoad}\r\n  onError={handlePreviewError}\r\n  style={{ \r\n    opacity: loadingPreview ? 0 : 1,\r\n    transition: 'opacity 0.3s ease'\r\n  }}\r\n/>\r\n) : (\r\n  // Renderizao de vdeo com tratamento correto de carregamento\r\n  <div className={styles.videoWrapper}>\r\n    <video \r\n  ref={videoRef}\r\n  src={previewUrl} \r\n  className={`${styles.previewVideo} ${previewError ? styles.hidden : ''}`}\r\n  controls\r\n  playsInline\r\n  preload=\"metadata\"\r\n  onLoadedData={handlePreviewLoad}\r\n  onError={handlePreviewError}\r\n  style={{ \r\n    opacity: loadingPreview ? 0 : 1,\r\n    transition: 'opacity 0.3s ease'\r\n  }}\r\n  poster=\"/static/video-poster.jpg\"\r\n/>\r\n    {!previewError && !loadingPreview && (\r\n      <div className={styles.videoOverlay}>\r\n        <div className={styles.videoFormatInfo}>\r\n          <span>MP4, WebM</span>\r\n        </div>\r\n      </div>\r\n    )}\r\n  </div>\r\n)}\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {uploadError && (\r\n          <div className={styles.errorMessageContainer}>\r\n            <div className={styles.errorMessage}>\r\n              <FiAlertCircle size={16} />\r\n              <span>{uploadError}</span>\r\n            </div>\r\n            <Button\r\n              variant=\"text\"\r\n              size=\"small\"\r\n              color=\"negative\"\r\n              onClick={resetUpload}\r\n              iconLeft={<FiRefreshCw size={14} />}\r\n            >\r\n              Tentar novamente\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {previewUrl && (\r\n        <div className={styles.formGroup}>\r\n          <div className={styles.previewActions}>\r\n            <div className={styles.previewActionGroup}>\r\n              <Button \r\n                variant=\"text\"\r\n                size=\"small\"\r\n                color=\"primary\"\r\n                as=\"a\"\r\n                href={card.fileUrl} \r\n                target=\"_blank\" \r\n                rel=\"noopener noreferrer\"\r\n                iconLeft={<FiExternalLink size={14} />}\r\n                title=\"Abrir a mdia em uma nova aba\"\r\n              >\r\n                Ver original\r\n              </Button>\r\n              \r\n              <Button\r\n                variant=\"text\"\r\n                size=\"small\"\r\n                color=\"negative\"\r\n                onClick={handleClearFile}\r\n                iconLeft={<FiTrash2 size={14} />}\r\n                title=\"Remover mdia\"\r\n              >\r\n                Remover\r\n              </Button>\r\n            </div>\r\n            \r\n            {card.uploadDate && (\r\n              <div className={styles.mediaDetailsFooter}>\r\n                <div className={styles.uploadDetails}>\r\n                  <span className={styles.uploadTimestamp}>\r\n                    {`${card.fileName || 'Arquivo'}  `}\r\n                    {`${((card.fileSize || 0) / 1024).toFixed(1)} KB`}\r\n                  </span>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Utilizar React.memo para otimizar performance e evitar renderizaes desnecessrias\r\nexport default React.memo(CardUploadInput);","// hooks/useFileUpload.js\r\nimport { useState, useCallback } from 'react';\r\nimport { useAlert } from '../components/ui/AlertMessage/AlertContext';\r\nimport { createAzureBlobService } from '../services/storage/azureBlobService';\r\n\r\nexport const useFileUpload = () => {\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadError, setUploadError] = useState('');\r\n  const [uploadedFile, setUploadedFile] = useState(null);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  \r\n  const alert = useAlert();\r\n\r\n  const uploadToAzure = useCallback(async (file, updateProgress = () => {}) => {\r\n    setIsUploading(true);\r\n    setUploadError('');\r\n    setUploadedFile(null);\r\n    setUploadProgress(0);\r\n    \r\n    try {\r\n      // Tentar usar o servio Azure primeiro\r\n      try {\r\n        const blobService = createAzureBlobService();\r\n        \r\n        if (!blobService) {\r\n          throw new Error('Servio de upload no configurado');\r\n        }\r\n  \r\n        // Configurar callback de progresso\r\n        const onProgress = (progress) => {\r\n          setUploadProgress(progress);\r\n          updateProgress(progress);\r\n          if (progress % 25 === 0 && progress > 0) {\r\n            alert.info(`Upload ${progress}% concludo`, {\r\n              position: 'bottom-right',\r\n              autoCloseTime: 1500\r\n            });\r\n          }\r\n        };\r\n  \r\n        // Realizar upload\r\n        const result = await blobService.uploadFile(file, {\r\n          onProgress\r\n        });\r\n  \r\n        setUploadedFile(result);\r\n        \r\n        alert.success(`Upload do arquivo \"${file.name}\" concludo com sucesso!`, {\r\n          position: 'top-right',\r\n          autoCloseTime: 3000\r\n        });\r\n  \r\n        return result;\r\n        \r\n      } catch (azureError) {\r\n        console.warn('Falha no upload para Azure, usando fallback:', azureError);\r\n        \r\n        // CORREO: Em vez de usar URL.createObjectURL que tem vida til temporria,\r\n        // cria um fallback que emula URL persistentes simuladas\r\n  \r\n        // 1. Converte o arquivo para base64 (ser mais estvel para persistncia)\r\n        const base64 = await new Promise((resolve) => {\r\n          const reader = new FileReader();\r\n          reader.onloadend = () => resolve(reader.result);\r\n          reader.readAsDataURL(file);\r\n        });\r\n  \r\n        // 2. Usa esta URL persistente em vez da blob URL temporria\r\n        const simulatedResult = {\r\n          url: base64, // URL base64  persistente no armazenamento\r\n          type: file.type.startsWith('image/') ? 'image' : 'video',\r\n          name: file.name\r\n        };\r\n        \r\n        // Simular upload com progresso\r\n        for (let progress = 0; progress <= 100; progress += 20) {\r\n          await new Promise(resolve => setTimeout(resolve, 300));\r\n          setUploadProgress(progress);\r\n          updateProgress(progress);\r\n          \r\n          if (progress % 25 === 0 && progress > 0) {\r\n            alert.info(`Upload ${progress}% concludo (modo fallback)`, {\r\n              position: 'bottom-right',\r\n              autoCloseTime: 1500\r\n            });\r\n          }\r\n        }\r\n        \r\n        setUploadedFile(simulatedResult);\r\n        \r\n        alert.success(`Upload do arquivo \"${file.name}\" concludo em modo fallback!`, {\r\n          position: 'top-right',\r\n          autoCloseTime: 3000\r\n        });\r\n        \r\n        return simulatedResult;\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('Erro fatal em uploadToAzure:', error);\r\n      setUploadError(error.message || 'Erro no upload do arquivo');\r\n      \r\n      alert.error(`Falha no upload: ${error.message || 'Erro desconhecido'}`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 5000\r\n      });\r\n      \r\n      throw error;\r\n    } finally {\r\n      setIsUploading(false);\r\n    }\r\n  }, [alert]);\r\n\r\n  const cancelUpload = useCallback(() => {\r\n    setIsUploading(false);\r\n    setUploadProgress(0);\r\n    \r\n    alert.info(\"Upload cancelado\", {\r\n      position: 'bottom-right',\r\n      autoCloseTime: 3000\r\n    });\r\n  }, [alert]);\r\n\r\n  const resetUpload = useCallback(() => {\r\n    setIsUploading(false);\r\n    setUploadError('');\r\n    setUploadedFile(null);\r\n    setUploadProgress(0);\r\n  }, []);\r\n\r\n  return {\r\n    uploadToAzure,\r\n    isUploading,\r\n    uploadError,\r\n    uploadedFile,\r\n    uploadProgress,\r\n    cancelUpload,\r\n    resetUpload\r\n  };\r\n};","// extracted by mini-css-extract-plugin\nexport default {\"authOptions\":\"StepOne_authOptions__T2JvM\",\"rememberKeyLabel\":\"StepOne_rememberKeyLabel__PvUU0\",\"rememberKeyCheckbox\":\"StepOne_rememberKeyCheckbox__I56qz\",\"securityNote\":\"StepOne_securityNote__yZZDP\",\"twoColumnLayout\":\"StepOne_twoColumnLayout__0XxEy\",\"mainColumn\":\"StepOne_mainColumn__Fcofg\",\"sideColumn\":\"StepOne_sideColumn__LXy3D\",\"uploadSummaryCard\":\"StepOne_uploadSummaryCard__7MmkS\",\"summaryHeader\":\"StepOne_summaryHeader__zSjLO\",\"uploadStats\":\"StepOne_uploadStats__yPV-P\",\"statRow\":\"StepOne_statRow__A3F2H\",\"statLabel\":\"StepOne_statLabel__TTKI9\",\"statValue\":\"StepOne_statValue__695Uk\",\"statusActions\":\"StepOne_statusActions__dghqR\",\"cardsControlSection\":\"StepOne_cardsControlSection__b1iAd\",\"controlHeader\":\"StepOne_controlHeader__Jtbx4\",\"cardCounter\":\"StepOne_cardCounter__nbZzS\",\"cardCountLabel\":\"StepOne_cardCountLabel__EG3c1\",\"buttonGroup\":\"StepOne_buttonGroup__tdt40\",\"controlButton\":\"StepOne_controlButton__Vcu4U\",\"cardCount\":\"StepOne_cardCount__Yn+6N\",\"cardControlOptions\":\"StepOne_cardControlOptions__mu57m\",\"cardControlHelp\":\"StepOne_cardControlHelp__lyQuP\",\"cardTipsContainer\":\"StepOne_cardTipsContainer__K6uE3\",\"tipsToggle\":\"StepOne_tipsToggle__7HzdG\",\"cardTips\":\"StepOne_cardTips__3hXZ+\",\"fadeIn\":\"StepOne_fadeIn__WPxUp\",\"jumpToCardsButton\":\"StepOne_jumpToCardsButton__AcSN3\",\"cardsGrid\":\"StepOne_cardsGrid__N6VSh\",\"fadeInUp\":\"StepOne_fadeInUp__2AfRL\",\"uploadProgressContainer\":\"StepOne_uploadProgressContainer__6tKQc\",\"uploadProgressBar\":\"StepOne_uploadProgressBar__46xUO\",\"uploadProgressFill\":\"StepOne_uploadProgressFill__mhK2g\",\"uploadProgressText\":\"StepOne_uploadProgressText__sWm56\",\"fileHandleInfo\":\"StepOne_fileHandleInfo__+FbSZ\",\"slideIn\":\"StepOne_slideIn__4tDoe\",\"uploadSummary\":\"StepOne_uploadSummary__cQgcu\",\"summaryTitle\":\"StepOne_summaryTitle__U0UK+\",\"summaryList\":\"StepOne_summaryList__E04q1\",\"summaryItem\":\"StepOne_summaryItem__4nliE\",\"successStatus\":\"StepOne_successStatus__wJB8n\",\"cachedStatus\":\"StepOne_cachedStatus__UrEbw\",\"simulatedStatus\":\"StepOne_simulatedStatus__qurZr\",\"container\":\"StepOne_container__OzvQS\",\"authHeader\":\"StepOne_authHeader__HuZOe\",\"authIconContainer\":\"StepOne_authIconContainer__LX-mQ\"};","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"Steps_container__p2lLy\",\"introStepWrapper\":\"Steps_introStepWrapper__ObIih\",\"stepTitle\":\"Steps_stepTitle__f7OJP\",\"stepDescription\":\"Steps_stepDescription__FkqAp\",\"sectionHeader\":\"Steps_sectionHeader__56hXd\",\"sectionIconContainer\":\"Steps_sectionIconContainer__EximX\",\"containerCard\":\"Steps_containerCard__eGlhp\",\"card\":\"Steps_card__haKWC\",\"loadingSpinner\":\"Steps_loadingSpinner__WzFe6\",\"spin\":\"Steps_spin__nIDYU\",\"validationMessage\":\"Steps_validationMessage__NXiv3\",\"actionSection\":\"Steps_actionSection__1apm7\",\"actionButtonsWrapper\":\"Steps_actionButtonsWrapper__-YL-r\",\"lastSavedInfo\":\"Steps_lastSavedInfo__tRb-h\",\"unsavedIndicator\":\"Steps_unsavedIndicator__Gg334\",\"stepProgressContainer\":\"Steps_stepProgressContainer__Nbxd3\",\"stepProgressBar\":\"Steps_stepProgressBar__FhaQy\",\"stepProgressFill\":\"Steps_stepProgressFill__sEWoc\",\"stepProgressText\":\"Steps_stepProgressText__DYyU+\"};","// components/steps/StepOne.js - Melhorado\r\nimport React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport CardUploadInput from '../editors/CardUploadInput';\r\nimport { useAlert } from '../ui/AlertMessage/AlertContext'; \r\nimport Button from '../ui/Button/Button';\r\nimport { \r\n  FiUpload, \r\n  FiPlus, \r\n  FiMinus, \r\n  FiKey, \r\n  FiArrowDown, \r\n  FiSave, \r\n  FiInfo, \r\n  FiCheckCircle,\r\n  FiDownload,\r\n  FiShield\r\n} from 'react-icons/fi';\r\nimport styles from './StepOne.module.css';\r\nimport steps from '../../styles/Steps.module.css';\r\nimport Input from '../ui/Input/Input';\r\n\r\n/**\r\n * StepOne - Initial step for file configuration\r\n * Enhanced with better UI/UX based on the design system\r\n * Fixed issues with saveDraftManually and step validation\r\n * \r\n * @param {Object} props Component properties\r\n * @returns {JSX.Element} StepOne component\r\n */\r\nconst StepOne = ({ \r\n  authKey, \r\n  setAuthKey, \r\n  numCards, \r\n  cards, \r\n  updateCard, \r\n  handleAddCard, \r\n  handleRemoveCard, \r\n  handleUploadFiles,\r\n  loading, \r\n  error, \r\n  success, \r\n  uploadResults,\r\n  isStepValid,\r\n  saveCurrentState, // Usar saveCurrentState em vez de saveDraftManually\r\n  unsavedChanges,\r\n  lastSavedTime\r\n}) => {\r\n  // Local state\r\n  const [savedBeforeUpload, setSavedBeforeUpload] = useState(false);\r\n  const [rememberKey, setRememberKey] = useState(() => {\r\n    return localStorage.getItem('remember_auth_key') === 'true';\r\n  });\r\n  const [showTips, setShowTips] = useState(false);\r\n  const [isKeyVisible, setIsKeyVisible] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState(0);\r\n  \r\n  // Initialize alert system\r\n  const alert = useAlert();\r\n  \r\n  // Refs\r\n  const uploadSectionRef = useRef(null);\r\n  \r\n  // Handle auth key in localStorage\r\n  useEffect(() => {\r\n    if (rememberKey && authKey) {\r\n      localStorage.setItem('auth_key', authKey);\r\n      localStorage.setItem('remember_auth_key', 'true');\r\n    } else if (!rememberKey) {\r\n      localStorage.removeItem('auth_key');\r\n      localStorage.setItem('remember_auth_key', 'false');\r\n    }\r\n  }, [rememberKey, authKey]);\r\n  \r\n  // Load auth key from localStorage\r\n  useEffect(() => {\r\n    if (rememberKey && !authKey) {\r\n      const savedKey = localStorage.getItem('auth_key');\r\n      if (savedKey) {\r\n        setAuthKey(savedKey);\r\n      }\r\n    }\r\n  }, [rememberKey, authKey, setAuthKey]);\r\n  \r\n  // Scroll to upload section\r\n  const scrollToUploadSection = useCallback(() => {\r\n    uploadSectionRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  }, []);\r\n  \r\n  // Save draft before upload\r\n  const handleSaveBeforeUpload = useCallback(() => {\r\n    // Verifica se a funo saveCurrentState existe\r\n    if (typeof saveCurrentState === 'function') {\r\n      const success = saveCurrentState();\r\n      \r\n      if (success) {\r\n        setSavedBeforeUpload(true);\r\n        \r\n        // Adicionar alerta de sucesso\r\n        alert.success(\"Rascunho salvo com sucesso!\", {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 3000\r\n        });\r\n        \r\n        setTimeout(() => {\r\n          setSavedBeforeUpload(false);\r\n        }, 3000);\r\n      } else {\r\n        // Mostrar erro se o salvamento falhou\r\n        alert.error(\"No foi possvel salvar o rascunho.\", {\r\n          position: 'top-center',\r\n          autoCloseTime: 5000\r\n        });\r\n      }\r\n    } else {\r\n      // Mostrar erro se a funo no estiver disponvel\r\n      console.error(\"Funo saveCurrentState no est disponvel\");\r\n      alert.error(\"No foi possvel salvar o rascunho. Tente novamente mais tarde.\", {\r\n        position: 'top-center'\r\n      });\r\n    }\r\n  }, [saveCurrentState, alert]);\r\n  \r\n  // Check if all cards have valid URLs\r\n  const allCardsHaveUrls = useCallback(() => {\r\n    return cards.slice(0, numCards).every(card => card.fileUrl?.trim());\r\n  }, [cards, numCards]);\r\n\r\n  // Simulao de progresso de upload\r\n  const simulateUploadProgress = useCallback(() => {\r\n    setUploadProgress(0);\r\n    const interval = setInterval(() => {\r\n      setUploadProgress(prev => {\r\n        const newValue = prev + (Math.random() * 10);\r\n        if (newValue >= 100) {\r\n          clearInterval(interval);\r\n          return 100;\r\n        }\r\n        return newValue;\r\n      });\r\n    }, 300);\r\n    \r\n    return () => clearInterval(interval);\r\n  }, []);\r\n\r\n  // Wrapper para verificar e mostrar alertas antes do upload\r\n  const wrappedHandleUploadFiles = useCallback(async () => {\r\n    try {\r\n      // Verificar se temos a chave de autenticao\r\n      if (!authKey) {\r\n        alert.error(\"Chave de autorizao (Router Key)  obrigatria para continuar\", {\r\n          position: 'top-center'\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // Verificar se todos os cards tm URLs\r\n      if (!allCardsHaveUrls()) {\r\n        alert.warning(\"Adicione arquivos para todos os cards antes de continuar\", {\r\n          position: 'top-center'\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // Iniciar simulao de progresso\r\n      const stopProgress = simulateUploadProgress();\r\n      \r\n      // Salvar rascunho antes de upload\r\n      if (typeof saveCurrentState === 'function') {\r\n        saveCurrentState();\r\n      }\r\n      \r\n      // Chamar a funo original de upload\r\n      await handleUploadFiles();\r\n      \r\n      // Garantir que o progresso termine em 100%\r\n      setUploadProgress(100);\r\n      \r\n      // Parar simulao de progresso\r\n      stopProgress();\r\n      \r\n      // Mostrar alerta de sucesso se no ocorreu erro\r\n      alert.success(\"Upload de arquivos concludo com sucesso!\", {\r\n        position: 'top-right'\r\n      });\r\n    } catch (err) {\r\n      // Zerar progresso em caso de erro\r\n      setUploadProgress(0);\r\n      \r\n      // Capturar e mostrar erros como alertas\r\n      alert.error(`Erro no upload dos arquivos: ${err.message || 'Erro desconhecido'}`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 7000\r\n      });\r\n    }\r\n  }, [authKey, allCardsHaveUrls, handleUploadFiles, alert, saveCurrentState, simulateUploadProgress]);\r\n\r\n  // Mostrar alertas para erros e sucessos existentes\r\n  useEffect(() => {\r\n    if (error) {\r\n      alert.error(error, { position: 'top-center' });\r\n    }\r\n    \r\n    if (success) {\r\n      alert.success(success, { position: 'top-right' });\r\n    }\r\n  }, [error, success, alert]);\r\n\r\n  // Verifica quantos cards j possuem fileHandles\r\n  const cardsWithFileHandles = cards.slice(0, numCards).filter(card => \r\n    card.fileUrl && card.fileHandle && card.fileHandle !== ''\r\n  ).length;\r\n\r\n  // Funo para limpar todos os fileHandles\r\n  const handleClearAllFileHandles = useCallback(() => {\r\n    if (window.confirm('Tem certeza que deseja limpar tudo? Isso forar um novo upload para todos os cards.')) {\r\n      // Atualizar cada card para remover fileHandle\r\n      for (let i = 0; i < numCards; i++) {\r\n        updateCard(i, 'fileHandle', '');\r\n      }\r\n      \r\n      // Mostrar alerta de limpeza\r\n      alert.info('Todos os arquivos foram limpos. Voc precisar fazer upload novamente.', {\r\n        position: 'top-center',\r\n        autoCloseTime: 3000\r\n      });\r\n    }\r\n  }, [cards, numCards, updateCard, alert]);\r\n\r\n  // Verifica se o passo  vlido\r\n  const checkStepValidity = useCallback(() => {\r\n    // Se a funo isStepValid no estiver disponvel, fazer validao local\r\n    if (typeof isStepValid !== 'function') {\r\n      // Verificar se temos a chave de autenticao\r\n      if (!authKey) {\r\n        return false;\r\n      }\r\n      \r\n      // Verificar se todos os cards tm URLs\r\n      return allCardsHaveUrls();\r\n    }\r\n    \r\n    // Se a funo isStepValid estiver disponvel, usar ela\r\n    return isStepValid(1);\r\n  }, [isStepValid, authKey, allCardsHaveUrls]);\r\n\r\n  // Calcular porcentagem de progresso para esta etapa\r\n  const calculateProgress = () => {\r\n    let points = 0;\r\n    let total = 2; // Auth key + pelo menos um card deve ter URL\r\n    \r\n    if (authKey) points++;\r\n    if (allCardsHaveUrls()) points++;\r\n    \r\n    return Math.floor((points / total) * 100);\r\n  };\r\n  \r\n  const progressPercentage = calculateProgress();\r\n\r\n  return (\r\n    <div className={steps.container}>\r\n      {/* Introduction section */}\r\n      <div className={steps.introStepWrapper}>\r\n        <h2 className={steps.stepTitle}>Configurao de Arquivos</h2>\r\n        <p className={steps.stepDescription}>\r\n          Nesta etapa, voc configurar as imagens ou vdeos que sero exibidos no seu carrossel do WhatsApp\r\n          e fornecer a chave de autorizao necessria para fazer o upload dos arquivos.\r\n        </p>\r\n        \r\n        {/* Barra de progresso da etapa */}\r\n        <div className={steps.stepProgressContainer}>\r\n          <div className={steps.stepProgressBar}>\r\n            <div \r\n              className={steps.stepProgressFill} \r\n              style={{width: `${progressPercentage}%`}}\r\n            ></div>\r\n          </div>\r\n          <span className={steps.stepProgressText}>\r\n            {progressPercentage === 100 ? 'Pronto para continuar!' : `${progressPercentage}% completo`}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      \r\n          <div className={steps.containerCard}>\r\n            <div className={steps.sectionHeader}>\r\n              <div className={steps.sectionIconContainer}>\r\n                <FiKey size={24} />\r\n              </div>\r\n              <h3>Autenticao</h3>\r\n            </div>\r\n            \r\n            <div className={styles.authInputWrapper}>\r\n              <Input \r\n                id=\"authKey\"\r\n                name=\"authKey\"\r\n                label=\"Chave de Autorizao (Router Key)\"\r\n                type={isKeyVisible ? \"text\" : \"password\"}\r\n                value={authKey}\r\n                onChange={(e) => setAuthKey(e.target.value)}\r\n                placeholder=\"Digite sua chave de autorizao\"\r\n                hintMessage=\"Esta chave  necessria para enviar arquivos e criar templates. Voc pode encontr-la no portal Blip no seu roteador conectado ao Canal WhatsApp.\"\r\n                hintVariant=\"simple\"\r\n                hintIsCompact={true}\r\n                required\r\n                error=\"\"\r\n              />\r\n            </div>\r\n\r\n            <div className={styles.authOptions}>\r\n              <label className={styles.rememberKeyLabel}>\r\n                <input \r\n                  type=\"checkbox\" \r\n                  className={styles.rememberKeyCheckbox}\r\n                  checked={rememberKey}\r\n                  onChange={(e) => setRememberKey(e.target.checked)}\r\n                />\r\n                Lembrar minha chave\r\n              </label>\r\n              \r\n              <div className={styles.securityNote}>\r\n                <FiShield size={14} />\r\n                <span>Sua chave  armazenada apenas no seu navegador</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Card controls section */}\r\n          <div className={styles.cardsControlSection}>\r\n          <div className={steps.sectionHeader}>\r\n              <div className={steps.sectionIconContainer}>\r\n                <FiKey size={24} />\r\n              </div>\r\n              <h3>Autenticao</h3>\r\n            </div>\r\n              <div className={styles.cardCounter}>\r\n                <span className={styles.cardCountLabel}>Nmero de cards:</span>\r\n                <div className={styles.buttonGroup}>\r\n                  <Button \r\n                    onClick={handleRemoveCard}\r\n                    disabled={numCards <= 2}\r\n                    className={styles.controlButton}\r\n                    aria-label=\"Remover card\"\r\n                    variant=\"outline\"\r\n                    color=\"content\"\r\n                    size=\"small\"\r\n                    iconLeft={<FiMinus size={18} />}\r\n                  />\r\n                  <span className={styles.cardCount}>{numCards}</span>\r\n                  <Button \r\n                    onClick={handleAddCard}\r\n                    disabled={numCards >= 10}\r\n                    className={styles.controlButton}\r\n                    aria-label=\"Adicionar card\"\r\n                    variant=\"outline\"\r\n                    color=\"content\"\r\n                    size=\"small\"\r\n                    iconLeft={<FiPlus size={18} />}\r\n                  />\r\n                </div>\r\n              </div>\r\n            \r\n            <div className={styles.cardControlOptions}>\r\n              <p className={styles.cardControlHelp}>\r\n                Um carrossel precisa de pelo menos 2 e no mximo 10 cards. Cada card ter uma imagem ou vdeo e botes interativos.\r\n              </p>\r\n              \r\n              <div className={styles.cardTipsContainer}>\r\n                <Button \r\n                  className={styles.tipsToggle}\r\n                  onClick={() => setShowTips(!showTips)}\r\n                  variant=\"text\"\r\n                  color=\"content\"\r\n                  size=\"small\"\r\n                >\r\n                  {showTips ? \"Ocultar dicas\" : \"Mostrar dicas\"}\r\n                </Button>\r\n                \r\n                {showTips && (\r\n                  <div className={styles.cardTips}>\r\n                    <h4>Melhores prticas para imagens de carrossel:</h4>\r\n                    <ul>\r\n                      <li>Tamanho recomendado: 800418 pixels</li>\r\n                      <li>Use as mesmas dimenses para todas as imagens para uma exibio consistente</li>\r\n                      <li>Mantenha os arquivos abaixo de 5MB para carregamento rpido</li>\r\n                      <li>Para vdeos, mantenha a durao abaixo de 60 segundos</li>\r\n                    </ul>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n            \r\n            <Button \r\n              variant=\"outline\"\r\n              color=\"primary\"\r\n              onClick={scrollToUploadSection}\r\n              iconRight={<FiArrowDown size={14} />}\r\n              className={styles.jumpToCardsButton}\r\n            >\r\n              Ver todos os cards\r\n            </Button>\r\n          </div>\r\n      \r\n      {/* Card upload grid */}\r\n      <div className={styles.cardsGrid} ref={uploadSectionRef}>\r\n        {cards.slice(0, numCards).map((card, index) => (\r\n          <CardUploadInput \r\n            key={index} \r\n            index={index} \r\n            card={card} \r\n            updateCard={updateCard}\r\n            totalCards={numCards}\r\n          />\r\n        ))}\r\n      </div>\r\n      \r\n      {/* Action buttons */}\r\n      <div className={styles.actionSection}>\r\n        <div className={steps.actionSection}>\r\n          <Button \r\n            variant=\"outline\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            onClick={handleSaveBeforeUpload}\r\n            iconLeft={savedBeforeUpload ? <FiCheckCircle size={18} /> : <FiSave size={18} />}\r\n          >\r\n            {savedBeforeUpload ? 'Salvo!' : 'Salvar Rascunho'}\r\n          </Button>\r\n          \r\n          <Button \r\n            variant=\"solid\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            loading={loading}\r\n            disabled={!checkStepValidity() || loading}\r\n            iconLeft={loading ? null : <FiUpload size={18} />}\r\n            onClick={wrappedHandleUploadFiles}\r\n          >\r\n            {loading ? 'Processando uploads...' : 'Enviar Arquivos & Continuar'}\r\n          </Button>\r\n        </div>\r\n        \r\n        {/* Barra de progresso de upload */}\r\n        {loading && (\r\n          <div className={styles.uploadProgressContainer}>\r\n            <div className={styles.uploadProgressBar}>\r\n              <div \r\n                className={styles.uploadProgressFill} \r\n                style={{width: `${uploadProgress}%`}}\r\n              ></div>\r\n            </div>\r\n            <span className={styles.uploadProgressText}>\r\n              {uploadProgress < 100 ? `Enviando arquivos... ${Math.floor(uploadProgress)}%` : 'Upload concludo!'}\r\n            </span>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Mostrar informao de ltimo salvamento */}\r\n        {lastSavedTime && !savedBeforeUpload && (\r\n          <div className={steps.lastSavedInfo}>\r\n            <FiInfo size={14} />\r\n            <span>\r\n              ltimo salvamento: {new Date(lastSavedTime).toLocaleString()}\r\n              {unsavedChanges && (\r\n                <span className={steps.unsavedIndicator}> (Alteraes no salvas)</span>\r\n              )}\r\n            </span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      {/* Upload summary */}\r\n      {uploadResults.length > 0 && (\r\n        <div className={styles.uploadSummary}>\r\n          <div className={styles.summaryTitle}>Resumo do upload:</div>\r\n          <ul className={styles.summaryList}>\r\n            {uploadResults.map((result, idx) => (\r\n              <li key={idx} className={styles.summaryItem}>\r\n                Card {result.cardIndex !== undefined ? result.cardIndex + 1 : idx + 1}: \r\n                <span className={\r\n                  result.status === 'success' ? styles.successStatus : \r\n                  result.status === 'cached' ? styles.cachedStatus : \r\n                  styles.simulatedStatus\r\n                }>\r\n                  {result.status === 'success' ? ' Upload bem-sucedido' : \r\n                  result.status === 'cached' ? ' Carregado do cache' : \r\n                  ' Simulado para teste'}\r\n                </span>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StepOne;","// extracted by mini-css-extract-plugin\nexport default {\"buttonContainer\":\"ButtonEditor_buttonContainer__09rZO\",\"invalidContainer\":\"ButtonEditor_invalidContainer__MpkzH\",\"buttonTypeSelector\":\"ButtonEditor_buttonTypeSelector__w4Rci\",\"typeOption\":\"ButtonEditor_typeOption__gRdb8\",\"selectedType\":\"ButtonEditor_selectedType__ruoxW\",\"typeIconWrapper\":\"ButtonEditor_typeIconWrapper__HfVNo\",\"typeLabel\":\"ButtonEditor_typeLabel__6KNmw\",\"typeDescription\":\"ButtonEditor_typeDescription__7kdas\",\"formGroup\":\"ButtonEditor_formGroup__3lScc\",\"inputWrapper\":\"ButtonEditor_inputWrapper__jwFKO\",\"helpContent\":\"ButtonEditor_helpContent__LQusT\",\"exampleBox\":\"ButtonEditor_exampleBox__M0r9C\",\"urlInputWrapper\":\"ButtonEditor_urlInputWrapper__XULBQ\",\"phoneInputWrapper\":\"ButtonEditor_phoneInputWrapper__rUtTK\",\"testActionButton\":\"ButtonEditor_testActionButton__WEolC\",\"urlWarning\":\"ButtonEditor_urlWarning__TJG79\",\"phonePreview\":\"ButtonEditor_phonePreview__EzIU8\",\"buttonActions\":\"ButtonEditor_buttonActions__WFxG0\",\"removeButton\":\"ButtonEditor_removeButton__LDrY4\",\"validationMessage\":\"ButtonEditor_validationMessage__epDrW\",\"validationIcon\":\"ButtonEditor_validationIcon__8Jivp\",\"lockIndicator\":\"ButtonEditor_lockIndicator__9aksD\",\"disabledType\":\"ButtonEditor_disabledType__vLGMK\",\"syncWarning\":\"ButtonEditor_syncWarning__1bqO+\",\"fadeIn\":\"ButtonEditor_fadeIn__3zE9q\",\"syncNotice\":\"ButtonEditor_syncNotice__JTRLj\",\"input\":\"ButtonEditor_input__JXuRH\",\"labelWithProgress\":\"ButtonEditor_labelWithProgress__D13oH\",\"characterProgressWrapper\":\"ButtonEditor_characterProgressWrapper__jlAkE\",\"labelWithHelp\":\"ButtonEditor_labelWithHelp__XVfEf\",\"helpButton\":\"ButtonEditor_helpButton__-337b\"};","// components/editors/ButtonEditor.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { FiLink, FiPhone, FiMessageSquare, FiInfo, FiAlertCircle, FiCheckCircle, FiExternalLink, FiLock, FiUnlock } from 'react-icons/fi';\r\nimport styles from './ButtonEditor.module.css';\r\nimport Input from '../ui/Input/Input';\r\nimport Button from '../ui/Button/Button';\r\nimport PropTypes from 'prop-types'\r\n\r\n/**\r\n * ButtonEditor - Componente aprimorado para editar botes de templates do WhatsApp\r\n * Agora com sincronizao de tipo de boto em todos os cards\r\n * \r\n * @param {Object} props Propriedades do componente\r\n * @param {number} props.index ndice do card\r\n * @param {number} props.buttonIndex ndice do boto dentro do card\r\n * @param {Object} props.button Dados do boto\r\n * @param {Function} props.updateButtonField Funo para atualizar campos do boto\r\n * @param {Function} props.removeButton Funo para remover o boto\r\n * @param {number} props.totalButtons Total de botes no card\r\n * @param {boolean} props.showHints Se deve mostrar dicas teis\r\n * @param {string} props.validationMessage Mensagem de erro de validao, se houver\r\n * @param {Array} props.cards Todos os cards do carrossel\r\n * @param {number} props.numCards Nmero de cards ativos\r\n * @param {Function} props.syncButtonTypes Funo para sincronizar tipos de botes em todos os cards\r\n * @returns {JSX.Element} Componente ButtonEditor\r\n */\r\nconst ButtonEditor = ({ \r\n  index, \r\n  buttonIndex, \r\n  button, \r\n  updateButtonField, \r\n  removeButton, \r\n  totalButtons, \r\n  showHints = true,\r\n  validationMessage,\r\n  cards,\r\n  numCards,\r\n  syncButtonTypes,\r\n  setFocusedInput\r\n}) => {\r\n  // Estado para interaes de UI\r\n  const [urlTested, setUrlTested] = useState(false);\r\n  const [phoneTested, setPhoneTested] = useState(false);\r\n  const [isTypeLocked, setIsTypeLocked] = useState(true);\r\n  const [showSyncWarning, setShowSyncWarning] = useState(false);\r\n  \r\n  // Efeito para detectar se este  o primeiro card com este ndice de boto\r\n  // Se no for, bloqueamos a seleo do tipo de boto (deve seguir o primeiro card)\r\n  useEffect(() => {\r\n    // S bloqueia se houver mltiplos cards e este no for o primeiro card\r\n    const shouldLock = numCards > 1 && index > 0;\r\n    setIsTypeLocked(shouldLock);\r\n  }, [numCards, index]);\r\n  \r\n  const handleFocus = () => {\r\n    setFocusedInput?.({ cardIndex: index, buttonIndex: buttonIndex });\r\n  };\r\n\r\n  const handleBlur = () => {\r\n    setFocusedInput?.({ cardIndex: null, buttonIndex: null });\r\n  };\r\n  \r\n  // Verificao de URL vlida com protocolo adequado\r\n  const isValidUrl = (url) => {\r\n    try {\r\n      new URL(url);\r\n      return true;\r\n    } catch (e) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Testar link de URL com feedback visual\r\n  const testUrl = () => {\r\n    if (button.url && isValidUrl(button.url)) {\r\n      window.open(button.url, '_blank', 'noopener,noreferrer');\r\n      setUrlTested(true);\r\n      setTimeout(() => setUrlTested(false), 3000);\r\n    }\r\n  };\r\n\r\n  // Testar ao de clique no nmero de telefone\r\n  const testPhoneNumber = () => {\r\n    if (button.phoneNumber) {\r\n      window.location.href = `tel:${button.phoneNumber}`;\r\n      setPhoneTested(true);\r\n      setTimeout(() => setPhoneTested(false), 3000);\r\n    }\r\n  };\r\n  \r\n  // Lidar com mudana de tipo de boto com sincronizao\r\n  const handleButtonTypeChange = (newType) => {\r\n    if (isTypeLocked && !window.confirm(\"Alterar o tipo deste boto ir sincronizar todos os botes nesta posio em todos os cards. Deseja continuar?\")) {\r\n      return;\r\n    }\r\n    \r\n    // Se for o primeiro card e houver mltiplos cards, mostrar aviso sobre sincronizao\r\n    if (index === 0 && numCards > 1 && !showSyncWarning) {\r\n      setShowSyncWarning(true);\r\n      setTimeout(() => setShowSyncWarning(false), 5000);\r\n    }\r\n    \r\n    // Verificar se precisamos sincronizar em todos os cards\r\n    if (numCards > 1) {\r\n      // Primeiro atualiza este boto\r\n      updateButtonField(buttonIndex, 'type', newType);\r\n      \r\n      // Depois sincroniza com todos os outros cards\r\n      if (syncButtonTypes) {\r\n        syncButtonTypes(buttonIndex, newType);\r\n      }\r\n    } else {\r\n      // Apenas atualiza este boto\r\n      updateButtonField(buttonIndex, 'type', newType);\r\n    }\r\n  };\r\n  \r\n  // Lidar com remoo de boto com sincronizao\r\n  const handleRemoveButton = () => {\r\n    if (numCards > 1 && !window.confirm(\"Remover este boto ir remover o boto correspondente em todos os cards. Deseja continuar?\")) {\r\n      return;\r\n    }\r\n    \r\n    removeButton(buttonIndex);\r\n  };\r\n\r\n  // Configurao de tipos de boto com cones e descries\r\n  const buttonTypes = [\r\n    { \r\n      value: 'URL', \r\n      label: 'Abrir Link', \r\n      icon: <FiLink size={20} />,\r\n      description: 'Leva o usurio para um site externo.'\r\n    },\r\n    { \r\n      value: 'QUICK_REPLY', \r\n      label: 'Resposta Rpida', \r\n      icon: <FiMessageSquare size={20} />,\r\n      description: 'Envia uma mensagem pronta ao clicar.'\r\n    },\r\n    { \r\n      value: 'PHONE_NUMBER', \r\n      label: 'Ligao', \r\n      icon: <FiPhone size={20} />,\r\n      description: 'Inicia uma chamada telefnica instantaneamente.'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className={`${styles.buttonContainer} ${validationMessage ? styles.invalidContainer : ''}`}>\r\n      {/* Aviso de Sincronizao do WhatsApp */}\r\n      {showSyncWarning && index === 0 && numCards > 1 && (\r\n        <div className={styles.syncWarning}>\r\n          <FiInfo size={16} />\r\n          <span>\r\n            O WhatsApp exige que todos os cards tenham os mesmos botes na mesma posio. Se alterar este boto, todas as outras verses sero ajustadas automaticamente.\r\n          </span>\r\n        </div>\r\n      )}\r\n    \r\n      {/* Seletor de Tipo de Boto */}\r\n      <div className={styles.buttonTypeSelector}>\r\n        {buttonTypes.map(type => (\r\n          <div \r\n            key={type.value}\r\n            className={`\r\n              ${styles.typeOption} \r\n              ${button.type === type.value ? styles.selectedType : ''} \r\n              ${isTypeLocked && type.value !== button.type ? styles.disabledType : ''}\r\n            `}\r\n            onClick={() => handleButtonTypeChange(type.value)}\r\n          >\r\n            <div className={styles.typeIconWrapper}>\r\n              {type.icon}\r\n              {isTypeLocked && index > 0 && (\r\n                <div className={styles.lockIndicator}>\r\n                  <FiLock size={12} />\r\n                </div>\r\n              )}\r\n            </div>\r\n            <span className={styles.typeLabel}>{type.label}</span>\r\n          </div>\r\n        ))}\r\n      </div>\r\n      \r\n      {/* Descrio do Tipo */}\r\n      {showHints && (\r\n        <div className={styles.typeDescription}>\r\n          {buttonTypes.find(t => t.value === button.type)?.description}\r\n        </div>\r\n      )}\r\n\r\n      {/* Aviso de Requisito do WhatsApp */}\r\n      {isTypeLocked && index > 0 && showHints && (\r\n        <div className={styles.syncNotice}>\r\n          <FiInfo size={14} />\r\n          <span>\r\n            O tipo deste boto segue a configurao do primeiro card, conforme as regras do WhatsApp.\r\n          </span>\r\n        </div>\r\n      )}\r\n\r\n      <Input\r\n        id=\"buttonText\"\r\n        name=\"ButtonText\"\r\n        label=\"Texto do Boto\"\r\n        value={button.text || ''}\r\n        onChange={(e) => updateButtonField(buttonIndex, 'text', e.target.value)}\r\n        placeholder=\"Exemplos: Saiba mais, Comprar agora, etc.\"\r\n        required\r\n        minLength={1}\r\n        maxLength={25}\r\n        error={false}\r\n        hintMessage={showHints ? \"Texto exibido no boto. Mximo de 25 caracteres.\" : \"\"}\r\n        allowFormatting={false}\r\n        textFormatting={false} // Habilita a barra de formatao\r\n        textFormattingCompact={false} // Opcional: tamanho normal\r\n        textFormattingDarkMode={false} // Opcional: tema claro\r\n        showCharCounter\r\n        hintIsCompact={true}\r\n        onFocus={handleFocus}\r\n        onBlur={handleBlur}\r\n      />\r\n      \r\n      {button.type === 'URL' && (\r\n        <Input\r\n          id={`button-${buttonIndex}-url`}\r\n          name={`button-${buttonIndex}-url`}\r\n          type=\"url\"\r\n          label=\"Link de Destino\"\r\n          value={button.url || ''}\r\n          onChange={(e) => updateButtonField(buttonIndex, 'url', e.target.value)}\r\n          placeholder=\"https://example.com/page\"\r\n          required\r\n          error={button.url && !isValidUrl(button.url) ? \"URL invlida. Certifique-se de incluir 'https://' ou 'http://'\" : \"\"}\r\n          variant=\"url\"\r\n          validateOnChange\r\n          onFocus={handleFocus}\r\n          onBlur={handleBlur}\r\n          rightElement={button.url && (\r\n            <Button \r\n              type=\"button\"\r\n              className={styles.testActionButton}\r\n              onClick={testUrl}\r\n              disabled={!isValidUrl(button.url)}\r\n              title={isValidUrl(button.url) ? \"Testar este URL\" : \"Formato de URL invlido\"}\r\n            >\r\n              {urlTested ? (\r\n                <>\r\n                  <FiCheckCircle size={14} />\r\n                  <span>Aberto</span>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <FiExternalLink size={14} />\r\n                  <span>Testar</span>\r\n                </>\r\n              )}\r\n            </Button>\r\n          )}\r\n          icon={button.url && !isValidUrl(button.url) ? <FiAlertCircle size={14}/> : null}\r\n          hintMessage={showHints}\r\n          hintTitle=\"Como criar um bom link:\"\r\n          hintList={[\r\n            \"Sempre use HTTPS quando possvel (mais seguro)\",\r\n            \"A URL completa deve incluir 'https://' no incio\",\r\n            \"Evite encurtadores de URL no confiveis\",\r\n            \"Teste o link antes de salvar\",\r\n            <React.Fragment>\r\n              <strong>Exemplos vlidos:</strong><br />\r\n              <code>https://www.example.com</code><br />\r\n              <code>https://example.com/product?id=123</code>\r\n            </React.Fragment>\r\n          ]}\r\n          hintVariant=\"simple\"\r\n          hintIsCompact={true}\r\n        />\r\n      )}\r\n      \r\n      {/* Campo de Payload de Resposta Rpida */}\r\n      {button.type === 'QUICK_REPLY' && (\r\n        <div className={styles.formGroup}>\r\n          <Input\r\n            type=\"text\"\r\n            name=\"OptinalPayload\"\r\n            label=\"Payload\"\r\n            hintMessage=\"O payload  o texto que ser enviado ao seu sistema quando o usurio clicar no boto.\"\r\n            hintVariant=\"simple\"\r\n            value={button.payload || ''}\r\n            onChange={(e) => updateButtonField(buttonIndex, 'payload', e.target.value)}\r\n            placeholder=\"Deixe vazio para usar o texto do boto como payload\"\r\n            hintIsCompact={true}\r\n            onFocus={handleFocus}\r\n            onBlur={handleBlur}\r\n          />\r\n        </div>\r\n      )}\r\n      \r\n      {/* Campo de Nmero de Telefone */}\r\n      {button.type === 'PHONE_NUMBER' && (\r\n    <Input\r\n    id={`button-${buttonIndex}-phone`}\r\n    name={`button-${buttonIndex}-phone`}\r\n    type=\"tel\"\r\n    label=\"Nmero de Telefone\"\r\n    value={button.phoneNumber || ''}\r\n    onChange={(e) => {\r\n      // O componente Input j envia apenas os dgitos no e.target.value\r\n      // No precisamos fazer nenhum processamento adicional aqui\r\n      updateButtonField(buttonIndex, 'phoneNumber', e.target.value);\r\n    }}\r\n    placeholder=\"5521999999999\"\r\n    required\r\n    variant=\"phoneNumber\"\r\n    validateOnChange\r\n    onFocus={handleFocus}\r\n    onBlur={handleBlur}\r\n    rightElement={button.phoneNumber && (\r\n      <Button\r\n        type=\"button\"\r\n        className={styles.testActionButton}\r\n        onClick={testPhoneNumber}\r\n        title=\"Testar este nmero\"\r\n        size=\"small\"\r\n        variant='outline'\r\n      >\r\n        {phoneTested ? (\r\n          <>\r\n            <FiCheckCircle size={14} />\r\n            <span>Testado</span>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <FiPhone size={14} />\r\n            <span>Testar</span>\r\n          </>\r\n        )}\r\n      </Button>\r\n    )}\r\n    hintMessage={showHints}\r\n    hintTitle=\"Formato do nmero de telefone:\"\r\n    hintList={[\r\n      \"Inclua o cdigo do pas (Brasil: 55)\",\r\n      \"Inclua o cdigo de rea sem o zero\",\r\n      \"No use espaos, parnteses ou hfens\"\r\n    ]}\r\n    hintVariant=\"simple\"\r\n    hintIsCompact={true}\r\n  />\r\n)}\r\n\r\n      {totalButtons > 1 && (\r\n        <div className={styles.buttonActions}>\r\n          <button\r\n            type=\"button\"\r\n            className={styles.removeButton}\r\n            onClick={handleRemoveButton}\r\n          >\r\n            {numCards > 1 ? \"Remover Boto em Todos os Cards\" : \"Remover Boto\"}\r\n          </button>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Mensagem de Validao */}\r\n      {validationMessage && (\r\n        <div className={styles.validationMessage}>\r\n          <FiAlertCircle className={styles.validationIcon} />\r\n          {validationMessage}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n\r\nButtonEditor.propTypes = {\r\n  index: PropTypes.number.isRequired,\r\n  buttonIndex: PropTypes.number.isRequired,\r\n  button: PropTypes.object.isRequired,\r\n  updateButtonField: PropTypes.func.isRequired,\r\n  removeButton: PropTypes.func.isRequired,\r\n  totalButtons: PropTypes.number.isRequired,\r\n  showHints: PropTypes.bool,\r\n  validationMessage: PropTypes.string,\r\n  cards: PropTypes.array.isRequired,\r\n  numCards: PropTypes.number.isRequired,\r\n  syncButtonTypes: PropTypes.func.isRequired,\r\n  setFocusedInput: PropTypes.func.isRequired\r\n};\r\n\r\nexport default ButtonEditor;\r\n","// extracted by mini-css-extract-plugin\nexport default {\"cardContainer\":\"CardTemplateEditor_cardContainer__SsVV1\",\"invalidCard\":\"CardTemplateEditor_invalidCard__io5EL\",\"collapsedCard\":\"CardTemplateEditor_collapsedCard__vNJrB\",\"cardHeader\":\"CardTemplateEditor_cardHeader__khEpo\",\"cardTitleSection\":\"CardTemplateEditor_cardTitleSection__M+BSm\",\"cardTitle\":\"CardTemplateEditor_cardTitle__edRyr\",\"cardIndicator\":\"CardTemplateEditor_cardIndicator__tVq1B\",\"cardActions\":\"CardTemplateEditor_cardActions__p7fpm\",\"validationBadge\":\"CardTemplateEditor_validationBadge__-mJR1\",\"expandButton\":\"CardTemplateEditor_expandButton__f7r5f\",\"expanded\":\"CardTemplateEditor_expanded__6ZmfP\",\"fileHandleInfo\":\"CardTemplateEditor_fileHandleInfo__sq7oe\",\"fileHandleLabel\":\"CardTemplateEditor_fileHandleLabel__GLter\",\"fileHandleWrapper\":\"CardTemplateEditor_fileHandleWrapper__Uou4L\",\"fileHandleValue\":\"CardTemplateEditor_fileHandleValue__cce5q\",\"copyButton\":\"CardTemplateEditor_copyButton__QltsO\",\"copyIcon\":\"CardTemplateEditor_copyIcon__fy6pQ\",\"tooltipText\":\"CardTemplateEditor_tooltipText__7go9z\",\"fadeInOut\":\"CardTemplateEditor_fadeInOut__2F4kW\",\"previewButton\":\"CardTemplateEditor_previewButton__mrrQT\",\"validationMessage\":\"CardTemplateEditor_validationMessage__FvDR4\",\"fadeIn\":\"CardTemplateEditor_fadeIn__vgaGM\",\"warningIcon\":\"CardTemplateEditor_warningIcon__Tpiyh\",\"imagePreviewContainer\":\"CardTemplateEditor_imagePreviewContainer__8NFQ6\",\"imagePreview\":\"CardTemplateEditor_imagePreview__LowFd\",\"closePreviewButton\":\"CardTemplateEditor_closePreviewButton__sIw0e\",\"cardContent\":\"CardTemplateEditor_cardContent__vhPrg\",\"fadeContent\":\"CardTemplateEditor_fadeContent__DbKJb\",\"editorTabs\":\"CardTemplateEditor_editorTabs__PLmHZ\",\"editorTab\":\"CardTemplateEditor_editorTab__Q13wr\",\"activeTab\":\"CardTemplateEditor_activeTab__6pn4l\",\"buttonCount\":\"CardTemplateEditor_buttonCount__vfdzR\",\"cardFieldSection\":\"CardTemplateEditor_cardFieldSection__6AO4+\",\"fieldHeader\":\"CardTemplateEditor_fieldHeader__PAjtO\",\"fieldLabel\":\"CardTemplateEditor_fieldLabel__FirBD\",\"invalidInput\":\"CardTemplateEditor_invalidInput__kG17K\",\"changedField\":\"CardTemplateEditor_changedField__CekUx\",\"highlightChange\":\"CardTemplateEditor_highlightChange__uOk11\",\"buttonsSection\":\"CardTemplateEditor_buttonsSection__kM9K1\",\"buttonsList\":\"CardTemplateEditor_buttonsList__rzoL3\",\"buttonItem\":\"CardTemplateEditor_buttonItem__Hu4rM\",\"noButtonsMessage\":\"CardTemplateEditor_noButtonsMessage__rkrG5\",\"addButton\":\"CardTemplateEditor_addButton__-0MII\",\"collapsedPreview\":\"CardTemplateEditor_collapsedPreview__nkhdV\",\"collapsedField\":\"CardTemplateEditor_collapsedField__jMcL1\",\"collapsedLabel\":\"CardTemplateEditor_collapsedLabel__VaN3O\",\"collapsedValue\":\"CardTemplateEditor_collapsedValue__1vaS6\",\"emptyText\":\"CardTemplateEditor_emptyText__3QQlO\",\"collapsedValidation\":\"CardTemplateEditor_collapsedValidation__bo9LS\",\"validationIcon\":\"CardTemplateEditor_validationIcon__7DFfo\",\"validationText\":\"CardTemplateEditor_validationText__npd+k\"};","// components/editors/CardTemplateEditor.js\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport ButtonEditor from './ButtonEditor';\r\nimport { useAlert } from '../ui/AlertMessage/AlertContext'; // Adicionar esta importao\r\nimport { \r\n  FiMaximize2, \r\n  FiMinimize2, \r\n  FiEye, \r\n  FiEyeOff, \r\n  FiAlertCircle, \r\n  FiLink, \r\n  FiCheck, \r\n  FiMessageSquare,\r\n  FiPlus,\r\n  FiInfo\r\n} from 'react-icons/fi';\r\nimport styles from './CardTemplateEditor.module.css';\r\nimport Input from '../ui/Input/Input';\r\nimport Hints from '../ui/Hints/Hints'; // Import the Hints component\r\n\r\nconst CardTemplateEditor = ({ \r\n  id, \r\n  index, \r\n  card, \r\n  cards, \r\n  updateCard,\r\n  showHints = true,\r\n  validationMessage,\r\n  numCards = 2,\r\n  setFocusedInput,\r\n  focusedInput\r\n}) => {\r\n  // Inicializar sistema de alertas\r\n  const alert = useAlert();\r\n  \r\n  const [isExpanded, setIsExpanded] = useState(true);\r\n  const [showImagePreview, setShowImagePreview] = useState(false);\r\n  const [copySuccess, setCopySuccess] = useState(false);\r\n  const [activeSection, setActiveSection] = useState('text');\r\n  const [changedFields, setChangedFields] = useState([]);\r\n  const textareaRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (changedFields.length > 0) {\r\n      const timer = setTimeout(() => {\r\n        setChangedFields([]);\r\n      }, 3000);\r\n      \r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [changedFields]);\r\n\r\n  const maxTextLength = 160;\r\n  const isTextValid = !!card.bodyText;\r\n\r\n  const handleBodyTextChange = useCallback((e) => {\r\n    updateCard(index, 'bodyText', e.target.value);\r\n    if (!changedFields.includes('bodyText')) {\r\n      setChangedFields(prev => [...prev, 'bodyText']);\r\n    }\r\n  }, [updateCard, index, changedFields]);\r\n\r\n  const updateButtons = useCallback((newButtons) => {\r\n    updateCard(index, 'buttons', newButtons);\r\n    if (!changedFields.includes('buttons')) {\r\n      setChangedFields(prev => [...prev, 'buttons']);\r\n    }\r\n  }, [updateCard, index, changedFields]);\r\n\r\n  const syncButtonTypes = useCallback((buttonIndex, newType) => {\r\n    if (index === 0 && numCards > 1) {\r\n      for (let cardIndex = 1; cardIndex < numCards; cardIndex++) {\r\n        const otherCard = cards[cardIndex];\r\n        if (otherCard.buttons.length > buttonIndex) {\r\n          const cardButtons = [...otherCard.buttons];\r\n          const existingButton = cardButtons[buttonIndex];\r\n          cardButtons[buttonIndex] = {\r\n            ...existingButton,\r\n            type: newType,\r\n            ...(newType === 'URL' && !existingButton.url ? { url: '' } : {}),\r\n            ...(newType === 'PHONE_NUMBER' && !existingButton.phoneNumber ? { phoneNumber: '' } : {}),\r\n            ...(newType === 'QUICK_REPLY' && !existingButton.payload ? { payload: '' } : {})\r\n          };\r\n          updateCard(cardIndex, 'buttons', cardButtons);\r\n        }\r\n      }\r\n    }\r\n  }, [index, cards, numCards, updateCard]);\r\n\r\n  const addButton = useCallback(() => {\r\n    if (card.buttons.length < 2) {\r\n      const buttonType = card.buttons[0]?.type || 'QUICK_REPLY';\r\n      const newButtons = [...card.buttons, { type: buttonType, text: '' }];\r\n      updateButtons(newButtons);\r\n      \r\n      if (index === 0 && numCards > 1) {\r\n        for (let cardIndex = 1; cardIndex < numCards; cardIndex++) {\r\n          const cardButtons = [...cards[cardIndex].buttons];\r\n          cardButtons.push({ type: buttonType, text: '' });\r\n          updateCard(cardIndex, 'buttons', cardButtons);\r\n        }\r\n        \r\n        // Alerta quando adicionar boto no primeiro card (sincronizao)\r\n        alert.info(\"Boto adicionado em todos os cards para manter a consistncia exigida pelo WhatsApp.\", {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 4000\r\n        });\r\n      } else if (index > 0) {\r\n        // Substituir o alert padro pelo novo sistema de alertas\r\n        alert.warning(\"Para manter a consistncia do WhatsApp, adicionaremos este boto em todos os cards.\", {\r\n          position: 'top-center'\r\n        });\r\n        \r\n        for (let cardIndex = 0; cardIndex < numCards; cardIndex++) {\r\n          if (cardIndex !== index) {\r\n            const cardButtons = [...cards[cardIndex].buttons];\r\n            cardButtons.push({ type: buttonType, text: '' });\r\n            updateCard(cardIndex, 'buttons', cardButtons);\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      // Alerta quando tentar adicionar mais de 2 botes\r\n      alert.warning(\"O WhatsApp permite no mximo 2 botes por card.\", {\r\n        position: 'top-center'\r\n      });\r\n    }\r\n  }, [card.buttons, updateButtons, cards, updateCard, index, numCards, alert]);\r\n\r\n  const removeButton = useCallback((buttonIndex) => {\r\n    const newButtons = card.buttons.filter((_, i) => i !== buttonIndex);\r\n    updateButtons(newButtons);\r\n    \r\n    if (numCards > 1) {\r\n      // Alerta quando remover boto (sincronizao)\r\n      alert.warning(\"O boto ser removido de todos os cards para manter a consistncia exigida pelo WhatsApp.\", {\r\n        position: 'top-center',\r\n        autoCloseTime: 3000\r\n      });\r\n      \r\n      for (let cardIndex = 0; cardIndex < numCards; cardIndex++) {\r\n        if (cardIndex !== index) {\r\n          const cardButtons = cards[cardIndex].buttons.filter((_, i) => i !== buttonIndex);\r\n          updateCard(cardIndex, 'buttons', cardButtons);\r\n        }\r\n      }\r\n    }\r\n  }, [card.buttons, updateButtons, cards, updateCard, index, numCards, alert]);\r\n\r\n  const updateButtonField = useCallback((buttonIndex, field, value) => {\r\n    const newButtons = [...card.buttons];\r\n    newButtons[buttonIndex] = { ...newButtons[buttonIndex], [field]: value };\r\n    updateButtons(newButtons);\r\n    if (field === 'type' && index === 0 && numCards > 1) {\r\n      syncButtonTypes(buttonIndex, value);\r\n      \r\n      // Alerta quando mudar o tipo de boto no primeiro card (sincronizao)\r\n      alert.info(`Tipo de boto sincronizado em todos os cards: ${value}`, {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 3000\r\n      });\r\n    }\r\n  }, [card.buttons, updateButtons, syncButtonTypes, index, numCards, alert]);\r\n\r\n  const getCardColor = useCallback(() => {\r\n    const colors = [\r\n      'var(--blip-action)',\r\n      'var(--mountain-meadow)',\r\n      'var(--marigold-yellow)',\r\n      'var(--chilean-fire)',\r\n      'var(--windsor)',\r\n      'var(--extended-ocean-light)',\r\n      'var(--extended-ocean-dark)',\r\n      'var(--extended-blue-light)',\r\n      'var(--extended-blue-dark)',\r\n      'var(--extended-green-light)',\r\n      'var(--extended-green-dark)',\r\n      'var(--extended-yellow-light)',\r\n      'var(--extended-yellow-dark)',\r\n      'var(--extended-orange-light)',\r\n      'var(--extended-orange-dark)',\r\n      'var(--extended-red-light)',\r\n      'var(--extended-red-dark)',\r\n      'var(--extended-pink-light)',\r\n      'var(--extended-pink-dark)',\r\n      'var(--extended-gray-light)',\r\n      'rgba(30, 107, 241, 1)', // --color-surface-primary\r\n      'rgba(1, 114, 62, 1)', // --color-surface-positive\r\n      'rgba(138, 0, 0, 1)', // --color-surface-negative\r\n      'rgba(30, 107, 241, 1)', // --color-primary\r\n      'rgba(41, 41, 41, 1)', // --color-secondary\r\n      'rgba(0, 122, 66, 1)', // --color-positive\r\n      'rgba(138, 0, 0, 1)', // --color-negative\r\n      'rgba(230, 15, 15, 1)', // --color-delete\r\n      '#C5D9FB', // --blip-light\r\n      '#0096fa', // --blip-blue-brand\r\n      '#1968F0', // --blip-action\r\n      '#0C4EC0', // --blip-dark\r\n      '#072F73', // --blip-night\r\n      'rgba(0, 150, 250, 1)', // --color-brand\r\n    ];\r\n    return colors[index % colors.length];\r\n  }, [index]);\r\n\r\n  const copyFileHandle = useCallback(() => {\r\n    if (card.fileHandle) {\r\n      navigator.clipboard.writeText(card.fileHandle)\r\n        .then(() => {\r\n          setCopySuccess(true);\r\n          \r\n          // Alerta quando copiar o ID do arquivo\r\n          alert.success(\"ID do arquivo copiado para a rea de transferncia!\", {\r\n            position: 'bottom-right',\r\n            autoCloseTime: 2000\r\n          });\r\n          \r\n          setTimeout(() => setCopySuccess(false), 2000);\r\n        })\r\n        .catch(err => {\r\n          console.error('Error copying:', err);\r\n          \r\n          // Alerta em caso de erro ao copiar\r\n          alert.error(\"No foi possvel copiar o ID do arquivo\", {\r\n            position: 'bottom-right'\r\n          });\r\n        });\r\n    } else {\r\n      // Alerta quando no houver ID para copiar\r\n      alert.warning(\"Este card no possui ID de arquivo para copiar\", {\r\n        position: 'bottom-right'\r\n      });\r\n    }\r\n  }, [card.fileHandle, alert]);\r\n\r\n  const renderTextPanel = () => (\r\n    <div className={styles.cardFieldSection}>\r\n      <Input\r\n        id={`card-${index}-text`}\r\n        name=\"cardText\"\r\n        label=\"Texto do card\"\r\n        ref={textareaRef}\r\n        type=\"textarea\"\r\n        className={`\r\n          ${!isTextValid && card.bodyText !== '' ? styles.invalidInput : ''} \r\n          ${changedFields.includes('bodyText') ? styles.changedField : ''}\r\n        `}\r\n        rows={4}\r\n        value={card.bodyText || ''}\r\n        onChange={handleBodyTextChange}\r\n        placeholder=\"Descreva o produto ou servio de forma clara e objetiva.\"\r\n        maxLength={maxTextLength}\r\n        allowFormatting={true}\r\n        textFormatting={true}\r\n        textFormattingCompact={true}\r\n        textFormattingDarkMode={false}\r\n        showCharCounter\r\n        characterCounterVariant=\"default\"\r\n        required\r\n        hintMessage={showHints}\r\n        hintVariant=\"simple\"\r\n        hintTitle=\"Dicas para um bom texto:\"\r\n        hintList={[\r\n          \"Mantenha entre 60-120 caracteres para melhor legibilidade.\",\r\n          \"Foque nos principais benefcios ou diferenciais.\",\r\n          \"Evite repetir informaes que j esto na imagem.\",\r\n          \"Use frases diretas e insira chamadas para ao.\",\r\n          \"Use formatao para destaque: *negrito*, _itlico_, ~tachado~, `cdigo`.\",\r\n          \"Para listas: * para tpicos, 1. para numerao.\",\r\n          \"Para citaes, comece a linha com >.\"\r\n        ]}\r\n        validateOnChange={true}\r\n        validateOnBlur={true}\r\n        error={!isTextValid && card.bodyText !== '' ? \"O texto no atende aos requisitos mnimos.\" : \"\"}\r\n      />\r\n    </div>\r\n  );\r\n\r\n  const renderButtonsPanel = () => (\r\n    <div className={styles.buttonsSection}>\r\n      {index === 0 && numCards > 1 && (\r\n        <Hints\r\n        variant=\"whatsapp\"\r\n        isCompact\r\n        title=\"Melhores Prticas para Botes:\"\r\n        list={[\r\n          <strong>\"Requisito do WhatsApp:\"</strong>, \"Todos os cards devem ter o mesmo nmero e tipos de botes.\",\r\n          \"As alteraes feitas no Card 1 sero sincronizadas automaticamente com os outros cards.\"\r\n        ]}\r\n      />\r\n      )}\r\n    \r\n      {card.buttons.length > 0 ? (\r\n        <div className={styles.buttonsList}>\r\n          {card.buttons.map((button, buttonIndex) => (\r\n            <div \r\n              key={buttonIndex} \r\n              className={`\r\n                ${styles.buttonItem} \r\n                ${changedFields.includes('buttons') ? styles.changedField : ''}\r\n              `}\r\n            >\r\n\r\n<ButtonEditor\r\n  key={buttonIndex}\r\n  index={index}\r\n  buttonIndex={buttonIndex}\r\n  button={button}\r\n  updateButtonField={updateButtonField}\r\n  removeButton={() => removeButton(buttonIndex)}\r\n  totalButtons={card.buttons.length}\r\n  showHints={showHints}\r\n  cards={cards}\r\n  numCards={numCards}\r\n  syncButtonTypes={syncButtonTypes}\r\n  setFocusedInput={setFocusedInput}\r\n/>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className={styles.noButtonsMessage}>\r\n          <FiAlertCircle size={18} />\r\n          Nenhum boto adicionado. Cada card deve ter pelo menos um boto.\r\n        </div>\r\n      )}\r\n      \r\n      {card.buttons.length < 2 && (\r\n        <button \r\n          onClick={addButton}\r\n          className={styles.addButton}\r\n        >\r\n          <FiPlus size={16} />\r\n          {numCards > 1 ? \"Adicionar Boto a Todos os Cards\" : \"Adicionar Boto\"}\r\n        </button>\r\n      )}\r\n      \r\n      {showHints && (\r\n        <Hints\r\n          variant=\"simple\"\r\n          title=\"Melhores Prticas para Botes:\"\r\n          list={[\r\n            \"Use um texto claro e orientado para ao (ex.: 'Compre Agora', 'Saiba Mais')\",\r\n            \"Mantenha o texto do boto com menos de 20 caracteres\",\r\n            \"Cada card pode ter at 2 botes\",\r\n            \"Para URLs, sempre inclua o prefixo https://\",\r\n            \"Para nmeros de telefone, use o formato internacional (+XXXXXXXXXXX)\",\r\n            \"Requisito do WhatsApp: Todos os cards devem ter os mesmos tipos de botes na mesma ordem\"\r\n          ]}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  const renderCollapsedContent = () => (\r\n    <div className={styles.collapsedPreview}>\r\n      <div className={styles.collapsedField}>\r\n        <span className={styles.collapsedLabel}>Texto:</span>\r\n        <span className={styles.collapsedValue}>\r\n          {card.bodyText ? \r\n            (card.bodyText.length > 40 ? card.bodyText.substring(0, 40) + '...' : card.bodyText) : \r\n            <em className={styles.emptyText}>Not defined</em>}\r\n        </span>\r\n      </div>\r\n      <div className={styles.collapsedField}>\r\n        <span className={styles.collapsedLabel}>Buttons:</span>\r\n        <span className={styles.collapsedValue}>\r\n          {card.buttons.length > 0 ? \r\n            card.buttons.map(b => b.text || 'No text').join(', ') : \r\n            <em className={styles.emptyText}>No buttons</em>}\r\n        </span>\r\n      </div>\r\n      {validationMessage && (\r\n        <div className={styles.collapsedValidation}>\r\n          <FiAlertCircle size={14} className={styles.validationIcon} />\r\n          <span className={styles.validationText}>{validationMessage}</span>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div \r\n      id={id} \r\n      className={`${styles.cardContainer} ${validationMessage ? styles.invalidCard : ''} ${isExpanded ? '' : styles.collapsedCard}`}\r\n      style={{ borderLeftColor: getCardColor() }}\r\n    >\r\n      <div className={styles.cardHeader}>\r\n        <div className={styles.cardTitleSection}>\r\n          <h3 className={styles.cardTitle}>\r\n            Card {index + 1}\r\n            <span className={styles.cardIndicator} style={{ backgroundColor: getCardColor() }}></span>\r\n          </h3>\r\n          \r\n          {card.fileHandle && (\r\n            <div className={styles.fileHandleInfo}>\r\n              <span className={styles.fileHandleLabel}>File ID:</span> \r\n              <div className={styles.fileHandleWrapper}>\r\n                <span className={styles.fileHandleValue}>{card.fileHandle}</span>\r\n                <button \r\n                  className={styles.copyButton}\r\n                  onClick={copyFileHandle}\r\n                  title=\"Copy file ID\"\r\n                  aria-label=\"Copy file ID\"\r\n                >\r\n                  {copySuccess ? (\r\n                    <>\r\n                      <FiCheck className={styles.copyIcon} />\r\n                      <span className={styles.tooltipText}>Copied!</span>\r\n                    </>\r\n                  ) : (\r\n                    <FiLink className={styles.copyIcon} />\r\n                  )}\r\n                </button>\r\n              </div>\r\n              \r\n              {card.fileType === 'image' && (\r\n                <button \r\n                  className={styles.previewButton}\r\n                  onClick={() => setShowImagePreview(!showImagePreview)}\r\n                >\r\n                  {showImagePreview ? <FiEyeOff size={14} /> : <FiEye size={14} />}\r\n                  {showImagePreview ? 'Esconder imagem' : 'Mostrar imagem'}\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        <div className={styles.cardActions}>\r\n          {validationMessage && (\r\n            <div className={styles.validationBadge} title={validationMessage}>\r\n              <FiAlertCircle size={16} />\r\n            </div>\r\n          )}\r\n          \r\n          <button \r\n            className={`${styles.expandButton} ${isExpanded ? styles.expanded : ''}`}\r\n            onClick={() => setIsExpanded(!isExpanded)}\r\n            aria-label={isExpanded ? \"Minimizar\" : \"Expandir\"}\r\n          >\r\n            {isExpanded ? <FiMinimize2 size={18} /> : <FiMaximize2 size={18} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      \r\n      {validationMessage && (\r\n        <div className={styles.validationMessage}>\r\n          <FiAlertCircle className={styles.warningIcon} />\r\n          {validationMessage}\r\n        </div>\r\n      )}\r\n      \r\n      {showImagePreview && card.fileUrl && card.fileType === 'image' && (\r\n        <div className={styles.imagePreviewContainer}>\r\n          <img \r\n            src={card.fileUrl} \r\n            alt={`Preview of card ${index + 1}`} \r\n            className={styles.imagePreview}\r\n          />\r\n          <button \r\n            className={styles.closePreviewButton}\r\n            onClick={() => setShowImagePreview(false)}\r\n            aria-label=\"Close preview\"\r\n          >\r\n            \r\n          </button>\r\n        </div>\r\n      )}\r\n      \r\n      {isExpanded ? (\r\n        <div className={styles.cardContent}>\r\n          <div className={styles.editorTabs}>\r\n            <button \r\n              className={`${styles.editorTab} ${activeSection === 'text' ? styles.activeTab : ''}`}\r\n              onClick={() => setActiveSection('text')}\r\n            >\r\n              <FiMessageSquare size={16} />\r\n              Card Text\r\n            </button>\r\n            <button \r\n              className={`${styles.editorTab} ${activeSection === 'buttons' ? styles.activeTab : ''}`}\r\n              onClick={() => setActiveSection('buttons')}\r\n            >\r\n              <FiLink size={16} />\r\n              Buttons\r\n              <span className={styles.buttonCount}>({card.buttons.length}/2)</span>\r\n            </button>\r\n          </div>\r\n          \r\n          {activeSection === 'text' && renderTextPanel()}\r\n          {activeSection === 'buttons' && renderButtonsPanel()}\r\n        </div>\r\n      ) : renderCollapsedContent()}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CardTemplateEditor;","// extracted by mini-css-extract-plugin\nexport default {\"phoneMockup\":\"CarouselPreview_phoneMockup__ltRlE\",\"phoneStatusBar\":\"CarouselPreview_phoneStatusBar__kT+QK\",\"phoneIcons\":\"CarouselPreview_phoneIcons__DbLMQ\",\"whatsappHeader\":\"CarouselPreview_whatsappHeader__XosO6\",\"backButton\":\"CarouselPreview_backButton__Q+48x\",\"moreButton\":\"CarouselPreview_moreButton__NEh4r\",\"contactInfo\":\"CarouselPreview_contactInfo__ndm54\",\"contactAvatar\":\"CarouselPreview_contactAvatar__Xsl9I\",\"contactName\":\"CarouselPreview_contactName__Jd7Cv\",\"chatWindow\":\"CarouselPreview_chatWindow__Y4ugR\",\"messageBodyText\":\"CarouselPreview_messageBodyText__-dcYJ\",\"cardBody\":\"CarouselPreview_cardBody__hGJMu\",\"multiline-code\":\"CarouselPreview_multiline-code__G2YWE\",\"inline-code\":\"CarouselPreview_inline-code__M74vC\",\"blockquote\":\"CarouselPreview_blockquote__7kjNi\",\"list-item\":\"CarouselPreview_list-item__fRmUI\",\"bullet\":\"CarouselPreview_bullet__t9oKr\",\"number\":\"CarouselPreview_number__xy7i9\",\"variable\":\"CarouselPreview_variable__6t+7A\",\"carouselContainer\":\"CarouselPreview_carouselContainer__wp+3B\",\"navButton\":\"CarouselPreview_navButton__c4-kB\",\"prevButton\":\"CarouselPreview_prevButton__i2eMw\",\"nextButton\":\"CarouselPreview_nextButton__Vx3kS\",\"cardsContainer\":\"CarouselPreview_cardsContainer__eAYFs\",\"grab\":\"CarouselPreview_grab__Oe5l+\",\"grabbing\":\"CarouselPreview_grabbing__aKI2B\",\"cardsWrapper\":\"CarouselPreview_cardsWrapper__+H0HF\",\"card\":\"CarouselPreview_card__1Cc3F\",\"cardHeader\":\"CarouselPreview_cardHeader__Le5kS\",\"cardImage\":\"CarouselPreview_cardImage__V7k0J\",\"cardVideo\":\"CarouselPreview_cardVideo__3eeIA\",\"videoContainer\":\"CarouselPreview_videoContainer__YevPu\",\"playButton\":\"CarouselPreview_playButton__FaYxa\",\"placeholderImage\":\"CarouselPreview_placeholderImage__En3ai\",\"placeholderText\":\"CarouselPreview_placeholderText__HT0yh\",\"cardButtons\":\"CarouselPreview_cardButtons__pPd++\",\"cardButton\":\"CarouselPreview_cardButton__HGTsO\",\"buttonIcon\":\"CarouselPreview_buttonIcon__PW1mL\",\"separator\":\"CarouselPreview_separator__YgAnC\",\"dots\":\"CarouselPreview_dots__vXsd2\",\"dot\":\"CarouselPreview_dot__rrAv7\",\"activeDot\":\"CarouselPreview_activeDot__uzKMV\",\"activeCard\":\"CarouselPreview_activeCard__+S79E\",\"fadeIn\":\"CarouselPreview_fadeIn__y6O3w\",\"inactiveCard\":\"CarouselPreview_inactiveCard__55Njv\",\"grabIndicator\":\"CarouselPreview_grabIndicator__sOn3Z\",\"mockupContainer\":\"CarouselPreview_mockupContainer__GTjrD\",\"scale-container\":\"CarouselPreview_scale-container__nrLRg\",\"disabledButton\":\"CarouselPreview_disabledButton__vStqa\",\"loadingIndicator\":\"CarouselPreview_loadingIndicator__dHZt-\",\"spin\":\"CarouselPreview_spin__ZNwac\",\"disableOverlay\":\"CarouselPreview_disableOverlay__F9VoB\",\"fadeOverlay\":\"CarouselPreview_fadeOverlay__Y4jsw\",\"disableMessage\":\"CarouselPreview_disableMessage__hG3qx\",\"disabled\":\"CarouselPreview_disabled__A6hG5\",\"cardHighlighted\":\"CarouselPreview_cardHighlighted__cuORo\",\"highlightPulse\":\"CarouselPreview_highlightPulse__jOmWM\",\"buttonHighlighted\":\"CarouselPreview_buttonHighlighted__Z8nqc\"};","// previews/CarouselPreview.js com suporte para desabilitar interao\r\nimport React, { useState, useMemo, useRef, useEffect, useImperativeHandle, forwardRef } from 'react';\r\nimport styles from './CarouselPreview.module.css';\r\nimport { FiImage, FiPlay, FiChevronLeft, FiLock } from \"react-icons/fi\";\r\n\r\n// Constantes para configuraes\r\nconst CONFIG = {\r\n  MAX_BODY_TEXT_LENGTH: 1024,\r\n  MAX_CARD_TEXT_LENGTH: 160,\r\n  MAX_BUTTON_TEXT_LENGTH: 25,\r\n  TRANSITION_DURATION: 300, // Durao da transio em ms\r\n  TRANSITION_TIMEOUT: 400, // Timeout um pouco maior que a durao\r\n};\r\n\r\n// Componente de cones\r\nconst ButtonIcon = ({ type }) => {\r\n  const iconMap = {\r\n    QUICK_REPLY: (\r\n      <svg viewBox=\"0 0 395 395\" xmlns=\"http://www.w3.org/2000/svg\">\r\n        <path fill=\"currentColor\" d=\"M355.596 369.39C353.405 369.42 351.247 368.866 349.342 367.783C347.437 366.701 345.856 365.13 344.761 363.233C328.362 335.296 304.988 312.098 276.928 295.91C248.869 279.722 217.086 271.099 184.693 270.886V344.764C184.68 347.195 183.949 349.567 182.59 351.583C181.232 353.599 179.307 355.168 177.059 356.092C174.816 357.034 172.345 357.292 169.956 356.832C167.568 356.372 165.369 355.214 163.637 353.506L15.8824 205.751C14.7283 204.606 13.8123 203.244 13.1872 201.744C12.5621 200.243 12.2402 198.634 12.2402 197.009C12.2402 195.383 12.5621 193.774 13.1872 192.273C13.8123 190.773 14.7283 189.411 15.8824 188.266L163.637 40.5113C165.369 38.8028 167.568 37.6454 169.956 37.1852C172.345 36.7251 174.816 36.9827 177.059 37.9256C179.307 38.8493 181.232 40.418 182.59 42.4338C183.949 44.4497 184.68 46.8226 184.693 49.2535V124.485C235.634 131.028 282.458 155.87 316.438 194.382C350.419 232.893 369.237 282.446 369.386 333.805C369.357 342.039 368.823 350.263 367.786 358.431C367.478 360.993 366.374 363.393 364.628 365.293C362.883 367.193 360.585 368.497 358.059 369.02L355.596 369.39ZM178.536 246.26C209.939 245.809 241.066 252.182 269.765 264.937C298.464 277.692 324.052 296.526 344.761 320.138C341.056 275.471 321.558 233.586 289.764 201.995C257.97 170.404 215.961 151.175 171.271 147.757C168.202 147.479 165.347 146.061 163.273 143.781C161.198 141.501 160.054 138.526 160.067 135.444V78.9276L41.9858 197.009L160.067 315.09V258.573C160.067 255.308 161.364 252.176 163.673 249.867C165.982 247.558 169.114 246.26 172.38 246.26H179.029H178.536Z \" />\r\n      </svg>\r\n    ),\r\n    URL: (\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 32 32\">\r\n        <path fill=\"currentColor\" d=\"M5 5v22h22V5zm2 2h18v18H7zm6 3v2h5.563L9.28 21.281l1.438 1.438L20 13.437V19h2v-9z\" />\r\n      </svg>\r\n    ),\r\n    PHONE_NUMBER: (\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 14 14\">\r\n        <path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\"\r\n          d=\"M8.76 13a3.19 3.19 0 0 0 4-.44l.45-.44a1.08 1.08 0 0 0 0-1.51L11.3 8.72a1.07 1.07 0 0 0-1.5 0h0a1.08 1.08 0 0 1-1.51 0l-3-3a1.06 1.06 0 0 1 0-1.51h0a1.07 1.07 0 0 0 0-1.5L3.39.81a1.08 1.08 0 0 0-1.51 0l-.44.45a3.19 3.19 0 0 0-.44 4A28.94 28.94 0 0 0 8.76 13Z\" />\r\n      </svg>\r\n    )\r\n  };\r\n\r\n  return iconMap[type] || null;\r\n};\r\n\r\n// Truncagem de texto reutilizvel\r\nconst truncateText = (text, maxLength) => {\r\n  if (!text) return '';\r\n  return text.length > maxLength\r\n    ? `${text.slice(0, maxLength)}...`\r\n    : text;\r\n};\r\n\r\n// Formata o texto com marcao WhatsApp\r\nconst formatWhatsAppText = (text) => {\r\n  if (!text) return '';\r\n\r\n  // Substituir variveis \r\n  let formattedText = text.replace(/\\{\\{(\\d+)\\}\\}/g, (_, number) => {\r\n    return `<span class=\"${styles.variable}\">{{${number}}}</span>`;\r\n  });\r\n\r\n  // Negrito: *texto*\r\n  formattedText = formattedText.replace(/\\*([^*\\n]+)\\*/g, '<strong>$1</strong>');\r\n\r\n  // Itlico: _texto_\r\n  formattedText = formattedText.replace(/\\_([^_\\n]+)\\_/g, '<em>$1</em>');\r\n\r\n  // Tachado: ~texto~\r\n  formattedText = formattedText.replace(/\\~([^~\\n]+)\\~/g, '<del>$1</del>');\r\n\r\n  // Cdigo: ```texto```\r\n  formattedText = formattedText.replace(/```([^`]+)```/g, '<code class=\"multiline-code\">$1</code>');\r\n\r\n  // Cdigo inline: `texto`\r\n  formattedText = formattedText.replace(/`([^`\\n]+)`/g, '<code class=\"inline-code\">$1</code>');\r\n\r\n  // Lista com marcadores: * texto ou - texto\r\n  formattedText = formattedText.replace(/^[*-]\\s(.+)$/gm, '<div class=\"list-item\"><span class=\"bullet\"></span> $1</div>');\r\n\r\n  // Lista numerada: 1. texto\r\n  formattedText = formattedText.replace(/^(\\d+)\\.\\s(.+)$/gm, '<div class=\"list-item\"><span class=\"number\">$1.</span> $2</div>');\r\n\r\n  // Citao: > texto\r\n  formattedText = formattedText.replace(/^>\\s(.+)$/gm, '<span class=\"blockquote\" style=\"padding: 5px 0 5px 10px; border-left: 3px solid #128C7E; border-radius: 3px; color: #272727; display: block; width: 100%; margin: 5px 0; background-color: rgba(0, 0, 0, 0.04);\">$1</span>');\r\n  formattedText = formattedText.replace(/&gt;\\s(.+)/g, '<span class=\"blockquote\" style=\"padding: 5px 0 5px 10px; border-left: 3px solid #128C7E; border-radius: 3px; color: #272727; display: block; width: 100%; margin: 5px 0; background-color: rgba(0, 0, 0, 0.04);\">$1</span>');\r\n\r\n  // Quebra de linha\r\n  formattedText = formattedText.replace(/\\n/g, '<br/>');\r\n\r\n  return formattedText;\r\n};\r\n\r\n// Componente de Boto de Navegao\r\nconst NavButton = ({ direction, onClick, disabled = false }) => (\r\n  <button\r\n    className={`${styles.navButton} ${styles[`${direction}Button`]} ${disabled ? styles.disabledButton : ''}`}\r\n    onClick={onClick}\r\n    disabled={disabled}\r\n    aria-label={`${direction === 'prev' ? 'Anterior' : 'Prximo'} card`}\r\n  >\r\n    <svg\r\n      width=\"18\"\r\n      height=\"18\"\r\n      viewBox=\"0 0 24 24\"\r\n      fill=\"none\"\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      <path\r\n        d={direction === 'prev'\r\n          ? \"M15 18L9 12L15 6\"\r\n          : \"M9 18L15 12L9 6\"\r\n        }\r\n        stroke=\"currentColor\"\r\n        strokeWidth=\"2\"\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n      />\r\n    </svg>\r\n  </button>\r\n);\r\n\r\n// Componente Principal com forwardRef para expor mtodos\r\nconst CarouselPreview = forwardRef(({\r\n  cards = [],\r\n  bodyText = 'Exemplo de Body Text',\r\n  contactName = 'Blip CDA',\r\n  disableInteraction = false,\r\n  focusedInput\r\n}, ref) => {\r\n  const [currentCardIndex, setCurrentCardIndex] = useState(0);\r\n  const cardsWrapperRef = useRef(null);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [startPosition, setStartPosition] = useState(0);\r\n  const [currentTranslate, setCurrentTranslate] = useState(0);\r\n  const [prevTranslate, setPrevTranslate] = useState(0);\r\n  const [dragOffset, setDragOffset] = useState(0);\r\n  const [isTransitioning, setIsTransitioning] = useState(false);\r\n  const transitionTimeoutRef = useRef(null);\r\n  const dragStartTimeRef = useRef(0);\r\n  const lastTouchEnd = useRef(0);\r\n  const mediaLoadedRef = useRef({});\r\n\r\n  useEffect(() => {\r\n    if (focusedInput && focusedInput.cardIndex !== null) {\r\n      setCurrentCardIndex(focusedInput.cardIndex);\r\n      updateTranslatePosition(focusedInput.cardIndex);\r\n    }\r\n  }, [focusedInput]);\r\n\r\n  // Expe mtodos para controle externo via ref\r\n  useImperativeHandle(ref, () => ({\r\n    // Vai para o prximo card\r\n    goToNextCard: () => {\r\n      if (!isTransitioning) {\r\n        goToNextCard();\r\n      }\r\n    },\r\n    // Vai para o card anterior\r\n    goToPrevCard: () => {\r\n      if (!isTransitioning) {\r\n        goToPrevCard();\r\n      }\r\n    },\r\n    // Vai para um card especfico\r\n    goToCard: (index) => {\r\n      if (isTransitioning) return;\r\n      \r\n      if (index >= 0 && index < cards.length) {\r\n        setCurrentCardIndex(index);\r\n        updateTranslatePosition(index);\r\n      }\r\n    },\r\n    // Obtm o array de cards\r\n    getCards: () => cards,\r\n    // Obtm o ndice atual\r\n    getCurrentIndex: () => currentCardIndex,\r\n    // Obtm a quantidade total de cards\r\n    getTotalCards: () => cards.length,\r\n    // Verifica se est em transio\r\n    isTransitioning: () => isTransitioning\r\n  }));\r\n\r\n  // Funo auxiliar para verificar se todos os elementos de mdia esto carregados\r\n  const checkMediaLoaded = (index) => {\r\n    return mediaLoadedRef.current[index] === true;\r\n  };\r\n\r\n  // Atualiza a posio de translao com base no ndice atual\r\n  const updateTranslatePosition = (index, animate = true) => {\r\n    const cardWidth = 90; // Largura dos cards\r\n    const gap = 1.45; // Espao entre os cards\r\n    const newTranslate = -(index * (cardWidth + gap));\r\n    \r\n    // Define que est em transio\r\n    if (animate) {\r\n      setIsTransitioning(true);\r\n      \r\n      // Limpa timeout anterior se existir\r\n      if (transitionTimeoutRef.current) {\r\n        clearTimeout(transitionTimeoutRef.current);\r\n      }\r\n      \r\n      // Define um timeout para marcar o fim da transio\r\n      transitionTimeoutRef.current = setTimeout(() => {\r\n        setIsTransitioning(false);\r\n      }, CONFIG.TRANSITION_TIMEOUT);\r\n    }\r\n    \r\n    setCurrentTranslate(newTranslate);\r\n    setPrevTranslate(newTranslate);\r\n    setDragOffset(0);\r\n  };\r\n\r\n  // Navegao cclica dos cards\r\n  const goToPrevCard = () => {\r\n    // Evita mltiplas navegaes durante uma transio\r\n    if (isTransitioning) return;\r\n    \r\n    setCurrentCardIndex(prev => {\r\n      const newIndex = prev === 0 ? cards.length - 1 : prev - 1;\r\n      updateTranslatePosition(newIndex);\r\n      return newIndex;\r\n    });\r\n  };\r\n\r\n  const goToNextCard = () => {\r\n    // Evita mltiplas navegaes durante uma transio\r\n    if (isTransitioning) return;\r\n    \r\n    setCurrentCardIndex(prev => {\r\n      const newIndex = prev === cards.length - 1 ? 0 : prev + 1;\r\n      updateTranslatePosition(newIndex);\r\n      return newIndex;\r\n    });\r\n  };\r\n\r\n  // Funo para pr-carregar imagens e vdeos\r\n  const preloadMedia = (cardIndex) => {\r\n    if (!cards[cardIndex] || mediaLoadedRef.current[cardIndex]) return;\r\n    \r\n    const card = cards[cardIndex];\r\n    \r\n    if (card.fileUrl) {\r\n      if (card.fileType === 'image') {\r\n        const img = new Image();\r\n        img.onload = () => {\r\n          mediaLoadedRef.current[cardIndex] = true;\r\n        };\r\n        img.onerror = () => {\r\n          mediaLoadedRef.current[cardIndex] = true; // Marcamos como carregado mesmo em caso de erro\r\n        };\r\n        img.src = card.fileUrl;\r\n      } else if (card.fileType === 'video') {\r\n        const video = document.createElement('video');\r\n        video.preload = 'metadata';\r\n        video.onloadedmetadata = () => {\r\n          mediaLoadedRef.current[cardIndex] = true;\r\n        };\r\n        video.onerror = () => {\r\n          mediaLoadedRef.current[cardIndex] = true; // Marcamos como carregado mesmo em caso de erro\r\n        };\r\n        video.src = card.fileUrl;\r\n      }\r\n    } else {\r\n      // Se no tiver mdia, marcar como carregado\r\n      mediaLoadedRef.current[cardIndex] = true;\r\n    }\r\n  };\r\n\r\n  // Pr-carregar as mdias dos cards adjacentes\r\n  useEffect(() => {\r\n    if (cards.length === 0) return;\r\n    \r\n    // Pr-carregar o card atual, o prximo e o anterior\r\n    preloadMedia(currentCardIndex);\r\n    \r\n    // Prximo card (considerando navegao cclica)\r\n    const nextIndex = currentCardIndex === cards.length - 1 ? 0 : currentCardIndex + 1;\r\n    preloadMedia(nextIndex);\r\n    \r\n    // Card anterior (considerando navegao cclica)\r\n    const prevIndex = currentCardIndex === 0 ? cards.length - 1 : currentCardIndex - 1;\r\n    preloadMedia(prevIndex);\r\n  }, [currentCardIndex, cards]);\r\n\r\n  // Manipuladores para interao de arrasto\r\n  const dragStart = (event) => {\r\n    // Se a interao estiver desabilitada, no permitir arrasto\r\n    if (disableInteraction) return;\r\n    \r\n    // Evitar duplicao de eventos em dispositivos touch\r\n    if (event.type === 'touchstart') {\r\n      const now = Date.now();\r\n      if (now - lastTouchEnd.current < 300) {\r\n        event.preventDefault();\r\n      }\r\n    }\r\n    \r\n    // No iniciar arrasto durante transio\r\n    if (isTransitioning) return;\r\n    \r\n    // Pegando a posio inicial do toque ou clique\r\n    const position = event.type.includes('mouse')\r\n      ? event.pageX\r\n      : event.touches[0].clientX;\r\n  \r\n    setIsDragging(true);\r\n    setStartPosition(position);\r\n    \r\n    // Registrar o tempo de incio do arrasto\r\n    dragStartTimeRef.current = Date.now();\r\n  };\r\n\r\n  const dragMove = (event) => {\r\n    // Se a interao estiver desabilitada, no permitir movimento\r\n    if (disableInteraction) return;\r\n    \r\n    if (!isDragging) return;\r\n\r\n    // Evitar scroll padro da pgina durante o arrasto\r\n    event.preventDefault();\r\n\r\n    // Calculando a posio atual\r\n    const currentPosition = event.type.includes('mouse')\r\n      ? event.pageX\r\n      : event.touches[0].clientX;\r\n\r\n    // Calculando a distncia do arrasto e convertendo em porcentagem relativa  largura do wrapper\r\n    const wrapperWidth = cardsWrapperRef.current ? cardsWrapperRef.current.offsetWidth : 1;\r\n    const movePercent = ((currentPosition - startPosition) / wrapperWidth) * 100;\r\n\r\n    // Limitar o arrasto para evitar que ultrapasse muito os limites\r\n    const maxOffset = 100; // Porcentagem mxima de arrasto\r\n    const clampedMovePercent = Math.max(Math.min(movePercent, maxOffset), -maxOffset);\r\n\r\n    // Registrando o offset atual do arrasto\r\n    setDragOffset(clampedMovePercent);\r\n\r\n    // Aplicando a nova translao\r\n    setCurrentTranslate(prevTranslate + clampedMovePercent);\r\n  };\r\n\r\n  const dragEnd = () => {\r\n    // Se a interao estiver desabilitada, no continuar\r\n    if (disableInteraction) return;\r\n    \r\n    if (!isDragging) return;\r\n  \r\n    setIsDragging(false);\r\n    \r\n    // Registrar o timestamp do ltimo toque\r\n    if (window.event && !window.event.type.includes('mouse')) {\r\n      lastTouchEnd.current = Date.now();\r\n    }\r\n  \r\n    // Calcular a velocidade do arrasto\r\n    const currentTime = Date.now();\r\n    const timeElapsed = currentTime - dragStartTimeRef.current;\r\n    const dragSpeed = Math.abs(dragOffset) / (timeElapsed || 1); // Evitar diviso por zero\r\n    \r\n    // Threshold dinmico baseado na velocidade do arrasto\r\n    // Se for um arrasto rpido, o threshold  menor\r\n    let threshold = 15; // Threshold padro\r\n    if (dragSpeed > 0.5) { // Arrasto rpido\r\n      threshold = 5;\r\n    }\r\n  \r\n    let newIndex = currentCardIndex;\r\n  \r\n    if (dragOffset > threshold) {\r\n      // Arrastou para direita (card anterior)\r\n      newIndex = Math.max(0, currentCardIndex - 1);\r\n    } else if (dragOffset < -threshold) {\r\n      // Arrastou para esquerda (prximo card)\r\n      newIndex = Math.min(cards.length - 1, currentCardIndex + 1);\r\n    }\r\n  \r\n    // Se o ndice mudou, aplicamos a transio suave\r\n    if (newIndex !== currentCardIndex) {\r\n      setCurrentCardIndex(newIndex);\r\n      updateTranslatePosition(newIndex, true);\r\n    } else {\r\n      // Se no houve mudana de card, voltamos para a posio original com animao\r\n      updateTranslatePosition(currentCardIndex, true);\r\n    }\r\n  };\r\n\r\n  // Registrando eventos de mouse e toque\r\n  useEffect(() => {\r\n    const wrapper = cardsWrapperRef.current;\r\n    if (!wrapper) return;\r\n\r\n    // Funo de tratamento de erros para eventos de toque\r\n    const handleTouchStart = (e) => {\r\n      try {\r\n        dragStart(e);\r\n      } catch (error) {\r\n        console.error(\"Erro em touchstart:\", error);\r\n      }\r\n    };\r\n\r\n    const handleTouchMove = (e) => {\r\n      try {\r\n        dragMove(e);\r\n      } catch (error) {\r\n        console.error(\"Erro em touchmove:\", error);\r\n      }\r\n    };\r\n\r\n    const handleTouchEnd = (e) => {\r\n      try {\r\n        dragEnd(e);\r\n      } catch (error) {\r\n        console.error(\"Erro em touchend:\", error);\r\n      }\r\n    };\r\n\r\n    // Para dispositivos com toque\r\n    wrapper.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n    wrapper.addEventListener('touchmove', handleTouchMove, { passive: false });\r\n    wrapper.addEventListener('touchend', handleTouchEnd);\r\n\r\n    // Para navegadores desktop\r\n    wrapper.addEventListener('mousedown', dragStart);\r\n    window.addEventListener('mousemove', dragMove);\r\n    window.addEventListener('mouseup', dragEnd);\r\n\r\n    return () => {\r\n      // Limpeza dos event listeners\r\n      wrapper.removeEventListener('touchstart', handleTouchStart);\r\n      wrapper.removeEventListener('touchmove', handleTouchMove);\r\n      wrapper.removeEventListener('touchend', handleTouchEnd);\r\n\r\n      wrapper.removeEventListener('mousedown', dragStart);\r\n      window.removeEventListener('mousemove', dragMove);\r\n      window.removeEventListener('mouseup', dragEnd);\r\n    };\r\n  }, [isDragging, startPosition, prevTranslate, currentCardIndex, dragOffset, isTransitioning, disableInteraction]);\r\n\r\n  // Inicializao do carrossel\r\n  useEffect(() => {\r\n    if (cards.length > 0) {\r\n      updateTranslatePosition(currentCardIndex, false);\r\n    }\r\n  }, [cards.length]);\r\n\r\n  // Memoizao dos dots para performance\r\n  const navigationDots = useMemo(() => (\r\n    <div className={styles.dots}>\r\n      {cards.map((_, index) => (\r\n        <div\r\n          key={index}\r\n          className={`${styles.dot} ${index === currentCardIndex ? styles.activeDot : ''}`}\r\n          onClick={() => {\r\n            // No permitir clique durante pr-renderizao\r\n            if (disableInteraction || isTransitioning) return;\r\n            \r\n            setCurrentCardIndex(index);\r\n            updateTranslatePosition(index);\r\n          }}\r\n          style={{ cursor: disableInteraction ? 'not-allowed' : 'pointer' }}\r\n        />\r\n      ))}\r\n    </div>\r\n  ), [cards, currentCardIndex, isTransitioning, disableInteraction]);\r\n\r\n  // Renderizao condicional dos cards\r\n  const hasValidCards = cards.length > 0;\r\n\r\n  return (\r\n    <div className={styles.phoneMockup}>\r\n      <div className={styles.phoneHeader}>\r\n        <div className={styles.phoneStatusBar}>\r\n          <span>9:41</span>\r\n          <div className={styles.phoneIcons}>\r\n            <span>4G</span>\r\n            <span></span>\r\n            <span></span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className={styles.whatsappHeader}>\r\n          <div className={styles.backButton}>\r\n            <FiChevronLeft />\r\n          </div>\r\n\r\n          <div className={styles.contactInfo}>\r\n            <div className={styles.contactAvatar}></div>\r\n            <div className={styles.contactName}>{contactName}</div>\r\n          </div>\r\n\r\n          <div className={styles.moreButton}>\r\n            <svg\r\n              width=\"20\"\r\n              height=\"20\"\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"none\"\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n            >\r\n              <path\r\n                d=\"M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              />\r\n              <path\r\n                d=\"M19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 12.5523 18.4477 13 19 13Z\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              />\r\n              <path\r\n                d=\"M5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z\"\r\n                stroke=\"currentColor\"\r\n                strokeWidth=\"2\"\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n              />\r\n            </svg>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.chatWindow}>\r\n        {bodyText && (\r\n          <div\r\n            className={styles.messageBodyText}\r\n            dangerouslySetInnerHTML={{ __html: formatWhatsAppText(bodyText) }}\r\n          />\r\n        )}\r\n\r\n        {hasValidCards && (\r\n          <div className={styles.carouselContainer}>\r\n            <NavButton \r\n              direction=\"prev\" \r\n              onClick={disableInteraction ? null : goToPrevCard} \r\n              disabled={isTransitioning || disableInteraction}\r\n            />\r\n\r\n            <div className={styles.cardsContainer}>\r\n              {/* Overlay para indicar desabilitao */}\r\n              {disableInteraction && (\r\n                <div className={styles.disableOverlay}>\r\n                </div>\r\n              )}\r\n              \r\n              <div\r\n  ref={cardsWrapperRef}\r\n  className={`${styles.cardsWrapper} ${isDragging ? styles.grabbing : styles.grab} ${disableInteraction ? styles.disabled : ''}`}\r\n  style={{\r\n    transform: `translateX(${currentTranslate}%)`,\r\n    transition: isDragging ? 'none' : `transform ${CONFIG.TRANSITION_DURATION}ms cubic-bezier(0.25, 0.1, 0.25, 1)`,\r\n    //  Modifique a funo de timing para a mais suave cubic-bezier(0.25, 0.1, 0.25, 1)\r\n    pointerEvents: disableInteraction ? 'none' : 'auto'\r\n  }}\r\n>\r\n                {cards.map((card, index) => (\r\n                  <div \r\n                    key={index} \r\n                    className={`${styles.card} ${\r\n                      focusedInput && index === focusedInput.cardIndex ? styles.cardHighlighted : ''\r\n                    } ${\r\n                      index === currentCardIndex \r\n                        ? styles.activeCard \r\n                        : styles.inactiveCard\r\n                    }`}\r\n                  >\r\n                    <div className={styles.cardHeader}>\r\n                      {card.fileUrl ? (\r\n                        card.fileType === 'image' ? (\r\n                          <>\r\n                            <img\r\n                              src={card.fileUrl}\r\n                              alt={`Card ${index + 1}`}\r\n                              className={styles.cardImage}\r\n                              onLoad={() => { mediaLoadedRef.current[index] = true; }}\r\n                              onError={(e) => {\r\n                                console.log(`Erro ao carregar imagem: ${card.fileUrl}`);\r\n                                e.target.style.display = 'none';\r\n                                mediaLoadedRef.current[index] = true;\r\n                                \r\n                                // Mostrar placeholder quando a imagem falhar\r\n                                const placeholder = e.target.parentNode.querySelector(`.${styles.placeholderImage}`) || \r\n                                  document.createElement('div');\r\n                                placeholder.className = styles.placeholderImage;\r\n                                placeholder.innerHTML = `\r\n                                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                    <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                    <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" fill=\"currentColor\"/>\r\n                                    <path d=\"M21 15L16 10L5 21\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                                  </svg>\r\n                                  <div>Imagem no disponvel</div>\r\n                                `;\r\n                                if (!e.target.parentNode.querySelector(`.${styles.placeholderImage}`)) {\r\n                                  e.target.parentNode.appendChild(placeholder);\r\n                                }\r\n                              }}\r\n                            />\r\n                            <div className={styles.placeholderImage} style={{display: 'none'}}>\r\n                              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                                <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" stroke=\"currentColor\" strokeWidth=\"2\"/>\r\n                                <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\" fill=\"currentColor\"/>\r\n                                <path d=\"M21 15L16 10L5 21\" stroke=\"currentColor\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                              </svg>\r\n                            </div>\r\n                          </>\r\n                        ) : (\r\n                          <div className={styles.videoContainer} onClick={(e) => {\r\n                            if (disableInteraction) return;\r\n                            \r\n                            const video = e.currentTarget.querySelector('video');\r\n                            if (video) {\r\n                              try {\r\n                                video.play().catch(err => console.error('Erro ao reproduzir vdeo:', err));\r\n                              } catch (error) {\r\n                                console.error('Erro ao iniciar reproduo:', error);\r\n                              }\r\n                            }\r\n                          }}>\r\n                            <video\r\n                              src={card.fileUrl}\r\n                              className={styles.cardVideo}\r\n                              controls={!disableInteraction}\r\n                              autoPlay={false}\r\n                              muted={true}\r\n                              loop={true}\r\n                              playsInline={true}\r\n                              onLoadedMetadata={() => { mediaLoadedRef.current[index] = true; }}\r\n                              onError={(e) => {\r\n                                console.error(`Erro ao carregar vdeo: ${card.fileUrl}`);\r\n                                mediaLoadedRef.current[index] = true;\r\n                                e.target.style.display = 'none';\r\n                                e.target.parentNode.querySelector(`.${styles.playButton}`).style.display = 'none';\r\n                                e.target.parentNode.innerHTML += '<div class=\"videoError\">Erro ao carregar vdeo</div>';\r\n                              }}\r\n                              onPlay={(e) => e.currentTarget.nextSibling.style.display = 'none'}\r\n                              onPause={(e) => e.currentTarget.nextSibling.style.display = 'flex'}\r\n                            />\r\n                            <div className={styles.playButton}>\r\n                              <FiPlay />\r\n                            </div>\r\n                          </div>\r\n                        )\r\n                      ) : (\r\n                        <div className={styles.placeholderImage}>\r\n                          <FiImage />\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    <div className={styles.cardBody}>\r\n                      {card.bodyText ? (\r\n                        <div dangerouslySetInnerHTML={{ __html: formatWhatsAppText(card.bodyText) }} />\r\n                      ) : (\r\n                        <p className={styles.placeholderText}>Texto do card</p>\r\n                      )}\r\n                    </div>\r\n\r\n                    {card.buttons && card.buttons.length > 0 && (\r\n                      <div className={styles.cardButtons}>\r\n                        <div className={styles.separator}></div>\r\n                        {card.buttons.map((button, btnIndex) => (\r\n                          <React.Fragment key={btnIndex}>\r\n                            {btnIndex > 0 && <div className={styles.separator}></div>}\r\n                            <button\r\n                              className={styles.cardButton}\r\n                              onClick={() => {\r\n                                if (disableInteraction) return;\r\n                                console.log(`Boto ${btnIndex + 1} clicado`, button);\r\n                              }}\r\n                              disabled={disableInteraction}\r\n                              style={{ \r\n                                cursor: disableInteraction ? 'not-allowed' : 'pointer',\r\n                                opacity: disableInteraction ? 1 : 1\r\n                              }}\r\n                            >\r\n                              {button.type && (\r\n                                <span className={styles.buttonIcon}>\r\n                                  <ButtonIcon type={button.type} />\r\n                                </span>\r\n                              )}\r\n                              {truncateText(\r\n                                button.text || `Boto ${btnIndex + 1}`,\r\n                                CONFIG.MAX_BUTTON_TEXT_LENGTH\r\n                              )}\r\n                            </button>\r\n                          </React.Fragment>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <NavButton \r\n              direction=\"next\" \r\n              onClick={disableInteraction ? null : goToNextCard} \r\n              disabled={isTransitioning || disableInteraction}\r\n            />\r\n          </div>\r\n        )}\r\n\r\n        {navigationDots}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\nCarouselPreview.displayName = 'CarouselPreview';\r\n\r\nexport default CarouselPreview;","// extracted by mini-css-extract-plugin\nexport default {\"viewControls\":\"StepTwo_viewControls__Cz0WB\",\"viewToggle\":\"StepTwo_viewToggle__qHppH\",\"hintsToggle\":\"StepTwo_hintsToggle__BlGoc\",\"active\":\"StepTwo_active__7no51\",\"contentWrapper\":\"StepTwo_contentWrapper__eiquz\",\"formContainer\":\"StepTwo_formContainer__sITQ-\",\"withPreview\":\"StepTwo_withPreview__VfXYz\",\"basicDetailsSection\":\"StepTwo_basicDetailsSection__IU8d1\",\"cardEditorSection\":\"StepTwo_cardEditorSection__neMVb\",\"formGroup\":\"StepTwo_formGroup__LdQEh\",\"customSelect\":\"StepTwo_customSelect__0Z2sa\",\"cardNavigation\":\"StepTwo_cardNavigation__M2kvO\",\"cardTabs\":\"StepTwo_cardTabs__Nk2Km\",\"cardTab\":\"StepTwo_cardTab__dQDPf\",\"activeCardTab\":\"StepTwo_activeCardTab__uSOpX\",\"incompleteIndicator\":\"StepTwo_incompleteIndicator__rq9uf\",\"activeCardEditor\":\"StepTwo_activeCardEditor__L33zV\",\"previewContainer\":\"StepTwo_previewContainer__ceWxr\",\"previewWrapper\":\"StepTwo_previewWrapper__4E-7B\",\"previewTitle\":\"StepTwo_previewTitle__RsI4S\",\"previewSubtitle\":\"StepTwo_previewSubtitle__lgkXN\",\"previewContent\":\"StepTwo_previewContent__PY7T8\",\"whatsappRequirement\":\"StepTwo_whatsappRequirement__+8N9S\",\"infoIcon\":\"StepTwo_infoIcon__ThJbj\",\"progressContainer\":\"StepTwo_progressContainer__ACqA7\",\"progressBarWrapper\":\"StepTwo_progressBarWrapper__i4K+V\",\"backButton\":\"StepTwo_backButton__9h8qa\",\"saveButton\":\"StepTwo_saveButton__A0mQH\",\"nextButton\":\"StepTwo_nextButton__NHY9s\",\"container\":\"StepTwo_container__D98P3\",\"fadeIn\":\"StepTwo_fadeIn__6NMlH\"};","// components/steps/StepTwo.js - Verso melhorada\r\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport CardTemplateEditor from '../editors/CardTemplateEditor';\r\nimport CarouselPreview from '../previews/CarouselPreview';\r\nimport { useAlert } from '../ui/AlertMessage/AlertContext';\r\nimport Input from '../ui/Input/Input';\r\nimport Hints, { HintsGroup } from '../ui/Hints/Hints';\r\nimport Button from '../ui/Button/Button';\r\nimport {\r\n  FiSave,\r\n  FiCheck,\r\n  FiChevronRight,\r\n  FiChevronLeft,\r\n  FiEye,\r\n  FiEyeOff,\r\n  FiInfo,\r\n  FiCheckCircle,\r\n  FiAlertTriangle,\r\n  FiCopy,\r\n  FiCornerRightDown,\r\n  FiRefreshCw,\r\n  FiEdit,\r\n  FiSmile\r\n} from 'react-icons/fi';\r\nimport styles from './StepTwo.module.css';\r\nimport steps from '../../styles/Steps.module.css';\r\nimport progressbar from '../ui/ProgressBar/ProgressBar.module.css';\r\n\r\n/**\r\n * StepTwo - Componente melhorado para a segunda etapa de configurao do template\r\n * Corrigido para utilizar saveCurrentState em vez de saveDraftManually\r\n * \r\n * @param {Object} props Propriedades do componente\r\n * @returns {JSX.Element} Componente StepTwo\r\n */\r\nconst StepTwo = ({\r\n  templateName,\r\n  setTemplateName,\r\n  language,\r\n  setLanguage,\r\n  bodyText,\r\n  setBodyText,\r\n  cards,\r\n  numCards,\r\n  updateCard,\r\n  handleCreateTemplate,\r\n  setStep,\r\n  error,\r\n  loading,\r\n  isStepValid,\r\n  saveCurrentState, // Substitudo de saveDraftManually para saveCurrentState\r\n  unsavedChanges,\r\n  lastSavedTime,\r\n  checkButtonConsistency, // Adicionada verificao de consistncia\r\n  applyButtonStandardization // Adicionada padronizao de botes\r\n}) => {\r\n  // Inicializar sistema de alertas\r\n  const alert = useAlert();\r\n\r\n  // Estado local\r\n  const [showHints, setShowHints] = useState(true);\r\n  const [showPreview, setShowPreview] = useState(true);\r\n  const [validationMessages, setValidationMessages] = useState({});\r\n  const [activeCard, setActiveCard] = useState(0);\r\n  const [savedBeforeUpload, setSavedBeforeUpload] = useState(false);\r\n  const [buttonConsistencyStatus, setButtonConsistencyStatus] = useState({ isConsistent: true, message: \"\" });\r\n  const [focusedInput, setFocusedInput] = useState({ cardIndex: null, buttonIndex: null });\r\n  const [previewExpanded, setPreviewExpanded] = useState(false);\r\n  const [templateNameSuggestions, setTemplateNameSuggestions] = useState([]);\r\n  const [showNameSuggestions, setShowNameSuggestions] = useState(false);\r\n  \r\n  // Refs\r\n  const previewRef = useRef(null);\r\n  const formContainerRef = useRef(null);\r\n\r\n  // Verificar consistncia de botes quando os cards ou numCards mudarem\r\n  useEffect(() => {\r\n    if (typeof checkButtonConsistency === 'function' && numCards > 1) {\r\n      const consistency = checkButtonConsistency();\r\n      setButtonConsistencyStatus(consistency);\r\n    }\r\n  }, [checkButtonConsistency, cards, numCards]);\r\n\r\n  // Limpar validaes quando inputs mudam\r\n  useEffect(() => {\r\n    if (templateName) {\r\n      setValidationMessages(prev => {\r\n        const newMessages = { ...prev };\r\n        delete newMessages.templateName;\r\n        return newMessages;\r\n      });\r\n    }\r\n\r\n    if (bodyText) {\r\n      setValidationMessages(prev => {\r\n        const newMessages = { ...prev };\r\n        delete newMessages.bodyText;\r\n        return newMessages;\r\n      });\r\n    }\r\n  }, [templateName, bodyText]);\r\n\r\n  // Mostrar erros recebidos como propriedades como alertas\r\n  useEffect(() => {\r\n    if (error) {\r\n      alert.error(error, {\r\n        position: 'top-center',\r\n        autoCloseTime: 7000\r\n      });\r\n    }\r\n  }, [error, alert]);\r\n\r\n  // Status de validao\r\n  const isTemplateNameValid = templateName && templateName.length >= 3;\r\n  const isBodyTextValid = bodyText && bodyText.length > 0;\r\n\r\n  // Gerar sugestes de nome de template com base no bodyText\r\n  useEffect(() => {\r\n    if (bodyText && !templateName) {\r\n      const words = bodyText\r\n        .toLowerCase()\r\n        .replace(/[^\\w\\s]/gi, '')\r\n        .split(' ')\r\n        .filter(word => word.length > 3)\r\n        .slice(0, 3);\r\n      \r\n      if (words.length > 0) {\r\n        const suggestions = [\r\n          words.join('_').substring(0, 20),\r\n          `carousel_${words[0]}`,\r\n          `template_${words[0]}`\r\n        ];\r\n        \r\n        setTemplateNameSuggestions(suggestions);\r\n        setShowNameSuggestions(true);\r\n      }\r\n    }\r\n  }, [bodyText, templateName]);\r\n\r\n  // Validao completa de cards e botes\r\n  const validateCards = useCallback(() => {\r\n    const messages = {};\r\n    let allValid = true;\r\n    let validationErrors = [];\r\n\r\n    cards.slice(0, numCards).forEach((card, index) => {\r\n      if (!card.bodyText) {\r\n        messages[`card-${index}`] = `O texto do Card ${index + 1}  obrigatrio`;\r\n        validationErrors.push(`Card ${index + 1}: texto obrigatrio`);\r\n        allValid = false;\r\n      }\r\n\r\n      if (card.buttons.some(button => !button.text)) {\r\n        messages[`card-${index}-buttons`] = `Todos os botes do Card ${index + 1} devem ter texto`;\r\n        validationErrors.push(`Card ${index + 1}: todos os botes precisam de texto`);\r\n        allValid = false;\r\n      }\r\n\r\n      card.buttons.forEach((button, btnIndex) => {\r\n        if (button.type === 'URL' && !button.url) {\r\n          messages[`card-${index}-button-${btnIndex}`] = `URL  obrigatrio para o boto ${btnIndex + 1}`;\r\n          validationErrors.push(`Card ${index + 1}, Boto ${btnIndex + 1}: URL obrigatrio`);\r\n          allValid = false;\r\n        }\r\n        if (button.type === 'PHONE_NUMBER' && !button.phoneNumber) {\r\n          messages[`card-${index}-button-${btnIndex}`] = `Nmero de telefone  obrigatrio para o boto ${btnIndex + 1}`;\r\n          validationErrors.push(`Card ${index + 1}, Boto ${btnIndex + 1}: nmero de telefone obrigatrio`);\r\n          allValid = false;\r\n        }\r\n      });\r\n    });\r\n\r\n    setValidationMessages(messages);\r\n\r\n    // Se tivermos erros, mostramos um alerta com as informaes\r\n    if (!allValid && validationErrors.length > 0) {\r\n      alert.error(`Problemas de validao encontrados:\\n${validationErrors.join('\\n')}`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 7000\r\n      });\r\n    }\r\n\r\n    return allValid;\r\n  }, [cards, numCards, alert]);\r\n\r\n  // Melhorado o handler para continuar, inclui validao e padronizao\r\n  const handleContinue = useCallback(async () => {\r\n    // Validar nome do template\r\n    if (!isTemplateNameValid) {\r\n      alert.warning(\"O nome do template deve ter pelo menos 3 caracteres\", {\r\n        position: 'top-center'\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Validar texto de introduo\r\n    if (!isBodyTextValid) {\r\n      alert.warning(\"A mensagem de introduo  obrigatria\", {\r\n        position: 'top-center'\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Verificar consistncia de botes se houver mais de um card\r\n    if (numCards > 1 && typeof checkButtonConsistency === 'function') {\r\n      const consistency = checkButtonConsistency();\r\n\r\n      if (!consistency.isConsistent) {\r\n        // Mostrar alerta sobre a inconsistncia\r\n        const shouldStandardize = window.confirm(\r\n          \"Os cards possuem configuraes diferentes de botes, o que no  permitido pelo WhatsApp.\\n\\n\" +\r\n          \"Deseja padronizar os botes automaticamente baseado no primeiro card?\\n\\n\" +\r\n          \"Clique em OK para padronizar ou Cancelar para revisar manualmente.\"\r\n        );\r\n\r\n        if (shouldStandardize) {\r\n          // Padronizar botes e continuar\r\n          if (typeof applyButtonStandardization === 'function') {\r\n            applyButtonStandardization();\r\n\r\n            // Pequena pausa para processar as mudanas\r\n            await new Promise(resolve => setTimeout(resolve, 500));\r\n            \r\n            // Mostrar alerta de sucesso para padronizao\r\n            alert.success(\"Botes padronizados com sucesso!\", {\r\n              position: 'bottom-right',\r\n              autoCloseTime: 3000\r\n            });\r\n          }\r\n        } else {\r\n          // Usurio escolheu revisar manualmente\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    // Validar os cards\r\n    if (validateCards()) {\r\n      try {\r\n        // Salvar antes de criar o template\r\n        if (typeof saveCurrentState === 'function') {\r\n          saveCurrentState();\r\n        }\r\n      \r\n        // Tenta criar o template\r\n        await handleCreateTemplate();\r\n      \r\n        // REMOVER o alerta de sucesso daqui\r\n        // Agora o alerta vir do apiService\r\n      } catch (err) {\r\n        // Capturar e mostrar erros como alertas\r\n        alert.error(`Erro ao criar template: ${err.message || 'Falha desconhecida'}`, {\r\n          position: 'top-center',\r\n          autoCloseTime: 7000\r\n        });\r\n      }}\r\n  }, [\r\n    isTemplateNameValid,\r\n    isBodyTextValid,\r\n    validateCards,\r\n    handleCreateTemplate,\r\n    alert,\r\n    saveCurrentState,\r\n    numCards,\r\n    checkButtonConsistency,\r\n    applyButtonStandardization\r\n  ]);\r\n\r\n  // Salvar rascunho\r\n  const handleSaveBeforeUpload = useCallback(() => {\r\n    // Verificar se a funo saveCurrentState existe\r\n    if (typeof saveCurrentState === 'function') {\r\n      const success = saveCurrentState();\r\n\r\n      if (success) {\r\n        setSavedBeforeUpload(true);\r\n\r\n        // Adicionar alerta de sucesso\r\n        alert.success(\"Rascunho salvo com sucesso!\", {\r\n          position: 'bottom-right',\r\n          autoCloseTime: 3000\r\n        });\r\n\r\n        setTimeout(() => {\r\n          setSavedBeforeUpload(false);\r\n        }, 5000);\r\n      } else {\r\n        // Mostrar erro se o salvamento falhou\r\n        alert.error(\"No foi possvel salvar o rascunho. Verifique o armazenamento local.\", {\r\n          position: 'top-center',\r\n          autoCloseTime: 5000\r\n        });\r\n      }\r\n    } else {\r\n      // Mostrar erro se a funo no estiver disponvel\r\n      console.error(\"Funo saveCurrentState no est disponvel\");\r\n      alert.error(\"No foi possvel salvar o rascunho. Tente novamente mais tarde.\", {\r\n        position: 'top-center'\r\n      });\r\n    }\r\n  }, [saveCurrentState, alert]);\r\n\r\n  // Verifica se o passo est completo\r\n  const checkStepValidity = useCallback(() => {\r\n    // Se a funo isStepValid no estiver disponvel, fazer validao local\r\n    if (typeof isStepValid !== 'function') {\r\n      // Verificar nome do template e texto\r\n      if (!isTemplateNameValid || !isBodyTextValid) {\r\n        return false;\r\n      }\r\n\r\n      // Verificar cards\r\n      return validateCards();\r\n    }\r\n\r\n    // Se a funo isStepValid estiver disponvel, usar ela\r\n    return isStepValid(2);\r\n  }, [isStepValid, isTemplateNameValid, isBodyTextValid, validateCards]);\r\n  \r\n  // Funo para copiar texto para o clipboard\r\n  const copyToClipboard = useCallback((text) => {\r\n    navigator.clipboard.writeText(text).then(() => {\r\n      alert.info(\"Texto copiado para a rea de transferncia\", {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 2000\r\n      });\r\n    }).catch(err => {\r\n      console.error('Erro ao copiar texto: ', err);\r\n      alert.error(\"Falha ao copiar texto\", {\r\n        position: 'bottom-right'\r\n      });\r\n    });\r\n  }, [alert]);\r\n\r\n  // Aplicar uma sugesto de nome de template\r\n  const applyNameSuggestion = useCallback((suggestion) => {\r\n    setTemplateName(suggestion);\r\n    setShowNameSuggestions(false);\r\n    \r\n    alert.success(\"Nome do template aplicado!\", {\r\n      position: 'bottom-right',\r\n      autoCloseTime: 2000\r\n    });\r\n  }, [setTemplateName, alert]);\r\n\r\n  // Toggle para expandir/recolher a prvia\r\n  const togglePreviewExpanded = useCallback(() => {\r\n    setPreviewExpanded(!previewExpanded);\r\n    \r\n    if (previewRef.current) {\r\n      if (!previewExpanded) {\r\n        // Expandindo a prvia: salva o scroll atual, depois faz scroll para a prvia\r\n        setTimeout(() => {\r\n          previewRef.current.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n        }, 100);\r\n      } else {\r\n        // Recolhendo a prvia: retorna para onde estava\r\n        formContainerRef.current?.scrollIntoView({ behavior: 'smooth', block: 'start' });\r\n      }\r\n    }\r\n  }, [previewExpanded]);\r\n\r\n  // Calcula o percentual de concluso baseado no progresso\r\n  const completionPercentage = [\r\n    isTemplateNameValid,\r\n    isBodyTextValid,\r\n    cards.slice(0, numCards).every(card => card.bodyText),\r\n    cards.slice(0, numCards).every(card => card.buttons.every(button => button.text)),\r\n  ].filter(Boolean).length * 25;\r\n\r\n  // Opes de idioma para o dropdown\r\n  const languageOptions = [\r\n    { code: \"pt_BR\", name: \"Portugus (Brasil)\" },\r\n    { code: \"en_US\", name: \"English (United States)\" },\r\n    { code: \"es_ES\", name: \"Espaol (Espaa)\" },\r\n    { code: \"fr_FR\", name: \"Franais (France)\" },\r\n    { code: \"it_IT\", name: \"Italiano (Italia)\" },\r\n    { code: \"de_DE\", name: \"Deutsch (Deutschland)\" },\r\n    { code: \"ja_JP\", name: \" ()\" },\r\n    { code: \"ko_KR\", name: \" ()\" },\r\n    { code: \"zh_CN\", name: \" ()\" },\r\n    { code: \"ar_SA\", name: \" (  )\" }\r\n  ];\r\n\r\n  return (\r\n    <div className={steps.container}>\r\n      <div className={steps.introStepWrapper}>\r\n        <h2 className={steps.stepTitle}>Criao de Template</h2>\r\n        <p className={steps.stepDescription}>\r\n          Configure os detalhes do seu template, adicione os textos iniciais dos cartes, adicione formatao para os textos e veja o preview logo ao lado!\r\n        </p>\r\n        \r\n        {/* Barra de progresso da etapa */}\r\n        <div className={steps.stepProgressContainer}>\r\n          <div className={steps.stepProgressBar}>\r\n            <div \r\n              className={steps.stepProgressFill} \r\n              style={{width: `${completionPercentage}%`}}\r\n            ></div>\r\n          </div>\r\n          <span className={steps.stepProgressText}>\r\n            {completionPercentage === 100 ? 'Pronto para continuar!' : `${completionPercentage}% completo`}\r\n          </span>\r\n        </div>\r\n      </div>\r\n\r\n      <div className={styles.viewControls}>\r\n          <Button\r\n            className={styles.viewToggle}\r\n            onClick={() => setShowPreview(!showPreview)}\r\n            aria-label={showPreview ? \"Ocultar visualizao\" : \"Mostrar visualizao\"}\r\n            variant=\"text\"\r\n            color=\"content\"\r\n            size=\"small\"\r\n            iconLeft={showPreview ? <FiEyeOff size={16} /> : <FiEye size={16} />}\r\n          >\r\n            {showPreview ? \"Ocultar visualizao\" : \"Mostrar visualizao\"}\r\n          </Button>\r\n\r\n          <Button\r\n            className={styles.hintsToggle}\r\n            onClick={() => setShowHints(!showHints)}\r\n            aria-label={showHints ? \"Ocultar dicas\" : \"Mostrar dicas\"}\r\n            variant=\"text\"\r\n            color=\"content\"\r\n            size=\"small\"\r\n            iconLeft={<FiInfo size={16} />}\r\n          >\r\n            {showHints ? \"Ocultar dicas\" : \"Mostrar dicas\"}\r\n          </Button>\r\n        </div>\r\n        \r\n      <div className={`${styles.contentWrapper} ${previewExpanded ? styles.previewExpanded : ''}`}>\r\n        <div \r\n          className={`${styles.formContainer} ${showPreview ? styles.withPreview : ''}`}\r\n          ref={formContainerRef}\r\n        >\r\n          <div className={steps.containerCard}>\r\n            <div className={steps.sectionHeader}>\r\n              <div className={steps.sectionIconContainer}>\r\n              <FiEdit size={24}/>\r\n              </div>\r\n              <h3>Informaes Bsicas</h3>\r\n            </div>\r\n\r\n            <div className={styles.formFields}>\r\n              <div className={styles.templateNameWrapper}>\r\n                <Input\r\n                  id=\"templateName\"\r\n                  name=\"templateName\"\r\n                  label=\"Nome do Template\"\r\n                  value={templateName}\r\n                  onChange={(e) => setTemplateName(e.target.value)}\r\n                  placeholder=\"Exemplo: meu_carrossel_promocional\"\r\n                  required\r\n                  minLength={3}\r\n                  maxLength={64}\r\n                  error={validationMessages.templateName || (templateName && !isTemplateNameValid ? \"O nome do template deve ter pelo menos 3 caracteres.\" : \"\")}\r\n                  hintMessage={showHints ? \"Escolha um nome descritivo, sem espaos.\" : \"\"}\r\n                  hintVariant=\"info\"\r\n                  hintList={[\"Use _ para separar palavras\", \"Exemplo: 'promo_verao' ou 'lancamento_produto'\"]}\r\n                  size=\"medium\"\r\n                  fullWidth\r\n                  clearable\r\n                  variant=\"templateName\"\r\n                  allowFormatting\r\n                  validateOnChange\r\n                  hintIsCompact={true}\r\n                />\r\n                \r\n                {/* {showNameSuggestions && templateNameSuggestions.length > 0 && (\r\n                  <div className={styles.nameSuggestions}>\r\n                    <span className={styles.suggestionLabel}>Sugestes de nome:</span>\r\n                    <div className={styles.suggestionButtons}>\r\n                      {templateNameSuggestions.map((suggestion, index) => (\r\n                        <Button\r\n                          key={index}\r\n                          variant=\"outline\"\r\n                          color=\"primary\"\r\n                          size=\"small\"\r\n                          onClick={() => applyNameSuggestion(suggestion)}\r\n                          className={styles.suggestionButton}\r\n                        >\r\n                          {suggestion}\r\n                          <FiCornerRightDown size={14} />\r\n                        </Button>\r\n                      ))}\r\n                    </div>\r\n                    <button \r\n                      className={styles.dismissSuggestions}\r\n                      onClick={() => setShowNameSuggestions(false)}\r\n                    >\r\n                      Dispensar sugestes\r\n                    </button>\r\n                  </div>\r\n                )} */}\r\n\r\n                </div>\r\n\r\n              <Input\r\n                id=\"language\"\r\n                name=\"language\"\r\n                label=\"Idioma do Template\"\r\n                value={language}\r\n                onChange={(e) => setLanguage(e.target.value)}\r\n                placeholder=\"Escolha um idioma\"\r\n                required\r\n                isDropdown={true}\r\n                options={languageOptions}\r\n                optionLabelKey=\"name\"\r\n                optionValueKey=\"code\"\r\n                hintMessage={showHints ? \"Selecione o idioma principal do seu template. O idioma correto facilita a aprovao pelo WhatsApp.\" : \"\"}\r\n                hintVariant=\"simple\"\r\n                size=\"medium\"\r\n                fullWidth\r\n                hintIsCompact={true}\r\n                searchable\r\n              />\r\n\r\n              <div className={styles.bodyTextContainer}>\r\n                <Input\r\n                  id=\"bodyText\"\r\n                  name=\"bodyText\"\r\n                  type=\"textarea\"\r\n                  label=\"Mensagem de introduo\"\r\n                  value={bodyText}\r\n                  onChange={(e) => setBodyText(e.target.value)}\r\n                  placeholder=\"Esse texto aparecer antes do carrossel. Seja claro e envolvente para seus clientes.\"\r\n                  maxLength={1024}\r\n                  rows={3}\r\n                  required\r\n                  error={validationMessages.bodyText || (bodyText === \"\" ? \"A mensagem de introduo  obrigatria.\" : \"\")}\r\n                  hintMessage={showHints ? \"Escreva de forma objetiva e cativante. Esse texto introduz o carrossel e aparece acima na conversa.\" : \"\"}\r\n                  textFormatting\r\n                  hintVariant=\"simple\"\r\n                  size=\"medium\"\r\n                  fullWidth\r\n                  showCharCounter\r\n                  clearable\r\n                  hintIsCompact={true}\r\n                />\r\n                \r\n                {/* <div className={styles.textActions}>\r\n                  <Button\r\n                    variant=\"text\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                    iconLeft={<FiCopy size={14} />}\r\n                    onClick={() => copyToClipboard(bodyText)}\r\n                    className={styles.textActionButton}\r\n                  >\r\n                    Copiar texto\r\n                  </Button>\r\n                  \r\n                  <Button\r\n                    variant=\"text\"\r\n                    color=\"primary\"\r\n                    size=\"small\"\r\n                    iconLeft={<FiSmile size={14} />}\r\n                    onClick={() => setBodyText(prev => prev + \" \")}\r\n                    className={styles.textActionButton}\r\n                  >\r\n                    Adicionar emoji\r\n                  </Button>\r\n                </div> */}\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Alerta de inconsistncia de botes */}\r\n          {numCards > 1 && !buttonConsistencyStatus.isConsistent && (\r\n            <div className={styles.buttonInconsistencyWarning}>\r\n              <FiAlertTriangle size={20} />\r\n              <div>\r\n                <h4>Ateno! Inconsistncia de botes detectada</h4>\r\n                <p>{buttonConsistencyStatus.message}</p>\r\n                {typeof applyButtonStandardization === 'function' && (\r\n                  <Button\r\n                    variant=\"outline\"\r\n                    color=\"warning\"\r\n                    size=\"small\"\r\n                    onClick={() => {\r\n                      applyButtonStandardization();\r\n                      alert.success(\"Botes padronizados com sucesso!\", {\r\n                        position: 'bottom-right'\r\n                      });\r\n                    }}\r\n                  >\r\n                    Padronizar botes automaticamente\r\n                  </Button>\r\n                )}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div className={steps.containerCard}>\r\n          <div className={steps.sectionHeader}>\r\n              <div className={steps.sectionIconContainer}>\r\n              <FiEdit size={24}/>\r\n              </div>\r\n              <h3>Contedo dos Cards</h3>\r\n            </div>\r\n\r\n            <div className={styles.cardTabs}>\r\n              {cards.slice(0, numCards).map((_, index) => (\r\n                <Button\r\n                  key={index}\r\n                  className={`${styles.cardTab} ${activeCard === index ? styles.activeCardTab : ''}`}\r\n                  onClick={() => setActiveCard(index)}\r\n                  variant={activeCard === index ? \"solid\" : \"outline\"}\r\n                  color={activeCard === index ? \"primary\" : \"content\"}\r\n                  size=\"small\"\r\n                >\r\n                  Card {index + 1}\r\n                  {!cards[index].bodyText && <span className={styles.incompleteIndicator}>!</span>}\r\n                </Button>\r\n              ))}\r\n              \r\n              {/* <div className={styles.cardNavButtons}>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  color=\"content\"\r\n                  size=\"small\"\r\n                  iconLeft={<FiChevronLeft size={16} />}\r\n                  onClick={() => setActiveCard(prev => Math.max(0, prev - 1))}\r\n                  disabled={activeCard === 0}\r\n                  className={styles.navButton}\r\n                >\r\n                  Anterior\r\n                </Button>\r\n                \r\n                <Button\r\n                  variant=\"outline\"\r\n                  color=\"content\"\r\n                  size=\"small\"\r\n                  iconRight={<FiChevronRight size={16} />}\r\n                  onClick={() => setActiveCard(prev => Math.min(numCards - 1, prev + 1))}\r\n                  disabled={activeCard === numCards - 1}\r\n                  className={styles.navButton}\r\n                >\r\n                  Prximo\r\n                </Button>\r\n              </div> */}\r\n            </div>\r\n\r\n            <div className={styles.activeCardEditor}>\r\n              {cards[activeCard] && (\r\n                <CardTemplateEditor\r\n                  id={`card-${activeCard}`}\r\n                  index={activeCard}\r\n                  card={cards[activeCard]}\r\n                  cards={cards}\r\n                  updateCard={updateCard}\r\n                  showHints={showHints}\r\n                  numCards={numCards}\r\n                  validationMessage={\r\n                    validationMessages[`card-${activeCard}`] ||\r\n                    validationMessages[`card-${activeCard}-buttons`]\r\n                  }\r\n                  focusedInput={focusedInput}\r\n                  setFocusedInput={setFocusedInput}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          <div className={steps.actionSection}>\r\n            <Button\r\n              onClick={() => setStep(1)}\r\n              variant=\"outline\"\r\n              color=\"content\"\r\n              iconLeft={<FiChevronLeft />}\r\n              size=\"large\"\r\n              fullWidth\r\n            >\r\n              Voltar\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"outline\"\r\n              color=\"primary\"\r\n              size=\"large\"\r\n              onClick={handleSaveBeforeUpload}\r\n              iconLeft={savedBeforeUpload ? <FiCheckCircle size={18} /> : <FiSave size={18} />}\r\n              fullWidth\r\n            >\r\n              {savedBeforeUpload ? 'Salvo!' : 'Salvar Rascunho'}\r\n            </Button>\r\n\r\n            <Button\r\n              className={styles.nextButton}\r\n              onClick={handleContinue}\r\n              disabled={loading || !checkStepValidity()}\r\n              variant=\"solid\"\r\n              color=\"primary\"\r\n              loading={loading}\r\n              iconRight={!loading ? <FiChevronRight /> : null}\r\n              size=\"large\"\r\n              fullWidth\r\n            >\r\n              {loading ? 'Processando...' : 'Criar Template'}\r\n            </Button>\r\n          </div>\r\n\r\n          {/* Mostrar informao de ltimo salvamento */}\r\n          {lastSavedTime && !savedBeforeUpload && (\r\n            <div className={steps.lastSavedInfo}>\r\n              <FiInfo size={14} />\r\n              <span>\r\n                ltimo salvamento: {new Date(lastSavedTime).toLocaleString()}\r\n                {unsavedChanges && (\r\n                  <span className={steps.unsavedIndicator}> (Alteraes no salvas)</span>\r\n                )}\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {showPreview && (\r\n          <div \r\n            className={`${styles.previewContainer} ${previewExpanded ? styles.expanded : ''}`}\r\n            ref={previewRef}\r\n          >\r\n            <div className={styles.previewWrapper}>\r\n              <div className={styles.previewHeader}>\r\n                <h3 className={styles.previewTitle}>Pr-visualizao do Carrossel</h3>\r\n              </div>\r\n              <p className={styles.previewSubtitle}>\r\n                Visualizao ao vivo de como seu carrossel aparecer no WhatsApp\r\n              </p>\r\n              <div className={styles.previewContent}>\r\n                <CarouselPreview\r\n                  cards={cards.slice(0, numCards)}\r\n                  bodyText={bodyText}\r\n                  focusedInput={focusedInput}\r\n                />\r\n              </div>\r\n              \r\n              {/* Botes de refresh para a visualizao */}\r\n              {/* <div className={styles.previewActions}>\r\n                <Button\r\n                  variant=\"outline\"\r\n                  color=\"content\"\r\n                  size=\"small\"\r\n                  iconLeft={<FiRefreshCw size={16} />}\r\n                  onClick={() => setFocusedInput({ cardIndex: null, buttonIndex: null })}\r\n                >\r\n                  Atualizar visualizao\r\n                </Button>\r\n              </div> */}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StepTwo;","// extracted by mini-css-extract-plugin\nexport default {\"jsonContainer\":\"JsonViewer_jsonContainer__kB70m\",\"fullscreen\":\"JsonViewer_fullscreen__zfakt\",\"fadeIn\":\"JsonViewer_fadeIn__JhzRh\",\"titleBar\":\"JsonViewer_titleBar__iESXM\",\"titleIcon\":\"JsonViewer_titleIcon__w4y27\",\"title\":\"JsonViewer_title__cKGpr\",\"toolBar\":\"JsonViewer_toolBar__PF1Ns\",\"toolButton\":\"JsonViewer_toolButton__nmocG\",\"active\":\"JsonViewer_active__e7uMs\",\"copied\":\"JsonViewer_copied__xvXmM\",\"successIcon\":\"JsonViewer_successIcon__cEigz\",\"errorContainer\":\"JsonViewer_errorContainer__acERP\",\"errorIcon\":\"JsonViewer_errorIcon__mRGDe\",\"emptyContainer\":\"JsonViewer_emptyContainer__rzaN7\",\"emptyIcon\":\"JsonViewer_emptyIcon__20bP0\",\"codeContainer\":\"JsonViewer_codeContainer__EQudz\",\"jsonContent\":\"JsonViewer_jsonContent__M9Q92\",\"string\":\"JsonViewer_string__a086W\",\"number\":\"JsonViewer_number__UmMqQ\",\"boolean\":\"JsonViewer_boolean__GTE0I\",\"null\":\"JsonViewer_null__LCDql\",\"key\":\"JsonViewer_key__ikMmI\"};","import React, { useState, useEffect, useRef, useMemo } from 'react';\r\nimport { \r\n  FiCopy, \r\n  FiDownload, \r\n  FiCheckCircle, \r\n  FiEye, \r\n  FiEyeOff, \r\n  FiMaximize, \r\n  FiMinimize,\r\n  FiCode,\r\n  FiAlertTriangle\r\n} from 'react-icons/fi';\r\nimport styles from './JsonViewer.module.css';\r\n\r\nfunction JsonViewer({ \r\n  json, \r\n  onCopy, \r\n  onDownload, \r\n  fileName = \"data.json\",\r\n  collapsible = true,\r\n  initiallyExpanded = true,\r\n  title,\r\n  minHeight = '20dvh',\r\n  maxHeight = '50dvh'\r\n}) {\r\n  const [copied, setCopied] = useState(false);\r\n  const [expanded, setExpanded] = useState(initiallyExpanded);\r\n  const [formattedJson, setFormattedJson] = useState('');\r\n  const [syntaxHighlighted, setSyntaxHighlighted] = useState('');\r\n  const [fullscreen, setFullscreen] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  \r\n  const containerRef = useRef(null);\r\n  const jsonDataRef = useRef(null); // Ref para armazenar os dados JSON originais\r\n  \r\n  // Memoized syntax highlighting function\r\n  const formatJsonSyntax = useMemo(() => {\r\n    return (jsonString) => {\r\n      if (!jsonString) return '';\r\n      \r\n      return jsonString\r\n        .replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\r\n          let cls = styles.number;\r\n          if (/^\"/.test(match)) {\r\n            if (/:$/.test(match)) {\r\n              cls = styles.key;\r\n            } else {\r\n              cls = styles.string;\r\n            }\r\n          } else if (/true|false/.test(match)) {\r\n            cls = styles.boolean;\r\n          } else if (/null/.test(match)) {\r\n            cls = styles.null;\r\n          }\r\n          return `<span class=\"${cls}\">${match}</span>`;\r\n        });\r\n    };\r\n  }, []);\r\n  \r\n  // Format JSON with indentation\r\n  useEffect(() => {\r\n    if (json) {\r\n      try {\r\n        // Armazena os dados JSON originais em ref para uso posterior\r\n        jsonDataRef.current = json;\r\n        \r\n        // Tenta formatar o JSON\r\n        const formatted = JSON.stringify(json, null, 2);\r\n        \r\n        // Verifica se o JSON foi formatado corretamente (no est vazio ou truncado)\r\n        if (!formatted || formatted === \"null\" || formatted === \"{\" || formatted === \"[\") {\r\n          throw new Error(\"JSON invlido ou truncado\");\r\n        }\r\n        \r\n        setFormattedJson(formatted);\r\n        setSyntaxHighlighted(formatJsonSyntax(formatted));\r\n        setError(null);\r\n      } catch (error) {\r\n        console.error('Error formatting JSON:', error);\r\n        setError(`Error formatting JSON: ${error instanceof Error ? error.message : String(error)}`);\r\n      }\r\n    } else {\r\n      setFormattedJson('');\r\n      setSyntaxHighlighted('');\r\n      jsonDataRef.current = null;\r\n    }\r\n  }, [json, formatJsonSyntax]);\r\n  \r\n  // Handle copy with visual feedback\r\n  const handleCopy = () => {\r\n    if (onCopy) {\r\n      onCopy();\r\n    } else {\r\n      // Garante que estamos usando o JSON mais recente\r\n      let jsonToCopy = formattedJson;\r\n      \r\n      // Se o formattedJson estiver vazio ou truncado, tenta reformatar com base no ref\r\n      if (!jsonToCopy || jsonToCopy.length < 5) {\r\n        try {\r\n          // Tenta usar os dados originais do JSON\r\n          if (jsonDataRef.current) {\r\n            jsonToCopy = JSON.stringify(jsonDataRef.current, null, 2);\r\n          }\r\n        } catch (err) {\r\n          console.error('Error re-generating JSON for copy:', err);\r\n        }\r\n      }\r\n      \r\n      // Verifica novamente antes de copiar\r\n      if (!jsonToCopy || jsonToCopy.length < 5) {\r\n        alert('No foi possvel copiar o JSON. Os dados parecem invlidos.');\r\n        return;\r\n      }\r\n      \r\n      navigator.clipboard.writeText(jsonToCopy)\r\n        .then(() => {\r\n          setCopied(true);\r\n          setTimeout(() => setCopied(false), 2000);\r\n        })\r\n        .catch(err => {\r\n          console.error('Error copying to clipboard:', err);\r\n          alert('Failed to copy to clipboard. Please try again.');\r\n        });\r\n    }\r\n  };\r\n\r\n  // Handle download\r\n  const handleDownload = () => {\r\n    if (onDownload) {\r\n      onDownload();\r\n    } else {\r\n      // Garante que estamos usando o JSON mais recente para download\r\n      let jsonToDownload = formattedJson;\r\n      \r\n      // Se o formattedJson estiver vazio ou truncado, tenta reformatar\r\n      if (!jsonToDownload || jsonToDownload.length < 5) {\r\n        try {\r\n          if (jsonDataRef.current) {\r\n            jsonToDownload = JSON.stringify(jsonDataRef.current, null, 2);\r\n          }\r\n        } catch (err) {\r\n          console.error('Error re-generating JSON for download:', err);\r\n        }\r\n      }\r\n      \r\n      // Verifica novamente antes de fazer o download\r\n      if (!jsonToDownload || jsonToDownload.length < 5) {\r\n        alert('No foi possvel fazer o download do JSON. Os dados parecem invlidos.');\r\n        return;\r\n      }\r\n      \r\n      const blob = new Blob([jsonToDownload], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = fileName;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n    }\r\n  };\r\n\r\n  // Toggle expanded state\r\n  const toggleExpanded = () => {\r\n    setExpanded(!expanded);\r\n  };\r\n  \r\n  // Toggle fullscreen mode\r\n  const toggleFullscreen = () => {\r\n    setFullscreen(!fullscreen);\r\n    if (!fullscreen && !expanded) {\r\n      setExpanded(true);\r\n    }\r\n  };\r\n\r\n  // Render empty state\r\n  if (!json) {\r\n    return (\r\n      <div className={styles.emptyContainer}>\r\n        <FiCode className={styles.emptyIcon} />\r\n        <p>No JSON data available</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div \r\n      className={`${styles.jsonContainer} ${fullscreen ? styles.fullscreen : ''}`}\r\n      ref={containerRef}\r\n      style={{ \r\n        maxHeight: fullscreen ? '100%' : maxHeight , minHeight\r\n      }}\r\n    >\r\n      {/* Title Bar */}\r\n      {title && (\r\n        <div className={styles.titleBar}>\r\n          <h4 className={styles.title}>\r\n            <FiCode className={styles.titleIcon} />\r\n            {title}\r\n          </h4>\r\n        </div>\r\n      )}\r\n      \r\n      {/* Toolbar */}\r\n      <div className={styles.toolBar}>\r\n        {/* Collapsible Toggle */}\r\n        {collapsible && (\r\n          <button\r\n            className={`${styles.toolButton} ${!expanded ? styles.collapsed : ''}`}\r\n            onClick={toggleExpanded}\r\n            title={expanded ? \"Collapse\" : \"Expand\"}\r\n          >\r\n            {expanded ? <FiEyeOff /> : <FiEye />}\r\n          </button>\r\n        )}\r\n        \r\n        {/* Fullscreen Toggle */}\r\n        <button\r\n          className={`${styles.toolButton} ${fullscreen ? styles.active : ''}`}\r\n          onClick={toggleFullscreen}\r\n          title={fullscreen ? \"Exit Fullscreen\" : \"Fullscreen\"}\r\n        >\r\n          {fullscreen ? <FiMinimize /> : <FiMaximize />}\r\n        </button>\r\n        \r\n        {/* Copy Button */}\r\n        <button\r\n          className={`${styles.toolButton} ${copied ? styles.copied : ''}`}\r\n          onClick={handleCopy}\r\n          title=\"Copy JSON\"\r\n        >\r\n          {copied ? <FiCheckCircle className={styles.successIcon} /> : <FiCopy />}\r\n        </button>\r\n        \r\n        {/* Download Button */}\r\n        <button\r\n          className={styles.toolButton}\r\n          onClick={handleDownload}\r\n          title=\"Download JSON\"\r\n        >\r\n          <FiDownload />\r\n        </button>\r\n      </div>\r\n      \r\n      {/* Error Handling */}\r\n      {error && (\r\n        <div className={styles.errorContainer}>\r\n          <FiAlertTriangle className={styles.errorIcon} />\r\n          <span>{error}</span>\r\n        </div>\r\n      )}\r\n      \r\n      {/* JSON Content */}\r\n      {expanded && !error && (\r\n        <div \r\n          className={styles.codeContainer}\r\n          style={{ \r\n            maxHeight: fullscreen ? '100%' : maxHeight,\r\n            overflowY: 'auto'\r\n          }}\r\n        >\r\n          <pre \r\n            className={styles.jsonContent}\r\n            dangerouslySetInnerHTML={{ __html: syntaxHighlighted }}\r\n          ></pre>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default JsonViewer;","// src/components/previews/downloadPreview.js\r\n// Verso otimizada com localStorage, pr-renderizao e transies melhoradas\r\n\r\nimport { FFmpeg } from '@ffmpeg/ffmpeg';\r\nimport { fetchFile } from '@ffmpeg/util';\r\nimport html2canvas from 'html2canvas';\r\n\r\n// Constantes para a utilizao do localStorage\r\nconst STORAGE_KEYS = {\r\n  FRAMES: 'carousel-frames-cache',\r\n  TIMESTAMP: 'carousel-cache-timestamp',\r\n  TEMPLATE_HASH: 'carousel-template-hash'\r\n};\r\n\r\nclass DownloadPreviewService {\r\n  constructor() {\r\n    this.ffmpeg = new FFmpeg({ log: true });\r\n    this.isLoaded = false;\r\n\r\n    // Cache para armazenar os blobs j gerados\r\n    this.cachedFiles = {\r\n      mp4: null,\r\n      gif: null\r\n    };\r\n\r\n    // Cache para armazenar os frames intermedirios\r\n    this.capturedFramesCache = null;\r\n\r\n    // Estado de pr-renderizao\r\n    this.isPreRendering = false;\r\n\r\n    // Verificar cache no localStorage durante a inicializao\r\n    this.loadFromLocalStorage();\r\n  }\r\n\r\n  // Gerar hash simples para identificar template\r\n  generateTemplateHash(cards, bodyText, templateName) {\r\n    try {\r\n      const templateData = JSON.stringify({\r\n        cardsLength: cards.length,\r\n        bodyTextLength: bodyText?.length || 0,\r\n        templateName: templateName || ''\r\n      });\r\n\r\n      // Hash simples para comparaes\r\n      let hash = 0;\r\n      for (let i = 0; i < templateData.length; i++) {\r\n        const char = templateData.charCodeAt(i);\r\n        hash = ((hash << 5) - hash) + char;\r\n        hash = hash & hash; // Converte para 32bit integer\r\n      }\r\n\r\n      return hash.toString();\r\n    } catch (error) {\r\n      console.error('Erro ao gerar hash do template:', error);\r\n      return Date.now().toString(); // Fallback\r\n    }\r\n  }\r\n\r\n  // Verifica se os dados so compatveis com o template atual\r\n  isCompatibleTemplate(currentHash) {\r\n    const storedHash = localStorage.getItem(STORAGE_KEYS.TEMPLATE_HASH);\r\n    return storedHash === currentHash;\r\n  }\r\n\r\n  // Carregar frames do localStorage\r\n  loadFromLocalStorage() {\r\n    try {\r\n      // Verificar se temos timestamp e se  recente (menos de 24h)\r\n      const timestamp = localStorage.getItem(STORAGE_KEYS.TIMESTAMP);\r\n      const isRecent = timestamp && (Date.now() - parseInt(timestamp)) < 86400000; // 24h\r\n\r\n      if (!isRecent) {\r\n        // Cache expirado, limpando\r\n        this.clearLocalStorageCache();\r\n        return false;\r\n      }\r\n\r\n      // Verificamos se existem frames armazenados\r\n      const framesJSON = localStorage.getItem(STORAGE_KEYS.FRAMES);\r\n      if (!framesJSON) return false;\r\n\r\n      // Tentar descomprimir e reconstruir os frames\r\n      try {\r\n        const frameData = JSON.parse(framesJSON);\r\n\r\n        if (!frameData || !frameData.images || !frameData.count) {\r\n          throw new Error('Dados de frames invlidos');\r\n        }\r\n\r\n        // Reconstruir frames como objetos canvas\r\n        this.capturedFramesCache = [];\r\n\r\n        // Converter base64 strings de volta para canvas objects\r\n        frameData.images.forEach(dataUrl => {\r\n          const img = new Image();\r\n          img.src = dataUrl;\r\n\r\n          const canvas = document.createElement('canvas');\r\n          const ctx = canvas.getContext('2d');\r\n\r\n          // Quando a imagem carregar, desenha no canvas\r\n          img.onload = () => {\r\n            canvas.width = img.width;\r\n            canvas.height = img.height;\r\n            ctx.drawImage(img, 0, 0);\r\n          };\r\n\r\n          this.capturedFramesCache.push(canvas);\r\n        });\r\n\r\n        console.log(`Carregados ${this.capturedFramesCache.length} frames do localStorage`);\r\n        return true;\r\n      } catch (error) {\r\n        console.error('Erro ao reconstruir frames do localStorage:', error);\r\n        this.clearLocalStorageCache();\r\n        return false;\r\n      }\r\n    } catch (error) {\r\n      console.error('Erro ao carregar do localStorage:', error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Salvar frames em localStorage\r\n  saveToLocalStorage(frames, templateHash) {\r\n    try {\r\n      if (!frames || frames.length === 0) return false;\r\n\r\n      // Selecione alguns frames chave para salvar (para economizar espao)\r\n      // Pegar no mximo 15 frames distribudos uniformemente\r\n      const maxFramesToStore = 15;\r\n      const step = Math.max(1, Math.floor(frames.length / maxFramesToStore));\r\n\r\n      const selectedFrames = [];\r\n      for (let i = 0; i < frames.length; i += step) {\r\n        if (selectedFrames.length < maxFramesToStore) {\r\n          selectedFrames.push(frames[i]);\r\n        }\r\n      }\r\n\r\n      // Convertendo para base64 com menor qualidade para economizar espao\r\n      const frameDataUrls = selectedFrames.map(canvas => {\r\n        try {\r\n          // Usar toDataURL com menor qualidade para JPEG\r\n          return canvas.toDataURL('image/jpeg', 0.7);\r\n        } catch (e) {\r\n          return null;\r\n        }\r\n      }).filter(Boolean);\r\n\r\n      // Criar objeto de dados\r\n      const frameData = {\r\n        count: frames.length,\r\n        selectedCount: frameDataUrls.length,\r\n        images: frameDataUrls,\r\n        timestamp: Date.now()\r\n      };\r\n\r\n      // Salvar no localStorage\r\n      localStorage.setItem(STORAGE_KEYS.FRAMES, JSON.stringify(frameData));\r\n      localStorage.setItem(STORAGE_KEYS.TIMESTAMP, Date.now().toString());\r\n      localStorage.setItem(STORAGE_KEYS.TEMPLATE_HASH, templateHash);\r\n\r\n      console.log(`Salvos ${frameDataUrls.length} frames para o template ${templateHash}`);\r\n      return true;\r\n    } catch (error) {\r\n      console.error('Erro ao salvar no localStorage:', error);\r\n\r\n      // Se houver erro (provavelmente devido ao tamanho), limpe para evitar dados corrompidos\r\n      this.clearLocalStorageCache();\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Limpa o cache do localStorage\r\n  clearLocalStorageCache() {\r\n    try {\r\n      localStorage.removeItem(STORAGE_KEYS.FRAMES);\r\n      localStorage.removeItem(STORAGE_KEYS.TIMESTAMP);\r\n      localStorage.removeItem(STORAGE_KEYS.TEMPLATE_HASH);\r\n    } catch (error) {\r\n      console.error('Erro ao limpar cache do localStorage:', error);\r\n    }\r\n  }\r\n\r\n  // Verifica se h cache no localStorage\r\n  hasLocalStorageCache() {\r\n    return !!localStorage.getItem(STORAGE_KEYS.FRAMES) &&\r\n      !!localStorage.getItem(STORAGE_KEYS.TIMESTAMP);\r\n  }\r\n\r\n  async initialize(retryCount = 0) {\r\n    if (this.isLoaded) return;\r\n\r\n    // Limit retries to prevent infinite loops\r\n    const maxRetries = 3;\r\n\r\n    try {\r\n      console.log(`Iniciando carregamento do FFmpeg${retryCount > 0 ? ` (tentativa ${retryCount + 1})` : ''}...`);\r\n\r\n      // Adicionar timeout para evitar travamento infinito\r\n      const loadPromise = this.ffmpeg.load();\r\n\r\n      // Race com um timeout de 30 segundos\r\n      const timeoutPromise = new Promise((_, reject) => {\r\n        setTimeout(() => {\r\n          reject(new Error('Timeout ao carregar FFmpeg'));\r\n        }, 30000);\r\n      });\r\n\r\n      await Promise.race([loadPromise, timeoutPromise]);\r\n\r\n      this.isLoaded = true;\r\n      console.log('FFmpeg carregado com sucesso');\r\n    } catch (error) {\r\n      console.error(`Erro ao inicializar FFmpeg (tentativa ${retryCount + 1}/${maxRetries + 1}):`, error);\r\n\r\n      if (retryCount < maxRetries) {\r\n        // Backoff exponencial: espera mais tempo entre tentativas\r\n        const backoffTime = Math.min(1000 * Math.pow(2, retryCount), 8000);\r\n        console.log(`Tentando novamente em ${backoffTime / 1000} segundos...`);\r\n\r\n        await new Promise(resolve => setTimeout(resolve, backoffTime));\r\n        return this.initialize(retryCount + 1);\r\n      }\r\n\r\n      throw new Error(`Falha ao carregar ferramentas de processamento de vdeo aps ${maxRetries + 1} tentativas.`);\r\n    }\r\n  }\r\n\r\n  // Mtodo para pr-carregar o FFmpeg em segundo plano\r\n  async preloadFFmpeg() {\r\n    try {\r\n      // Use um timeout para evitar bloquear a renderizao inicial\r\n      setTimeout(async () => {\r\n        try {\r\n          if (!this.isLoaded) {\r\n            console.log('Pr-carregando FFmpeg em segundo plano...');\r\n            await this.initialize();\r\n            console.log('FFmpeg pr-carregado com sucesso');\r\n          }\r\n        } catch (error) {\r\n          console.warn('Pr-carregamento do FFmpeg falhou silenciosamente:', error);\r\n          // No mostra erro ao usurio neste momento\r\n        }\r\n      }, 2000); // Espera 2 segundos antes de iniciar\r\n    } catch (error) {\r\n      // Ignora erros no pr-carregamento\r\n      console.warn('Erro ao agendar pr-carregamento do FFmpeg:', error);\r\n    }\r\n  }\r\n\r\n  // Limpa o sistema de arquivos virtual entre operaes\r\n  async cleanupFileSystem() {\r\n    if (!this.isLoaded) return;\r\n\r\n    try {\r\n      console.log('Limpando sistema de arquivos...');\r\n\r\n      // Limpar diretrio de frames se existir - com tratamento de erro robusto\r\n      try {\r\n        // Primeiro, tentar ler o diretrio\r\n        let files = [];\r\n        try {\r\n          files = await this.ffmpeg.readDir('frames');\r\n        } catch (readError) {\r\n          // Isso  normal no primeiro carregamento ou aps uma limpeza completa\r\n          // No precisamos logar nada aqui,  um comportamento esperado\r\n        }\r\n\r\n        // Se conseguiu ler, deletar os arquivos um por um\r\n        if (files && files.length > 0) {\r\n          for (const file of files) {\r\n            try {\r\n              await this.ffmpeg.deleteFile(`frames/${file.name}`);\r\n            } catch (deleteFileError) {\r\n              console.warn(`No foi possvel deletar arquivo ${file.name}:`, deleteFileError);\r\n              // Continuar mesmo se no conseguir deletar um arquivo\r\n            }\r\n          }\r\n        }\r\n\r\n        // Tentar deletar o diretrio\r\n        try {\r\n          await this.ffmpeg.deleteDir('frames');\r\n        } catch (deleteDirError) {\r\n          console.warn('No foi possvel deletar diretrio frames:', deleteDirError);\r\n          // Continuar mesmo se no conseguir deletar o diretrio\r\n        }\r\n      } catch (e) {\r\n        console.warn('Erro ao limpar diretrio frames:', e);\r\n        // Diretrio pode no existir ainda, isso  normal\r\n      }\r\n\r\n      // Remover arquivos de sada anteriores\r\n      try {\r\n        await this.ffmpeg.deleteFile('output.mp4');\r\n      } catch (mp4Error) {\r\n        console.log('Arquivo output.mp4 no existe ou no pode ser deletado');\r\n      }\r\n\r\n      try {\r\n        await this.ffmpeg.deleteFile('output.gif');\r\n      } catch (gifError) {\r\n        console.log('Arquivo output.gif no existe ou no pode ser deletado');\r\n      }\r\n      \r\n      // Tentar remover outros arquivos intermedirios\r\n      try {\r\n        await this.ffmpeg.deleteFile('palette.png');\r\n      } catch (paletteError) {\r\n        // Arquivo pode no existir, isso  normal\r\n      }\r\n\r\n      console.log('Limpeza do sistema de arquivos concluda');\r\n    } catch (error) {\r\n      console.warn('Aviso durante limpeza do sistema de arquivos:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Captura frames com transies suaves, gerando mltiplos frames intermedirios \r\n   * para simular a animao entre slides\r\n   */\r\n  async captureFrames(containerElement, cards, navigationControls, onStatusUpdate, templateHash) {\r\n    if (!containerElement) {\r\n      throw new Error('Container de pr-visualizao no encontrado');\r\n    }\r\n\r\n    if (!navigationControls || !navigationControls.goToCard) {\r\n      throw new Error('Controles de navegao do carrossel no fornecidos');\r\n    }\r\n\r\n    // Se j temos cache compatvel no localStorage, devemos us-lo\r\n    if (this.capturedFramesCache && templateHash && this.isCompatibleTemplate(templateHash)) {\r\n      console.log(' Usando frames do cache (memria/localStorage)');\r\n      onStatusUpdate?.({ status: 'cached', message: 'Usando frames j capturados anteriormente...' });\r\n      return this.capturedFramesCache;\r\n    }\r\n\r\n    onStatusUpdate?.({ status: 'capturing', message: 'Capturando imagens...' });\r\n    const frames = [];\r\n    const numCards = cards.length;\r\n\r\n    try {\r\n      // Funo auxiliar para verificar carregamento completo de imagens e vdeos\r\n      const waitForMediaLoad = async (container) => {\r\n        const images = container.querySelectorAll('img');\r\n        const videos = container.querySelectorAll('video');\r\n\r\n        await Promise.all([...images].map(img => {\r\n          if (img.complete) return Promise.resolve();\r\n          return new Promise(resolve => {\r\n            img.onload = resolve;\r\n            img.onerror = resolve; // Resolve tambm em caso de erro\r\n            setTimeout(resolve, 500);\r\n          });\r\n        }));\r\n\r\n        await Promise.all([...videos].map(video => {\r\n          if (video.readyState >= 3) return Promise.resolve();\r\n          return new Promise(resolve => {\r\n            video.oncanplaythrough = resolve;\r\n            video.onerror = resolve;\r\n            setTimeout(resolve, 500);\r\n          });\r\n        }));\r\n      };\r\n\r\n      // Transio suave entre dois cards com mais frames intermedirios\r\n      const captureTransition = async (fromCardIndex, toCardIndex, transitionSteps = 20) => {\r\n        //  Aumentei de 12 para 20 frames durante a transio\r\n        // Primeiro, vamos para o card inicial\r\n        navigationControls.goToCard(fromCardIndex);\r\n        await new Promise(resolve => setTimeout(resolve, 300));\r\n        await waitForMediaLoad(containerElement);\r\n        \r\n        // Capturamos vrios frames do card inicial para criar \"permanncia\"\r\n        for (let i = 0; i < 5; i++) {\r\n          const startFrame = await html2canvas(containerElement, {\r\n            scale: 2,\r\n            backgroundColor: null,\r\n            useCORS: true,\r\n            allowTaint: true,\r\n            logging: false\r\n          });\r\n          \r\n          frames.push(startFrame);\r\n        }\r\n        \r\n        // Agora vamos para o card final e capturamos vrias imagens durante a transio\r\n        navigationControls.goToCard(toCardIndex);\r\n        \r\n        //  AQUI EST A CHAVE: precisamos capturar mais frames durante a transio\r\n        //  Comeamos a capturar IMEDIATAMENTE\r\n        // Captura o primeiro frame logo aps iniciar a transio\r\n        const firstTransitionFrame = await html2canvas(containerElement, {\r\n          scale: 2,\r\n          backgroundColor: null,\r\n          useCORS: true,\r\n          allowTaint: true,\r\n          logging: false\r\n        });\r\n        frames.push(firstTransitionFrame);\r\n          \r\n        //  IMPORTANTE: Modificar os intervalos para capturar com maior frequncia\r\n        // durante a parte crtica da transio\r\n        const intervals = [\r\n          10, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, \r\n          130, 140, 150, 160, 170, 180, 190, 200\r\n        ].slice(0, transitionSteps);\r\n          \r\n        // Capturamos frames em intervalos especficos durante a transio\r\n        for (const delay of intervals) {\r\n          await new Promise(resolve => setTimeout(resolve, delay - (delay > 10 ? 10 : 0)));\r\n            \r\n          // Capturar um frame da transio\r\n          const transitionFrame = await html2canvas(containerElement, {\r\n            scale: 2,\r\n            backgroundColor: null,\r\n            useCORS: true,\r\n            allowTaint: true,\r\n            logging: false\r\n          });\r\n            \r\n          frames.push(transitionFrame);\r\n        }\r\n        \r\n        // Adicionamos um atraso para garantir que a transio terminou completamente\r\n        await new Promise(resolve => setTimeout(resolve, 100));\r\n        \r\n        // Capturamos o frame final\r\n        await waitForMediaLoad(containerElement);\r\n        const endFrame = await html2canvas(containerElement, {\r\n          scale: 2,\r\n          backgroundColor: null,\r\n          useCORS: true,\r\n          allowTaint: true,\r\n          logging: false\r\n        });\r\n        \r\n        frames.push(endFrame);\r\n        \r\n        // Repetimos o ltimo frame algumas vezes para que o card seja exibido \r\n        // por um tempo adequado antes da prxima transio\r\n        for (let i = 0; i < 5; i++) {\r\n          frames.push(endFrame);\r\n        }\r\n      };\r\n\r\n      // Capturar o primeiro card\r\n      navigationControls.goToCard(0);\r\n      await new Promise(resolve => setTimeout(resolve, 300));\r\n      await waitForMediaLoad(containerElement);\r\n\r\n      // Capturar o frame inicial e duplic-lo algumas vezes para\r\n      // que o primeiro card seja exibido por tempo adequado\r\n      const firstFrame = await html2canvas(containerElement, {\r\n        scale: 2,\r\n        backgroundColor: null,\r\n        useCORS: true,\r\n        allowTaint: true,\r\n        logging: false\r\n      });\r\n\r\n      // Adicionar frame inicial vrias vezes (permanncia inicial)\r\n      for (let i = 0; i < 10; i++) {\r\n        frames.push(firstFrame);\r\n      }\r\n\r\n      // Capturar transies entre todos os cards\r\n      for (let i = 0; i < numCards - 1; i++) {\r\n        onStatusUpdate?.({\r\n          status: 'capturing',\r\n          message: `Capturando transio ${i + 1}/${numCards - 1}...`,\r\n          progress: Math.round((i / (numCards - 1)) * 100)\r\n        });\r\n\r\n        await captureTransition(i, i + 1);\r\n      }\r\n\r\n      // Adicionar a transio do ltimo card de volta para o primeiro,\r\n      // simulando a navegao cclica do carrossel\r\n      if (numCards > 1) {\r\n        onStatusUpdate?.({\r\n          status: 'capturing',\r\n          message: `Capturando transio circular...`\r\n        });\r\n\r\n        await captureTransition(numCards - 1, 0);\r\n      }\r\n\r\n      console.log(`Total de ${frames.length} frames capturados para a animao`);\r\n\r\n      // Armazenar em cache para uso futuro\r\n      this.capturedFramesCache = frames;\r\n\r\n      // Salvar no localStorage se tivermos um hash do template\r\n      if (templateHash) {\r\n        this.saveToLocalStorage(frames, templateHash);\r\n      }\r\n\r\n      return frames;\r\n    } catch (error) {\r\n      console.error('Erro ao capturar frames:', error);\r\n      throw new Error(`Falha ao capturar imagens do carrossel: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  async generateVideo(frames, templateName, onStatusUpdate) {\r\n    // Verificar se j temos um vdeo em cache\r\n    if (this.cachedFiles.mp4) {\r\n      console.log('Usando vdeo em cache');\r\n      onStatusUpdate?.({ status: 'cached', message: 'Usando arquivo gerado anteriormente...' });\r\n      return this.cachedFiles.mp4;\r\n    }\r\n\r\n    try {\r\n      // Garantir que o FFmpeg est carregado corretamente\r\n      if (!this.isLoaded) {\r\n        console.log(\" Inicializando FFmpeg para processamento de vdeo...\");\r\n        await this.initialize();\r\n        console.log(\" FFmpeg inicializado com sucesso\");\r\n      }\r\n\r\n      // Limpar sistema de arquivos antes de comear\r\n      await this.cleanupFileSystem();\r\n\r\n      onStatusUpdate?.({ status: 'processing', message: 'Preparando o download...' });\r\n      console.log(`Iniciando processamento de ${frames.length} frames`);\r\n\r\n      // Criar diretrio temporrio\r\n      await this.ffmpeg.createDir('frames');\r\n\r\n      // Para vdeos, usamos uma abordagem diferente do GIF:\r\n      // 1. Vamos usar mais frames (at 120) para maximizar a suavidade\r\n      // 2. Nas reas de transio, capturamos ainda mais frames\r\n      // 3. Usamos um framerate mais alto para obter um movimento mais fluido\r\n      \r\n      // Selecionar frames com estratgia para priorizar transies\r\n      const selectedIndices = [];\r\n      const totalFrames = frames.length;\r\n      \r\n      const maxVideoFrames = 120; // Limite mais alto para vdeos\r\n      \r\n      if (totalFrames <= maxVideoFrames) {\r\n        // Se tivermos poucos frames, usar todos\r\n        for (let i = 0; i < totalFrames; i++) {\r\n          selectedIndices.push(i);\r\n        }\r\n      } else {\r\n        // Estratgia de seleo inteligente para preservar transies\r\n        // Precisamos identificar onde esto as transies\r\n        \r\n        // A ideia : cada card tem uma transio para o prximo\r\n        // Estimamos quantos cards h com base no total de frames\r\n        const estimatedCardsCount = Math.max(2, Math.ceil(totalFrames / 30));\r\n        const transitionLength = 15; // Frames estimados em uma transio\r\n        \r\n        const transitions = [];\r\n        \r\n        // Identificar transies baseadas em quantos cards temos\r\n        for (let i = 1; i < estimatedCardsCount; i++) {\r\n          const transitionCenter = Math.floor(i * (totalFrames / estimatedCardsCount));\r\n          transitions.push({\r\n            start: Math.max(0, transitionCenter - transitionLength),\r\n            end: Math.min(totalFrames - 1, transitionCenter + transitionLength)\r\n          });\r\n        }\r\n        \r\n        // Para cada seo entre transies, selecionar frames uniformemente\r\n        let lastEnd = 0;\r\n        \r\n        for (const transition of transitions) {\r\n          // Intervalo esttico antes da transio (se houver)\r\n          if (transition.start > lastEnd) {\r\n            const staticInterval = transition.start - lastEnd;\r\n            const staticFramesToTake = Math.max(3, Math.floor(staticInterval / 10));\r\n            \r\n            if (staticFramesToTake > 0) {\r\n              const staticStep = Math.floor(staticInterval / staticFramesToTake);\r\n              for (let i = 0; i < staticFramesToTake; i++) {\r\n                const frameIndex = lastEnd + (i * staticStep);\r\n                if (frameIndex < transition.start) {\r\n                  selectedIndices.push(frameIndex);\r\n                }\r\n              }\r\n            }\r\n          }\r\n          \r\n          // Todos os frames da transio\r\n          for (let i = transition.start; i <= transition.end; i++) {\r\n            selectedIndices.push(i);\r\n          }\r\n          \r\n          lastEnd = transition.end + 1;\r\n        }\r\n        \r\n        // Frames estticos aps a ltima transio (se houver)\r\n        if (lastEnd < totalFrames - 1) {\r\n          const remainingInterval = totalFrames - lastEnd;\r\n          const remainingFramesToTake = Math.max(3, Math.floor(remainingInterval / 10));\r\n          \r\n          if (remainingFramesToTake > 0) {\r\n            const remainingStep = Math.floor(remainingInterval / remainingFramesToTake);\r\n            for (let i = 0; i < remainingFramesToTake; i++) {\r\n              const frameIndex = lastEnd + (i * remainingStep);\r\n              if (frameIndex < totalFrames) {\r\n                selectedIndices.push(frameIndex);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Garantir que temos o ltimo frame\r\n        if (totalFrames > 0 && !selectedIndices.includes(totalFrames - 1)) {\r\n          selectedIndices.push(totalFrames - 1);\r\n        }\r\n        \r\n        // Ordenar os ndices para processamento sequencial\r\n        selectedIndices.sort((a, b) => a - b);\r\n        \r\n        // Se ainda tivermos muitos frames, fazer uma reduo uniforme\r\n        if (selectedIndices.length > maxVideoFrames) {\r\n          const indices = [...selectedIndices];\r\n          selectedIndices.length = 0;\r\n          \r\n          const finalStep = Math.ceil(indices.length / maxVideoFrames);\r\n          for (let i = 0; i < indices.length; i += finalStep) {\r\n            if (selectedIndices.length < maxVideoFrames) {\r\n              selectedIndices.push(indices[i]);\r\n            }\r\n          }\r\n          \r\n          // Garantir que temos o ltimo frame novamente\r\n          if (totalFrames > 0 && !selectedIndices.includes(indices[indices.length - 1])) {\r\n            selectedIndices.push(indices[indices.length - 1]);\r\n          }\r\n        }\r\n      }\r\n      \r\n      // Processar cada frame\r\n      console.log(` Processando ${selectedIndices.length} frames para vdeo (de ${frames.length} totais)`);\r\n      \r\n      for (let i = 0; i < selectedIndices.length; i++) {\r\n        onStatusUpdate?.({ \r\n          status: 'processing', \r\n          message: `Processando vdeo...`,\r\n          progress: Math.round((i / selectedIndices.length) * 100)\r\n        });\r\n  \r\n        const frameIndex = selectedIndices[i];\r\n        const dataUrl = frames[frameIndex].toDataURL('image/png');\r\n        const fileName = `frames/frame_${i.toString().padStart(4, '0')}.png`;\r\n        \r\n        try {\r\n          await this.ffmpeg.writeFile(fileName, await fetchFile(dataUrl));\r\n        } catch (frameError) {\r\n          console.error(`Erro ao processar frame ${i + 1}:`, frameError);\r\n          throw new Error(`Falha ao processar frame ${i + 1}`);\r\n        }\r\n      }\r\n\r\n      onStatusUpdate?.({ status: 'encoding', message: 'Gerando vdeo...' });\r\n\r\n      // Aumentar framerate para animao mais suave\r\n      await this.ffmpeg.exec([\r\n        '-framerate', '24',  //  Aumento para 30fps para mais suavidade\r\n        '-pattern_type', 'glob',\r\n        '-i', 'frames/frame_*.png',\r\n        '-c:v', 'libx264',\r\n        '-preset', 'medium',  //  Mude para 'slow' para melhor qualidade (vai demorar mais)\r\n        '-crf', '20',       //  Menor valor = melhor qualidade (18  quase sem perdas)\r\n        '-pix_fmt', 'yuv420p',\r\n        '-profile:v', 'high',\r\n        '-vf', 'scale=trunc(iw/2)*2:trunc(ih/2)*2',\r\n        '-movflags', '+faststart',\r\n        'output.mp4'\r\n      ]);\r\n      \r\n      // Ler arquivo gerado\r\n      const data = await this.ffmpeg.readFile('output.mp4');\r\n      const blob = new Blob([data.buffer], { type: 'video/mp4' });\r\n\r\n      // Salvar em cache para uso futuro\r\n      this.cachedFiles.mp4 = blob;\r\n\r\n      return blob;\r\n\r\n    } catch (error) {\r\n      console.error('Erro ao gerar vdeo:', error);\r\n      throw new Error(`Falha ao gerar vdeo: ${error.message}`);\r\n    }\r\n  }\r\n\r\n  async generateGif(frames, templateName, onStatusUpdate) {\r\n    // Verificar se j temos um GIF em cache\r\n    if (this.cachedFiles.gif) {\r\n      console.log(' Usando GIF em cache (memria)');\r\n      onStatusUpdate?.({ status: 'cached', message: 'Usando GIF j preparado anteriormente...' });\r\n      return this.cachedFiles.gif;\r\n    }\r\n\r\n    try {\r\n      if (!this.isLoaded) {\r\n        await this.initialize();\r\n      }\r\n\r\n      // Limpar sistema de arquivos antes de comear\r\n      await this.cleanupFileSystem();\r\n\r\n      onStatusUpdate?.({ status: 'processing', message: 'Processando GIF...' });\r\n\r\n      // Criar diretrio para frames\r\n      try {\r\n        await this.ffmpeg.createDir('frames');\r\n      } catch (dirError) {\r\n        console.warn(\"Erro ao criar diretrio, tentando continuar:\", dirError);\r\n        // Continuar mesmo se o diretrio j existir\r\n      }\r\n\r\n      // Selecionar frames com foco nas transies\r\n      // Importante: para preservar transies, precisamos capturar frames sequenciais\r\n      // em momentos de transio e alguns frames-chave durante perodos estticos\r\n      const selectedIndices = [];\r\n      const totalFrames = frames.length;\r\n      \r\n      // Preservar o incio e o fim\r\n      selectedIndices.push(0);\r\n      \r\n      // Distribuir outros frames com foco nas reas de transio\r\n      // Esta  uma abordagem inteligente que d prioridade s transies\r\n      // enquanto mantm alguns frames regulares para continuidade\r\n      \r\n      // Identificar possveis transies (onde h mais movimento)\r\n      const transitionPoints = [];\r\n      const transitionLength = 12; // Quantidade estimada de frames em uma transio\r\n      \r\n      // Identificar pontos provveis de transio com base nas quantidades de cards\r\n      // Estimando que temos X cards, teremos X-1 transies entre eles\r\n      const cardsCount = Math.max(2, Math.ceil(totalFrames / 24)); // Estimativa de quantos cards existem\r\n      \r\n      for (let i = 1; i < cardsCount; i++) {\r\n        // Estimar posio de cada transio\r\n        const transitionIndex = Math.floor((i * totalFrames) / cardsCount);\r\n        transitionPoints.push({\r\n          start: Math.max(0, transitionIndex - transitionLength/2),\r\n          end: Math.min(totalFrames - 1, transitionIndex + transitionLength/2)\r\n        });\r\n      }\r\n      \r\n      // Adicionar a transio do ltimo para o primeiro (se circular)\r\n      if (cardsCount > 2) {\r\n        transitionPoints.push({\r\n          start: Math.max(0, totalFrames - transitionLength),\r\n          end: totalFrames - 1\r\n        });\r\n      }\r\n      \r\n      // Capturar mais frames em reas de transio e menos em reas estticas\r\n      const maxGifFrames = 80; // Limite para evitar GIFs enormes\r\n      \r\n      if (totalFrames <= maxGifFrames) {\r\n        // Se temos poucos frames, usar todos eles\r\n        for (let i = 0; i < totalFrames; i++) {\r\n          selectedIndices.push(i);\r\n        }\r\n      } else {\r\n        // Estratgia: usar mais frames nas transies e menos nas partes estticas\r\n        \r\n        // Primeiro, marcar todos os frames de transio\r\n        const transitionFrames = new Set();\r\n        transitionPoints.forEach(point => {\r\n          for (let i = point.start; i <= point.end; i++) {\r\n            transitionFrames.add(i);\r\n          }\r\n        });\r\n        \r\n        // Calcular quantos frames de transio temos\r\n        const transitionFramesCount = transitionFrames.size;\r\n        \r\n        // Decidir quantos frames estticos adicionar\r\n        const remainingFrames = maxGifFrames - transitionFramesCount;\r\n        const staticFramesNeeded = Math.max(0, remainingFrames);\r\n        \r\n        // Adicionar todos os frames de transio\r\n        transitionFrames.forEach(idx => selectedIndices.push(idx));\r\n        \r\n        // Adicionar frames estticos distribudos uniformemente\r\n        if (staticFramesNeeded > 0 && totalFrames > transitionFramesCount) {\r\n          const staticFrameIndices = [];\r\n          for (let i = 0; i < totalFrames; i++) {\r\n            if (!transitionFrames.has(i)) {\r\n              staticFrameIndices.push(i);\r\n            }\r\n          }\r\n          \r\n          // Selecionar frames estticos uniformemente\r\n          const step = Math.max(1, Math.floor(staticFrameIndices.length / staticFramesNeeded));\r\n          for (let i = 0; i < staticFrameIndices.length; i += step) {\r\n            if (selectedIndices.length < maxGifFrames && i < staticFrameIndices.length) {\r\n              selectedIndices.push(staticFrameIndices[i]);\r\n            }\r\n          }\r\n        }\r\n        \r\n        // Ordenar os ndices para processamento sequencial\r\n        selectedIndices.sort((a, b) => a - b);\r\n      }\r\n      \r\n      console.log(` Processando ${selectedIndices.length} frames para GIF (de ${frames.length} totais)`);\r\n\r\n      // Escrever os frames selecionados no sistema de arquivos\r\n      for (let i = 0; i < selectedIndices.length; i++) {\r\n        onStatusUpdate?.({ \r\n          status: 'processing', \r\n          message: `Capturando GIF...`,\r\n          progress: Math.round((i / selectedIndices.length) * 100)\r\n        });\r\n  \r\n        try {\r\n          // ndice no array original de frames\r\n          const frameIndex = selectedIndices[i];\r\n          \r\n          // Usar PNG para melhor qualidade nas transies\r\n          const dataUrl = frames[frameIndex].toDataURL('image/png');\r\n          const fileName = `frames/frame_${i.toString().padStart(4, '0')}.png`;\r\n          await this.ffmpeg.writeFile(fileName, await fetchFile(dataUrl));\r\n        } catch (frameError) {\r\n          console.error(`Erro ao processar frame ${i + 1}:`, frameError);\r\n          // Continuar mesmo com erro em um frame\r\n        }\r\n      }\r\n\r\n      onStatusUpdate?.({ status: 'encoding', message: 'Gerando GIF...' });\r\n\r\n      // Tente vrias abordagens para gerao de GIF, do mais robusto ao mais avanado\r\n      try {\r\n        // Mtodo 1: Abordagem simplificada (mais robusta)\r\n        try {\r\n           // Gerar paleta otimizada primeiro\r\n  await this.ffmpeg.exec([\r\n    '-framerate', '15',\r\n    '-pattern_type', 'glob',\r\n    '-i', 'frames/frame_*.png',\r\n    '-vf', 'palettegen=stats_mode=diff',\r\n    'palette.png'\r\n  ]);\r\n      \r\n  // Usar a paleta para criar um GIF de alta qualidade\r\n  await this.ffmpeg.exec([\r\n    '-framerate', '15',\r\n    '-pattern_type', 'glob',\r\n    '-i', 'frames/frame_*.png',\r\n    '-i', 'palette.png',\r\n    '-lavfi', 'fps=15,scale=400:-1:flags=lanczos [x]; [x][1:v] paletteuse=dither=sierra2_4a',\r\n    'output.gif'\r\n  ]);\r\n} catch (error) {\r\n  console.warn(\"Mtodo de paleta falhou, tentando mtodo simplificado:\", error);\r\n  \r\n  // Mtodo 2: Alternativa mais simples se o primeiro mtodo falhar\r\n  await this.ffmpeg.exec([\r\n    '-framerate', '12',  \r\n    '-pattern_type', 'glob',\r\n    '-i', 'frames/frame_*.png',\r\n    '-vf', 'scale=400:-1:flags=lanczos',\r\n    'output.gif'\r\n  ]);}\r\n      } catch (allMethodsError) {\r\n        console.error(\"Todos os mtodos de gerao de GIF falharam:\", allMethodsError);\r\n        throw new Error(`Falha em todas as tentativas de gerao de GIF: ${allMethodsError.message}`);\r\n      }\r\n      \r\n      // Ler o arquivo resultante\r\n      let data;\r\n      try {\r\n        data = await this.ffmpeg.readFile('output.gif');\r\n      } catch (readError) {\r\n        console.error(\"Erro ao ler arquivo GIF:\", readError);\r\n        throw new Error(`Erro ao ler GIF gerado: ${readError.message}`);\r\n      }\r\n      \r\n      const blob = new Blob([data.buffer], { type: 'image/gif' });\r\n      \r\n      // Salvar em cache para uso futuro\r\n      this.cachedFiles.gif = blob;\r\n      \r\n      // Limpar sistema de arquivos aps sucesso\r\n      try {\r\n        await this.cleanupFileSystem();\r\n      } catch (cleanError) {\r\n        console.warn(\"Erro ao limpar sistema de arquivos:\", cleanError);\r\n        // No interromper por erro na limpeza\r\n      }\r\n      \r\n      return blob;\r\n\r\n    } catch (error) {\r\n      console.error('Erro ao gerar GIF:', error);\r\n      \r\n      // Tentar limpar o sistema de arquivos mesmo em caso de erro\r\n      try {\r\n        await this.cleanupFileSystem();\r\n      } catch (cleanError) {\r\n        console.warn(\"Erro ao limpar sistema de arquivos aps falha:\", cleanError);\r\n      }\r\n      \r\n      throw new Error(`Falha ao gerar GIF: ${error.message || 'Erro desconhecido'}`);\r\n    }\r\n  }\r\n\r\n  // Mtodo para pr-renderizar frames e formatos (MP4 e GIF) de forma assncrona\r\n  async preRenderAnimations(containerElement, cards, bodyText, templateName, navigationControls, onStatusUpdate) {\r\n    try {\r\n      // Indica que est em processo de pr-renderizao\r\n      this.isPreRendering = true;\r\n\r\n      console.log(\"Iniciando pr-renderizao dos frames...\");\r\n\r\n      // Gerar hash do template para armazenamento\r\n      const templateHash = this.generateTemplateHash(cards, bodyText, templateName);\r\n\r\n      // Verificar se j temos cache compatvel\r\n      if (this.capturedFramesCache && this.isCompatibleTemplate(templateHash)) {\r\n        console.log(\"Usando frames pr-renderizados do cache\");\r\n\r\n        // J temos frames, agora vamos pr-renderizar os formatos em segundo plano\r\n        // Mas no vamos manter o bloqueio da interface\r\n        this.isPreRendering = false;\r\n\r\n        // Pr-renderizar MP4 e GIF em segundo plano\r\n        this.preRenderFormats(templateName, onStatusUpdate);\r\n\r\n        return true;\r\n      }\r\n\r\n      // Capturar todos os frames\r\n      const frames = await this.captureFrames(\r\n        containerElement,\r\n        cards,\r\n        navigationControls,\r\n        onStatusUpdate,\r\n        templateHash\r\n      );\r\n\r\n      // Terminamos a captura de frames, no precisamos mais bloquear a interface\r\n      this.isPreRendering = false;\r\n      console.log(\"Frames pr-renderizados com sucesso\");\r\n\r\n      // Agora vamos gerar os formatos em segundo plano\r\n      this.preRenderFormats(templateName, onStatusUpdate);\r\n\r\n      return true;\r\n    } catch (error) {\r\n      this.isPreRendering = false;\r\n      console.error(\"Erro ao pr-renderizar frames:\", error);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  // Mtodo para pr-renderizar MP4 e GIF em segundo plano\r\n  async preRenderFormats(templateName, onStatusUpdate) {\r\n    // Se no tivermos frames capturados, no podemos gerar os formatos\r\n    if (!this.capturedFramesCache || this.capturedFramesCache.length === 0) {\r\n      console.warn(\"No h frames para pr-renderizar formatos\");\r\n      return false;\r\n    }\r\n\r\n    // No bloqueamos a interface durante a gerao dos formatos\r\n    console.log(\"Iniciando pr-renderizao de formatos em segundo plano...\");\r\n\r\n    // Pre-renderizar MP4\r\n    if (!this.cachedFiles.mp4) {\r\n      try {\r\n        console.log(\"Pr-renderizando MP4...\");\r\n        const mp4Blob = await this.generateVideo(this.capturedFramesCache, templateName, status => {\r\n          console.log(`Pr-renderizao MP4: ${status.message || status.status}`);\r\n        });\r\n        console.log(\"MP4 pr-renderizado com sucesso\");\r\n      } catch (error) {\r\n        console.error(\"Erro na pr-renderizao do MP4:\", error);\r\n      }\r\n    }\r\n\r\n    // Pre-renderizar GIF\r\n    if (!this.cachedFiles.gif) {\r\n      try {\r\n        console.log(\"Pr-renderizando GIF...\");\r\n        const gifBlob = await this.generateGif(this.capturedFramesCache, templateName, status => {\r\n          console.log(`Pr-renderizao GIF: ${status.message || status.status}`);\r\n        });\r\n        console.log(\"GIF pr-renderizado com sucesso\");\r\n      } catch (error) {\r\n        console.error(\"Erro na pr-renderizao do GIF:\", error);\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  // Verificar se est em pr-renderizao\r\n  isPreRenderingActive() {\r\n    return this.isPreRendering;\r\n  }\r\n\r\n  // Mtodo para limpar o cache quando necessrio (por exemplo, quando o contedo muda)\r\n  clearCache() {\r\n    this.cachedFiles = {\r\n      mp4: null,\r\n      gif: null\r\n    };\r\n    this.capturedFramesCache = null;\r\n    this.clearLocalStorageCache();\r\n    console.log('Cache de arquivos limpo');\r\n  }\r\n\r\n  async downloadFile(blob, fileName) {\r\n    const url = URL.createObjectURL(blob);\r\n    const link = document.createElement('a');\r\n    link.href = url;\r\n    link.download = fileName;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n\r\n    // Limpeza\r\n    setTimeout(() => {\r\n      document.body.removeChild(link);\r\n      URL.revokeObjectURL(url);\r\n    }, 100);\r\n  }\r\n\r\n  async generateStaticImage(element, templateName) {\r\n    try {\r\n      if (!element) {\r\n        throw new Error('Container de pr-visualizao no encontrado');\r\n      }\r\n\r\n      const canvas = await html2canvas(element, {\r\n        scale: 2,\r\n        backgroundColor: null,\r\n        logging: false,\r\n        useCORS: true,\r\n        allowTaint: true\r\n      });\r\n\r\n      return new Promise((resolve) => {\r\n        canvas.toBlob((blob) => {\r\n          resolve(blob);\r\n        }, 'image/png');\r\n      });\r\n    } catch (error) {\r\n      console.error('Erro ao gerar imagem esttica:', error);\r\n      throw new Error('Falha ao gerar imagem esttica');\r\n    }\r\n  }\r\n}\r\n\r\nexport const downloadPreview = new DownloadPreviewService();","// extracted by mini-css-extract-plugin\nexport default {\"viewTabs\":\"StepThree_viewTabs__kCG9M\",\"viewTab\":\"StepThree_viewTab__vs1Kg\",\"activeTab\":\"StepThree_activeTab__KTesr\",\"tabIcon\":\"StepThree_tabIcon__QuBUm\",\"viewContent\":\"StepThree_viewContent__D2rvT\",\"fadeIn\":\"StepThree_fadeIn__oWP-k\",\"visualPreview\":\"StepThree_visualPreview__48ZLv\",\"previewHeader\":\"StepThree_previewHeader__Xu2Io\",\"previewTitle\":\"StepThree_previewTitle__s1bbp\",\"previewSubtitle\":\"StepThree_previewSubtitle__HdoN+\",\"previewContainer\":\"StepThree_previewContainer__WcWUe\",\"templateInfo\":\"StepThree_templateInfo__E0pg7\",\"infoItem\":\"StepThree_infoItem__+Oq4p\",\"infoLabel\":\"StepThree_infoLabel__zu6DO\",\"infoValue\":\"StepThree_infoValue__Gj-lx\",\"formatSelector\":\"StepThree_formatSelector__zVwW8\",\"formatIcon\":\"StepThree_formatIcon__V8ZPU\",\"codeView\":\"StepThree_codeView__ndnGz\",\"codeSection\":\"StepThree_codeSection__KR+iS\",\"codeSectionHeader\":\"StepThree_codeSectionHeader__gKB7h\",\"codeSectionTitle\":\"StepThree_codeSectionTitle__5Iwk8\",\"codeActions\":\"StepThree_codeActions__VYYwp\",\"codeActionButton\":\"StepThree_codeActionButton__agIcB\",\"contentWrapper\":\"StepThree_contentWrapper__4QAMh\",\"previewSection\":\"StepThree_previewSection__MHOcT\",\"sendSection\":\"StepThree_sendSection__mzjCB\",\"sectionHeader\":\"StepThree_sectionHeader__5ha35\",\"sectionTitle\":\"StepThree_sectionTitle__1DuWn\",\"actionsContainer\":\"StepThree_actionsContainer__ujytK\",\"sendDescription\":\"StepThree_sendDescription__8lxik\",\"formGroup\":\"StepThree_formGroup__pdR9j\",\"label\":\"StepThree_label__GE+yi\",\"phoneInputWrapper\":\"StepThree_phoneInputWrapper__7SV5B\",\"phonePrefix\":\"StepThree_phonePrefix__Kbnzf\",\"phoneInput\":\"StepThree_phoneInput__IdmUT\",\"inputHelp\":\"StepThree_inputHelp__mCMnu\",\"sendButtonContainer\":\"StepThree_sendButtonContainer__F1gqw\",\"successContainer\":\"StepThree_successContainer__GPcIG\",\"successIcon\":\"StepThree_successIcon__bBmgy\",\"successTitle\":\"StepThree_successTitle__lhglT\",\"successMessage\":\"StepThree_successMessage__4aZXE\",\"phoneDisplay\":\"StepThree_phoneDisplay__WM8gw\",\"successNote\":\"StepThree_successNote__7yd5A\",\"navigationButtons\":\"StepThree_navigationButtons__s79kd\",\"sendForm\":\"StepThree_sendForm__ETB1w\",\"sendTitle\":\"StepThree_sendTitle__0qu9X\",\"formLabel\":\"StepThree_formLabel__Gs5fG\",\"errorText\":\"StepThree_errorText__gpwW6\",\"helpText\":\"StepThree_helpText__8LQM9\",\"sendButton\":\"StepThree_sendButton__L-xZ9\",\"loadingSpinner\":\"StepThree_loadingSpinner__W4gVQ\",\"spin\":\"StepThree_spin__OKjwA\",\"sendResult\":\"StepThree_sendResult__cz43f\",\"sendSuccessIcon\":\"StepThree_sendSuccessIcon__EKSh-\",\"scaleIn\":\"StepThree_scaleIn__n0+0d\",\"sendSuccessTitle\":\"StepThree_sendSuccessTitle__i3TSN\",\"sendSuccessMessage\":\"StepThree_sendSuccessMessage__HJ8tN\",\"sendResultActions\":\"StepThree_sendResultActions__tRdI+\",\"sendAgainButton\":\"StepThree_sendAgainButton__KOmqT\",\"previewAutomation\":\"StepThree_previewAutomation__cDul-\",\"previewButton\":\"StepThree_previewButton__ydSay\",\"playing\":\"StepThree_playing__B9CD6\",\"playIcon\":\"StepThree_playIcon__Nx7zQ\",\"progressBar\":\"StepThree_progressBar__l0X6c\",\"progressFill\":\"StepThree_progressFill__oit6e\",\"statusIndicator\":\"StepThree_statusIndicator__OuJDD\",\"downloadOptions\":\"StepThree_downloadOptions__I1D49\",\"downloadTitle\":\"StepThree_downloadTitle__f8eX-\",\"downloadIcon\":\"StepThree_downloadIcon__Jywx3\",\"formatOptions\":\"StepThree_formatOptions__dZhTM\",\"formatOption\":\"StepThree_formatOption__OT2fI\",\"activeFormat\":\"StepThree_activeFormat__kuGER\",\"formatLabel\":\"StepThree_formatLabel__fY0MN\",\"checkMark\":\"StepThree_checkMark__SFu10\",\"downloadActionArea\":\"StepThree_downloadActionArea__ZhhVH\",\"downloadButton\":\"StepThree_downloadButton__HlXSy\",\"progressBarContainer\":\"StepThree_progressBarContainer__o6QJp\",\"progressPercentage\":\"StepThree_progressPercentage__PUzKu\",\"downloadError\":\"StepThree_downloadError__fEME5\",\"downloadSuccess\":\"StepThree_downloadSuccess__F3agh\",\"ffmpegError\":\"StepThree_ffmpegError__KP7Xt\",\"errorIcon\":\"StepThree_errorIcon__QrUjs\",\"fallbackButton\":\"StepThree_fallbackButton__MaHS3\",\"sendView\":\"StepThree_sendView__hheqd\",\"container\":\"StepThree_container__vCpGb\"};","// src/components/previews/CarouselController.js\r\n\r\n/**\r\n * Controlador para permitir o acesso programtico ao CarouselPreview\r\n * Com suporte para desabilitar interao durante pr-renderizao\r\n */\r\nimport React, { createContext, useContext, useState, useRef, useEffect } from 'react';\r\nimport { downloadPreview } from './downloadPreview';\r\n\r\n// Criao do contexto para controle do carrossel\r\nconst CarouselControlContext = createContext();\r\n\r\n/**\r\n * Hook para utilizar o controle do carrossel\r\n * @returns {Object} Funes de controle do carrossel\r\n */\r\nexport const useCarouselControl = () => {\r\n  const context = useContext(CarouselControlContext);\r\n  if (!context) {\r\n    throw new Error('useCarouselControl deve ser usado dentro de um CarouselControlProvider');\r\n  }\r\n  return context;\r\n};\r\n\r\n/**\r\n * Provider para controle programtico do carrossel\r\n * @param {Object} props - Propriedades do componente\r\n * @returns {JSX.Element} Provider do contexto\r\n */\r\nexport const CarouselControlProvider = ({ children }) => {\r\n  const [currentCardIndex, setCurrentCardIndex] = useState(0);\r\n  const [pendingCardIndex, setPendingCardIndex] = useState(null);\r\n  const carouselRef = useRef(null);\r\n  const [isInitialized, setIsInitialized] = useState(false);\r\n  const [interactionDisabled, setInteractionDisabled] = useState(false);\r\n  \r\n  // Verificar periodicamente se a pr-renderizao est ativa\r\n  useEffect(() => {\r\n    // Funo para verificar e atualizar o estado\r\n    const checkPreRendering = () => {\r\n      const preRenderingActive = downloadPreview.isPreRenderingActive();\r\n      setInteractionDisabled(preRenderingActive);\r\n    };\r\n    \r\n    // Inicialmente verificar se j est em pr-renderizao\r\n    checkPreRendering();\r\n    \r\n    // Polling para verificar mudanas na pr-renderizao\r\n    const intervalId = setInterval(checkPreRendering, 500);\r\n    \r\n    // Tambm verificar quando a janela recebe foco\r\n    window.addEventListener('focus', checkPreRendering);\r\n    \r\n    return () => {\r\n      clearInterval(intervalId);\r\n      window.removeEventListener('focus', checkPreRendering);\r\n    };\r\n  }, []);\r\n  \r\n  // Registrar uma referncia ao componente CarouselPreview\r\n  const registerCarousel = (ref) => {\r\n    if (ref && !carouselRef.current) {\r\n      carouselRef.current = ref;\r\n      setIsInitialized(true);\r\n    }\r\n  };\r\n  \r\n  // Avanar para o prximo card\r\n  const goToNextCard = () => {\r\n    // Evitar navegao durante pr-renderizao\r\n    if (interactionDisabled || !carouselRef.current) return;\r\n    \r\n    const cards = carouselRef.current.getCards();\r\n    if (!cards || cards.length === 0) return;\r\n    \r\n    const newIndex = currentCardIndex === cards.length - 1 ? 0 : currentCardIndex + 1;\r\n    setPendingCardIndex(newIndex);\r\n  };\r\n  \r\n  // Retroceder para o card anterior\r\n  const goToPrevCard = () => {\r\n    // Evitar navegao durante pr-renderizao\r\n    if (interactionDisabled || !carouselRef.current) return;\r\n    \r\n    const cards = carouselRef.current.getCards();\r\n    if (!cards || cards.length === 0) return;\r\n    \r\n    const newIndex = currentCardIndex === 0 ? cards.length - 1 : currentCardIndex - 1;\r\n    setPendingCardIndex(newIndex);\r\n  };\r\n  \r\n  // Ir para um card especfico\r\n  const goToCard = (index) => {\r\n    // Permitir navegao programtica durante pr-renderizao\r\n    // apenas se for chamado pelo componente de pr-renderizao\r\n    if (interactionDisabled && !downloadPreview.isPreRenderingActive()) return;\r\n    \r\n    if (!carouselRef.current) return;\r\n    \r\n    const cards = carouselRef.current.getCards();\r\n    if (!cards || cards.length === 0) return;\r\n    \r\n    if (index >= 0 && index < cards.length) {\r\n      // Em vez de chamar diretamente, definimos um estado pendente\r\n      // que ser processado no useEffect\r\n      setPendingCardIndex(index);\r\n    }\r\n  };\r\n  \r\n  // Efeito para processar as mudanas de card de forma segura\r\n  // evitando atualizaes durante renderizao\r\n  useEffect(() => {\r\n    if (isInitialized && pendingCardIndex !== null) {\r\n      // Atualizar o estado interno primeiro\r\n      setCurrentCardIndex(pendingCardIndex);\r\n      \r\n      // Usar setTimeout para garantir que o mtodo no  chamado durante o ciclo de renderizao\r\n      const timeoutId = setTimeout(() => {\r\n        if (carouselRef.current) {\r\n          carouselRef.current.goToCard(pendingCardIndex);\r\n        }\r\n        // Limpar o pendingCardIndex aps o processamento\r\n        setPendingCardIndex(null);\r\n      }, 0);\r\n      \r\n      return () => clearTimeout(timeoutId);\r\n    }\r\n  }, [isInitialized, pendingCardIndex]);\r\n  \r\n  // Obter o ndice atual\r\n  const getCurrentIndex = () => currentCardIndex;\r\n  \r\n  // Obter o nmero total de cards\r\n  const getTotalCards = () => {\r\n    if (!carouselRef.current) return 0;\r\n    const cards = carouselRef.current.getCards();\r\n    return cards ? cards.length : 0;\r\n  };\r\n  \r\n  return (\r\n    <CarouselControlContext.Provider \r\n      value={{\r\n        registerCarousel,\r\n        goToNextCard,\r\n        goToPrevCard,\r\n        goToCard,\r\n        getCurrentIndex,\r\n        getTotalCards,\r\n        isInitialized,\r\n        interactionDisabled\r\n      }}\r\n    >\r\n      {children}\r\n    </CarouselControlContext.Provider>\r\n  );\r\n};\r\n\r\n/**\r\n * Componente HOC para conectar um carrossel ao controlador\r\n * @param {React.Component} WrappedComponent - Componente a ser conectado\r\n * @returns {React.Component} Componente conectado ao controlador\r\n */\r\nexport const withCarouselControl = (WrappedComponent) => {\r\n  const WithCarouselControl = React.forwardRef((props, ref) => {\r\n    const { registerCarousel, interactionDisabled } = useCarouselControl();\r\n    \r\n    // Usamos um useEffect para registrar o ref aps a montagem\r\n    // isso evita o erro de atualizao durante renderizao\r\n    const innerRef = React.useRef(null);\r\n    \r\n    React.useEffect(() => {\r\n      if (innerRef.current) {\r\n        registerCarousel(innerRef.current);\r\n      }\r\n    }, [registerCarousel]);\r\n    \r\n    // Funo para mesclar refs externos e internos\r\n    const setRefs = (element) => {\r\n      innerRef.current = element;\r\n      \r\n      // Tambm repassamos para o ref externo, se houver\r\n      if (ref) {\r\n        if (typeof ref === 'function') {\r\n          ref(element);\r\n        } else {\r\n          ref.current = element;\r\n        }\r\n      }\r\n    };\r\n    \r\n    // Passa a flag de desabilitao para o componente de carrossel\r\n    return <WrappedComponent {...props} ref={setRefs} disableInteraction={interactionDisabled} />;\r\n  });\r\n  \r\n  WithCarouselControl.displayName = `WithCarouselControl(${WrappedComponent.displayName || WrappedComponent.name || 'Component'})`;\r\n  \r\n  return WithCarouselControl;\r\n};\r\n\r\n/**\r\n * Exemplo de uso do controlador para animao automtica\r\n * @param {Object} props - Propriedades do componente\r\n * @returns {JSX.Element} Controlador de animao\r\n */\r\nexport const CarouselAutoPlayer = ({ \r\n  interval = 3000, \r\n  autoPlay = true,\r\n  onComplete = () => {}\r\n}) => {\r\n  const { \r\n    goToNextCard, \r\n    getCurrentIndex, \r\n    getTotalCards, \r\n    isInitialized,\r\n    interactionDisabled\r\n  } = useCarouselControl();\r\n  \r\n  const [isPlaying, setIsPlaying] = useState(autoPlay);\r\n  const timerRef = useRef(null);\r\n  \r\n  // Iniciar reproduo automtica\r\n  const startAutoPlay = () => {\r\n    // No iniciar se a interao est desabilitada (pr-renderizao em andamento)\r\n    if (interactionDisabled) return;\r\n    \r\n    if (timerRef.current) clearInterval(timerRef.current);\r\n    \r\n    setIsPlaying(true);\r\n    timerRef.current = setInterval(() => {\r\n      const currentIndex = getCurrentIndex();\r\n      const totalCards = getTotalCards();\r\n      \r\n      if (currentIndex === totalCards - 1) {\r\n        // Chegou ao ltimo card, para a reproduo\r\n        clearInterval(timerRef.current);\r\n        setIsPlaying(false);\r\n        onComplete();\r\n      } else {\r\n        goToNextCard();\r\n      }\r\n    }, interval);\r\n  };\r\n  \r\n  // Parar reproduo automtica\r\n  const stopAutoPlay = () => {\r\n    if (timerRef.current) {\r\n      clearInterval(timerRef.current);\r\n      timerRef.current = null;\r\n    }\r\n    setIsPlaying(false);\r\n  };\r\n  \r\n  // Se a interao for desabilitada, parar a reproduo\r\n  useEffect(() => {\r\n    if (interactionDisabled && isPlaying) {\r\n      stopAutoPlay();\r\n    } else if (!interactionDisabled && autoPlay && isInitialized && !isPlaying) {\r\n      startAutoPlay();\r\n    }\r\n  }, [interactionDisabled, autoPlay, isInitialized, isPlaying]);\r\n  \r\n  // Espera pela inicializao e depois inicia a reproduo, se autoPlay estiver ativo\r\n  useEffect(() => {\r\n    if (isInitialized && autoPlay && !interactionDisabled) {\r\n      startAutoPlay();\r\n    }\r\n    \r\n    return () => {\r\n      if (timerRef.current) {\r\n        clearInterval(timerRef.current);\r\n      }\r\n    };\r\n  }, [autoPlay, isInitialized, interactionDisabled]);\r\n  \r\n  // No renderiza nada, apenas controla\r\n  return null;\r\n};\r\n\r\nexport default CarouselControlProvider;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"PreRenderStatus_container__kcyP2\",\"fadeIn\":\"PreRenderStatus_fadeIn__S92D-\",\"statusCard\":\"PreRenderStatus_statusCard__0dtle\",\"statusIconWrapper\":\"PreRenderStatus_statusIconWrapper__AJxKq\",\"inProgress\":\"PreRenderStatus_inProgress__X-aCB\",\"success\":\"PreRenderStatus_success__XY7ZN\",\"partialSuccess\":\"PreRenderStatus_partialSuccess__PVpmi\",\"error\":\"PreRenderStatus_error__-MB7l\",\"statusIcon\":\"PreRenderStatus_statusIcon__u4t1+\",\"statusContent\":\"PreRenderStatus_statusContent__M-sZB\",\"statusTitle\":\"PreRenderStatus_statusTitle__Bh6bJ\",\"statusMessage\":\"PreRenderStatus_statusMessage__BiQEc\",\"progressBar\":\"PreRenderStatus_progressBar__e3HCB\",\"progressIndeterminate\":\"PreRenderStatus_progressIndeterminate__mjQd2\",\"indeterminateProgress\":\"PreRenderStatus_indeterminateProgress__-Bzq-\",\"formatContainer\":\"PreRenderStatus_formatContainer__N30ZJ\",\"formatBadge\":\"PreRenderStatus_formatBadge__dE51f\",\"formatComplete\":\"PreRenderStatus_formatComplete__5qUX7\",\"spin\":\"PreRenderStatus_spin__Guvqq\"};","// src/components/ui/PreRenderStatus/PreRenderStatus.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { FiClock, FiCheckCircle, FiAlertTriangle, FiRefreshCw, FiLoader } from 'react-icons/fi';\r\nimport styles from './PreRenderStatus.module.css';\r\n\r\n/**\r\n * Enhanced component that shows the pre-rendering status\r\n * @param {Object} props - Component properties\r\n * @param {Object} props.downloadPreview - Download preview service\r\n * @param {boolean} props.preRenderStarted - If pre-rendering has started\r\n * @returns {JSX.Element} Status component\r\n */\r\nconst PreRenderStatus = ({ downloadPreview, preRenderStarted = false }) => {\r\n  // Initial state based on existing cache\r\n  const [status, setStatus] = useState(() => {\r\n    if (downloadPreview.cachedFiles?.mp4 && downloadPreview.cachedFiles?.gif) {\r\n      return 'completed-all';\r\n    } else if (downloadPreview.cachedFiles?.mp4 || downloadPreview.cachedFiles?.gif) {\r\n      return 'completed-partial';\r\n    } else if (downloadPreview.hasLocalStorageCache()) {\r\n      return 'frames-stored';\r\n    } else if (downloadPreview.capturedFramesCache) {\r\n      return 'frames-captured';\r\n    } else if (preRenderStarted) {\r\n      return 'in-progress';\r\n    } else {\r\n      return 'idle';\r\n    }\r\n  });\r\n  \r\n  // Format status\r\n  const [formatStatus, setFormatStatus] = useState({\r\n    mp4: downloadPreview.cachedFiles?.mp4 ? 'completed' : 'pending',\r\n    gif: downloadPreview.cachedFiles?.gif ? 'completed' : 'pending'\r\n  });\r\n  \r\n  // Poll to check cache status every 500ms\r\n  useEffect(() => {\r\n    const checkStatus = () => {\r\n      // Check status of each format\r\n      const mp4Status = downloadPreview.cachedFiles?.mp4 ? 'completed' : 'pending';\r\n      const gifStatus = downloadPreview.cachedFiles?.gif ? 'completed' : 'pending';\r\n      \r\n      // Update format status if changed\r\n      if (mp4Status !== formatStatus.mp4 || gifStatus !== formatStatus.gif) {\r\n        setFormatStatus({\r\n          mp4: mp4Status,\r\n          gif: gifStatus\r\n        });\r\n      }\r\n      \r\n      // Check overall status\r\n      if (downloadPreview.cachedFiles?.mp4 && downloadPreview.cachedFiles?.gif) {\r\n        setStatus('completed-all');\r\n      } else if (downloadPreview.cachedFiles?.mp4 || downloadPreview.cachedFiles?.gif) {\r\n        setStatus('completed-partial');\r\n      } else if (downloadPreview.hasLocalStorageCache()) {\r\n        setStatus('frames-stored');\r\n      } else if (downloadPreview.capturedFramesCache) {\r\n        setStatus('frames-captured');\r\n      } else if (preRenderStarted) {\r\n        setStatus('in-progress');\r\n      }\r\n    };\r\n    \r\n    // Check immediately\r\n    checkStatus();\r\n    \r\n    // And continue checking periodically\r\n    const intervalId = setInterval(checkStatus, 500);\r\n    \r\n    return () => clearInterval(intervalId);\r\n  }, [downloadPreview, preRenderStarted]);\r\n  \r\n  // Don't show anything if idle\r\n  if (status === 'idle') return null;\r\n\r\n  // Helper to determine how many formats are ready\r\n  const getCompletedCount = () => {\r\n    let count = 0;\r\n    if (formatStatus.mp4 === 'completed') count++;\r\n    if (formatStatus.gif === 'completed') count++;\r\n    return count;\r\n  };\r\n  \r\n  return (\r\n    <div className={styles.container}>\r\n      {status === 'in-progress' && (\r\n        <div className={styles.statusCard}>\r\n          <div className={styles.statusIconWrapper + ' ' + styles.inProgress}>\r\n            <FiLoader className={styles.statusIcon} />\r\n          </div>\r\n          <div className={styles.statusContent}>\r\n            <h4 className={styles.statusTitle}>Estamos animando, estamos animando!</h4>\r\n            <p className={styles.statusMessage}>\r\n              Segura a! Estamos criando uma animao do seu carrossel...\r\n            </p>\r\n            <div className={styles.progressBar}>\r\n              <div className={styles.progressIndeterminate}></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {status === 'frames-captured' && (\r\n        <div className={styles.statusCard}>\r\n          <div className={styles.statusIconWrapper + ' ' + styles.inProgress}>\r\n            <FiClock className={styles.statusIcon} />\r\n          </div>\r\n          <div className={styles.statusContent}>\r\n            <h4 className={styles.statusTitle}>Processando Quadros</h4>\r\n            <p className={styles.statusMessage}>\r\n              Quase l! Que carrossel bonito esse seu ...\r\n            </p>\r\n            <div className={styles.progressBar}>\r\n              <div className={styles.progressIndeterminate}></div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {status === 'frames-stored' && (\r\n        <div className={styles.statusCard}>\r\n          <div className={styles.statusIconWrapper + ' ' + styles.inProgress}>\r\n            <FiRefreshCw className={styles.statusIcon} />\r\n          </div>\r\n          <div className={styles.statusContent}>\r\n            <h4 className={styles.statusTitle}>Preparando Formatos</h4>\r\n            <p className={styles.statusMessage}>\r\n              Gerando seus formatos de download, aguenta firme...\r\n            </p>\r\n            <div className={styles.formatContainer}>\r\n              <div className={`${styles.formatBadge} ${formatStatus.mp4 === 'completed' ? styles.formatComplete : ''}`}>\r\n                {formatStatus.mp4 === 'completed' ? '' : ''} MP4\r\n              </div>\r\n              <div className={`${styles.formatBadge} ${formatStatus.gif === 'completed' ? styles.formatComplete : ''}`}>\r\n                {formatStatus.gif === 'completed' ? '' : ''} GIF\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {status === 'completed-partial' && (\r\n        <div className={styles.statusCard}>\r\n          <div className={styles.statusIconWrapper + ' ' + styles.partialSuccess}>\r\n            <FiCheckCircle className={styles.statusIcon} />\r\n          </div>\r\n          <div className={styles.statusContent}>\r\n            <h4 className={styles.statusTitle}>Formatos Prontos</h4>\r\n            <p className={styles.statusMessage}>\r\n              {getCompletedCount()} de 2 formatos prontos para download!\r\n            </p>\r\n            <div className={styles.formatContainer}>\r\n              <div className={`${styles.formatBadge} ${formatStatus.mp4 === 'completed' ? styles.formatComplete : ''}`}>\r\n                {formatStatus.mp4 === 'completed' ? '' : ''} MP4\r\n              </div>\r\n              <div className={`${styles.formatBadge} ${formatStatus.gif === 'completed' ? styles.formatComplete : ''}`}>\r\n                {formatStatus.gif === 'completed' ? '' : ''} GIF\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n      \r\n      {status === 'completed-all' && (\r\n        <div className={styles.statusCard}>\r\n          <div className={styles.statusIconWrapper + ' ' + styles.success}>\r\n            <FiCheckCircle className={styles.statusIcon} />\r\n          </div>\r\n          <div className={styles.statusContent}>\r\n            <h4 className={styles.statusTitle}>Todos os Formatos Prontos</h4>\r\n            <p className={styles.statusMessage}>\r\n              Todos os formatos esto prontos! Faa o download agora mesmo!\r\n            </p>\r\n            <div className={styles.formatContainer}>\r\n              <div className={`${styles.formatBadge} ${styles.formatComplete}`}> MP4</div>\r\n              <div className={`${styles.formatBadge} ${styles.formatComplete}`}> GIF</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PreRenderStatus;","// src/components/StepThree.js - Verso com alertas contextuais\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { useAlert } from '../ui/AlertMessage/AlertContext'; // Adicionar esta importao\r\nimport CarouselPreview from '../previews/CarouselPreview';\r\nimport Button from '../ui/Button/Button';\r\nimport JsonViewer from '../ui/JsonViewer/JsonViewer';\r\nimport { downloadPreview } from '../previews/downloadPreview';\r\nimport {\r\n  FiChevronLeft,\r\n  FiCopy,\r\n  FiCheck,\r\n  FiSend,\r\n  FiCode,\r\n  FiDownload,\r\n  FiRefreshCw,\r\n  FiInfo,\r\n  FiCheckCircle,\r\n  FiFilm,\r\n  FiImage,\r\n  FiAlertTriangle,\r\n  FiPlayCircle\r\n} from 'react-icons/fi';\r\nimport styles from './StepThree.module.css';\r\nimport steps from '../../styles/Steps.module.css';\r\nimport {\r\n  CarouselControlProvider,\r\n  useCarouselControl,\r\n  withCarouselControl\r\n} from '../previews/CarouselController';\r\nimport html2canvas from 'html2canvas';\r\nimport PreRenderStatus from '../ui/PreRenderStatus/PreRenderStatus';\r\nimport Input from '../ui/Input/Input';\r\n\r\n// Conectar o CarouselPreview ao controlador para acesso programtico\r\nconst ControlledCarouselPreview = withCarouselControl(CarouselPreview);\r\n\r\n// Enhanced Download Options Component\r\nconst DownloadOptions = ({\r\n  previewFormat,\r\n  setPreviewFormat,\r\n  captureSequence,\r\n  handleSimpleDownload,\r\n  isGeneratingPreview,\r\n  downloadStatus,\r\n  areDownloadButtonsDisabled,\r\n  interactionDisabled,\r\n  alert // Passar o sistema de alertas para esse componente\r\n}) => {\r\n  return (\r\n    <div className={styles.downloadOptions}>\r\n      <h4 className={styles.downloadTitle}>\r\n        <span className={styles.downloadIcon}><FiDownload /></span>\r\n        Salvar Visualizao\r\n      </h4>\r\n      \r\n      {downloadStatus.status === 'error' && downloadStatus.message.includes('ferramenta de gerao de vdeo') ? (\r\n        <div className={styles.ffmpegError}>\r\n          <FiAlertTriangle className={styles.errorIcon} />\r\n          <p>No foi possvel carregar a ferramenta de gerao de vdeo. Voc ainda pode baixar uma imagem esttica.</p>\r\n          <Button\r\n            variant=\"outline\"\r\n            color=\"primary\"\r\n            onClick={handleSimpleDownload}\r\n            loading={isGeneratingPreview}\r\n            disabled={isGeneratingPreview || interactionDisabled}\r\n            iconLeft={<FiImage />}\r\n          >\r\n            Baixar Imagem Esttica\r\n          </Button>\r\n        </div>\r\n      ) : (\r\n        <>\r\n          <div className={styles.formatSelector}>\r\n            <div className={styles.formatOptions}>\r\n              <Button\r\n                variant={previewFormat === 'mp4' ? 'solid' : 'outline'}\r\n                color={previewFormat === 'mp4' ? 'primary' : 'content'}\r\n                onClick={() => setPreviewFormat('mp4')}\r\n                disabled={areDownloadButtonsDisabled}\r\n                className={styles.formatOption}\r\n                iconLeft={<FiFilm />}\r\n              >\r\n                Vdeo MP4\r\n                {previewFormat === 'mp4' && <span className={styles.checkMark}><FiCheck /></span>}\r\n              </Button>\r\n              \r\n              <Button\r\n                variant={previewFormat === 'gif' ? 'solid' : 'outline'}\r\n                color={previewFormat === 'gif' ? 'primary' : 'content'}\r\n                onClick={() => setPreviewFormat('gif')}\r\n                disabled={areDownloadButtonsDisabled}\r\n                className={styles.formatOption}\r\n                iconLeft={<FiImage />}\r\n              >\r\n                Animao GIF\r\n                {previewFormat === 'gif' && <span className={styles.checkMark}><FiCheck /></span>}\r\n              </Button>\r\n              \r\n              <Button\r\n                variant={previewFormat === 'png' ? 'solid' : 'outline'}\r\n                color={previewFormat === 'png' ? 'primary' : 'content'}\r\n                onClick={() => setPreviewFormat('png')}\r\n                disabled={areDownloadButtonsDisabled}\r\n                className={styles.formatOption}\r\n                iconLeft={<FiImage />}\r\n              >\r\n                Imagem Esttica\r\n                {previewFormat === 'png' && <span className={styles.checkMark}><FiCheck /></span>}\r\n              </Button>\r\n            </div>\r\n          </div>\r\n\r\n          <div className={styles.downloadActionArea}>\r\n            <Button\r\n              variant=\"solid\"\r\n              color=\"primary\"\r\n              onClick={previewFormat === 'png' ? handleSimpleDownload : captureSequence}\r\n              loading={isGeneratingPreview}\r\n              disabled={areDownloadButtonsDisabled}\r\n              iconLeft={<FiDownload />}\r\n              fullWidth\r\n              className={styles.downloadButton}\r\n            >\r\n              {isGeneratingPreview\r\n                ? `${downloadStatus.message || 'Processando...'}`\r\n                : `Baixar ${previewFormat === 'mp4' ? 'Vdeo' : previewFormat === 'gif' ? 'GIF' : 'Imagem'}`}\r\n            </Button>\r\n\r\n            {downloadStatus.status !== 'idle' && (\r\n              <div className={styles.statusIndicator}>\r\n                {downloadStatus.progress > 0 && downloadStatus.status !== 'success' && downloadStatus.status !== 'error' && (\r\n                  <div className={styles.progressBarContainer}>\r\n                    <div className={styles.progressBar}>\r\n                      <div \r\n                        className={styles.progressFill} \r\n                        style={{ width: `${downloadStatus.progress}%` }}\r\n                      ></div>\r\n                    </div>\r\n                    <span className={styles.progressPercentage}>{Math.round(downloadStatus.progress)}%</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {downloadStatus.status === 'error' && (\r\n            <div className={styles.downloadError}>\r\n              <FiAlertTriangle className={styles.errorIcon} />\r\n              <p>{downloadStatus.message}</p>\r\n              <Button\r\n                variant=\"outline\"\r\n                color=\"primary\"\r\n                onClick={handleSimpleDownload}\r\n                disabled={areDownloadButtonsDisabled}\r\n              >\r\n                Usar Imagem Esttica\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {downloadStatus.status === 'success' && (\r\n            <div className={styles.downloadSuccess}>\r\n              <FiCheckCircle className={styles.successIcon} />\r\n              <p>{downloadStatus.message}</p>\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst PreviewContent = ({ \r\n  cards, \r\n  bodyText, \r\n  templateName, \r\n  finalJson,\r\n  copyToClipboard,\r\n  justCopied,\r\n  handleCopy,\r\n  handleDownload,\r\n  downloadStatus,\r\n  setDownloadStatus,\r\n  isGeneratingPreview,\r\n  setIsGeneratingPreview,\r\n  previewFormat,\r\n  setPreviewFormat,\r\n  alert // Passar o sistema de alertas para esse componente\r\n}) => {\r\n  // Obter funes de controle do carrossel\r\n  const { goToNextCard, goToPrevCard, goToCard, isInitialized, interactionDisabled } = useCarouselControl();\r\n  const previewContainerRef = useRef(null);\r\n  const [preRenderStarted, setPreRenderStarted] = useState(false);\r\n  const [areDownloadButtonsDisabled, setAreDownloadButtonsDisabled] = useState(false);\r\n\r\n  // Funo para atualizar status com informaes de progresso e mostrar alertas\r\n  const updateStatusWithProgress = (status) => {\r\n    setDownloadStatus({\r\n      ...status,\r\n      message: status.message || 'Processando...',\r\n      progress: status.progress || 0\r\n    });\r\n    \r\n    // Adicionar alertas baseados no status\r\n    if (status.status === 'success') {\r\n      alert.success(`Download concludo: ${previewFormat.toUpperCase()} pronto!`, {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 3000\r\n      });\r\n    } else if (status.status === 'error') {\r\n      alert.error(`Falha ao gerar ${previewFormat.toUpperCase()}: ${status.message}`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 7000\r\n      });\r\n    }\r\n  };\r\n\r\n  // Verificar se os botes de download devem estar desabilitados\r\n  useEffect(() => {\r\n    // Os botes estaro desabilitados se:\r\n    // 1. O carrossel no est inicializado, ou\r\n    // 2. A interao est desabilitada (pr-renderizao ativa), ou\r\n    // 3. A pr-visualizao est sendo gerada\r\n    const shouldDisable = !isInitialized || interactionDisabled || isGeneratingPreview;\r\n    setAreDownloadButtonsDisabled(shouldDisable);\r\n  }, [isInitialized, interactionDisabled, isGeneratingPreview]);\r\n\r\n  const preRenderAnimations = async () => {\r\n    if (!isInitialized || !previewContainerRef.current) return;\r\n    \r\n    try {\r\n      setPreRenderStarted(true);\r\n      \r\n      const navigationControls = {\r\n        goToCard,\r\n        goToNextCard,\r\n        goToPrevCard\r\n      };\r\n      \r\n      console.log(\"Iniciando pr-renderizao em background...\");\r\n      \r\n      // Gerar hash do template para identificao no localStorage\r\n      const templateHash = downloadPreview.generateTemplateHash(cards, bodyText, templateName);\r\n      \r\n      // Iniciar a pr-renderizao sem bloquear a interface\r\n      setTimeout(async () => {\r\n        try {\r\n          await downloadPreview.preRenderAnimations(\r\n            previewContainerRef.current,\r\n            cards,\r\n            bodyText,\r\n            templateName,\r\n            navigationControls,\r\n            (status) => {\r\n              console.log(`Pr-renderizao: ${status.message || status.status} ${status.progress || ''}`);\r\n            }\r\n          );\r\n          \r\n          // Alerta quando a pr-renderizao for concluda\r\n          alert.info(\"Pr-renderizao concluda. O download ser mais rpido agora!\", {\r\n            position: 'bottom-right',\r\n            autoCloseTime: 3000\r\n          });\r\n        } catch (error) {\r\n          console.error(\"Erro durante pr-renderizao:\", error);\r\n          // Silenciosamente falha, j que  apenas otimizao\r\n        }\r\n      }, 1000);\r\n      \r\n    } catch (error) {\r\n      console.error(\"Erro ao iniciar pr-renderizao:\", error);\r\n    }\r\n  };\r\n  \r\n  useEffect(() => {\r\n    // Quando o carrossel estiver inicializado, comece a pr-renderizao\r\n    if (isInitialized && cards.length > 0) {\r\n      preRenderAnimations();\r\n    }\r\n  }, [isInitialized, cards.length]);\r\n\r\n  // Componente de pr-visualizao automtica\r\n  const PreviewAutomation = () => {\r\n    const [isPlaying, setIsPlaying] = useState(false);\r\n    \r\n    // Iniciar reproduo automtica da pr-visualizao\r\n    const startPreview = () => {\r\n      if (!isInitialized || isGeneratingPreview || interactionDisabled) return;\r\n      \r\n      setIsPlaying(true);\r\n      // Primeiro vamos para o primeiro card\r\n      goToCard(0);\r\n    };\r\n    \r\n    // Manipulador para quando a animao de pr-visualizao terminar\r\n    const handlePreviewComplete = () => {\r\n      setIsPlaying(false);\r\n      // Voltar para o primeiro card quando terminar\r\n      setTimeout(() => goToCard(0), 300);\r\n    };\r\n    \r\n    return (\r\n      <div className={styles.previewAutomation}>\r\n        <Button \r\n          className={`${styles.previewButton} ${isPlaying ? styles.playing : ''}`}\r\n          onClick={startPreview}\r\n          disabled={isGeneratingPreview || !isInitialized || interactionDisabled}\r\n          iconLeft={<FiPlayCircle className={styles.playIcon} />}\r\n          variant=\"outline\"\r\n          color=\"primary\"\r\n        >\r\n          {isPlaying ? 'Reproduzindo...' : 'Visualizar Animao'}\r\n        </Button>\r\n        \r\n        {isPlaying && (\r\n          <ControlledCarouselPreview\r\n            interval={1000} \r\n            autoPlay={true} \r\n            onComplete={handlePreviewComplete}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Funo aprimorada para capturar sequncia de frames\r\n  const captureSequence = async () => {\r\n    // Garantir que o carrossel est inicializado antes de comear\r\n    if (!isInitialized) {\r\n      alert.error(\"O carrossel ainda no est inicializado. Tente novamente em instantes.\", {\r\n        position: 'top-center'\r\n      });\r\n      setDownloadStatus({ \r\n        status: 'error', \r\n        message: 'O carrossel ainda no est inicializado. Tente novamente em instantes.' \r\n      });\r\n      return;\r\n    }\r\n    \r\n    // Gerar hash do template para verificao de cache\r\n    const templateHash = downloadPreview.generateTemplateHash(cards, bodyText, templateName);\r\n    \r\n    setIsGeneratingPreview(true);\r\n    \r\n    try {\r\n      // Primeiro verificar se j temos o blob em cache diretamente na memria\r\n      if (downloadPreview.cachedFiles && downloadPreview.cachedFiles[previewFormat]) {\r\n        setDownloadStatus({ \r\n          status: 'cached', \r\n          message: 'Usando arquivo em memria...',\r\n          progress: 80\r\n        });\r\n          \r\n        // Download diretamente do cache em memria\r\n        const blob = downloadPreview.cachedFiles[previewFormat];\r\n        const fileName = `${templateName || 'carrossel'}_preview.${previewFormat}`;\r\n        \r\n        setDownloadStatus({ status: 'downloading', message: 'Preparando download...', progress: 90 });\r\n        await downloadPreview.downloadFile(blob, fileName);\r\n        \r\n        setDownloadStatus({ status: 'success', message: 'Download concludo!', progress: 100 });\r\n        \r\n        // Mostrar alerta de sucesso\r\n        alert.success(`${previewFormat.toUpperCase()} gerado com sucesso!`, {\r\n          position: 'bottom-right'\r\n        });\r\n        \r\n        // Reset status aps um delay\r\n        setTimeout(() => {\r\n          setDownloadStatus({ status: 'idle', message: '' });\r\n        }, 3000);\r\n        \r\n        setIsGeneratingPreview(false);\r\n        return;\r\n      }\r\n      \r\n      // Se no temos em cache de memria, verificar localStorage\r\n      if (downloadPreview.hasLocalStorageCache() && downloadPreview.isCompatibleTemplate(templateHash)) {\r\n        setDownloadStatus({ \r\n          status: 'cached', \r\n          message: 'Usando frames do cache local...',\r\n          progress: 30 \r\n        });\r\n      }\r\n      \r\n      // Se chegamos at aqui, precisamos gerar o formato solicitado\r\n      \r\n      // Criar um objeto com os controles de navegao para passar ao servio de download\r\n      const navigationControls = {\r\n        goToCard,\r\n        goToNextCard,\r\n        goToPrevCard\r\n      };\r\n      \r\n      // Verificar se j temos frames capturados em cache\r\n      let frames;\r\n      if (downloadPreview.capturedFramesCache) {\r\n        setDownloadStatus({ \r\n          status: 'reusing', \r\n          message: 'Utilizando frames j capturados...',\r\n          progress: 30\r\n        });\r\n        frames = downloadPreview.capturedFramesCache;\r\n      } else {\r\n        // Se no temos frames capturados, vamos capturar\r\n        setDownloadStatus({ \r\n          status: 'capturing', \r\n          message: 'Preparando para capturar frames...',\r\n          progress: 0\r\n        });\r\n        \r\n        // Capturar os frames do carrossel, passando o elemento DOM e os controles de navegao\r\n        frames = await downloadPreview.captureFrames(\r\n          previewContainerRef.current,\r\n          cards,\r\n          navigationControls,\r\n          updateStatusWithProgress,\r\n          templateHash\r\n        );\r\n      }\r\n      \r\n      if (!frames || frames.length === 0) {\r\n        throw new Error('No foi possvel capturar imagens do carrossel');\r\n      }\r\n      \r\n      // Gerar no formato apropriado\r\n      let blob;\r\n      if (previewFormat === 'gif') {\r\n        setDownloadStatus({ \r\n          status: 'processing', \r\n          message: 'Gerando GIF...', \r\n          progress: 50 \r\n        });\r\n        \r\n        // Tentar 3 vezes com diferentes configuraes em caso de erro\r\n        for (let attempt = 1; attempt <= 3; attempt++) {\r\n          try {\r\n            blob = await downloadPreview.generateGif(frames, templateName, updateStatusWithProgress);\r\n            break; // Se funcionar, sair do loop\r\n          } catch (gifError) {\r\n            console.error(`Tentativa ${attempt} falhou:`, gifError);\r\n            \r\n            if (attempt === 3) {\r\n              // Na ltima tentativa, propagar o erro\r\n              throw gifError;\r\n            }\r\n            \r\n            // Limpar o sistema de arquivos entre tentativas\r\n            await downloadPreview.cleanupFileSystem();\r\n            \r\n            setDownloadStatus({ \r\n              status: 'retrying', \r\n              message: `Tentativa ${attempt} falhou, tentando novamente...`, \r\n              progress: 40 \r\n            });\r\n          }\r\n        }\r\n      } else {\r\n        setDownloadStatus({ \r\n          status: 'processing', \r\n          message: 'Gerando vdeo...', \r\n          progress: 50 \r\n        });\r\n        blob = await downloadPreview.generateVideo(frames, templateName, updateStatusWithProgress);\r\n      }\r\n      \r\n      // Download do arquivo\r\n      setDownloadStatus({ \r\n        status: 'downloading', \r\n        message: 'Preparando download...', \r\n        progress: 90 \r\n      });\r\n      const fileName = `${templateName || 'carrossel'}_preview.${previewFormat}`;\r\n      await downloadPreview.downloadFile(blob, fileName);\r\n      \r\n      setDownloadStatus({ \r\n        status: 'success', \r\n        message: 'Download concludo!',\r\n        progress: 100 \r\n      });\r\n      \r\n      // Mostrar alerta de sucesso\r\n      alert.success(`${previewFormat.toUpperCase()} gerado com sucesso!`, {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 3000\r\n      });\r\n      \r\n      // Reset status after a delay\r\n      setTimeout(() => {\r\n        setDownloadStatus({ status: 'idle', message: '' });\r\n      }, 3000);\r\n      \r\n    } catch (error) {\r\n      console.error('Erro ao gerar pr-visualizao animada:', error);\r\n      setDownloadStatus({\r\n        status: 'error',\r\n        message: `Falha ao gerar ${previewFormat.toUpperCase()}: ${error?.message || 'Erro desconhecido'}. Tente usar a opo de imagem esttica.`\r\n      });\r\n      \r\n      // Mostrar alerta de erro\r\n      alert.error(`Erro na gerao do ${previewFormat.toUpperCase()}: ${error?.message || 'Falha desconhecida'}`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 7000\r\n      });\r\n    } finally {\r\n      // Voltar para o primeiro card aps a captura\r\n      setTimeout(() => {\r\n        if (isInitialized) {\r\n          goToCard(0);\r\n        }\r\n      }, 500);\r\n      \r\n      setIsGeneratingPreview(false);\r\n    }\r\n  };\r\n\r\n  // Mtodo para limpar o cache quando o componente  montado\r\n  useEffect(() => {\r\n    // Limpar o cache quando mudam as propriedades que afetam o contedo\r\n    downloadPreview.clearCache();\r\n  }, [cards, bodyText, templateName]);\r\n\r\n  // Mtodo simplificado para capturar uma imagem esttica\r\n  const handleSimpleDownload = async () => {\r\n    setIsGeneratingPreview(true);\r\n    setDownloadStatus({ status: 'capturing', message: 'Capturando pr-visualizao...' });\r\n    \r\n    try {\r\n      const blob = await downloadPreview.generateStaticImage(previewContainerRef.current, templateName);\r\n      \r\n      const fileName = `${templateName || 'carrossel'}_preview.png`;\r\n      await downloadPreview.downloadFile(blob, fileName);\r\n      \r\n      setDownloadStatus({ status: 'success', message: 'Download concludo!' });\r\n      \r\n      // Mostrar alerta de sucesso\r\n      alert.success(\"Imagem esttica gerada com sucesso!\", {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 3000\r\n      });\r\n      \r\n      // Reset status after a delay\r\n      setTimeout(() => {\r\n        setDownloadStatus({ status: 'idle', message: '' });\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error('Erro ao capturar pr-visualizao:', error);\r\n      setDownloadStatus({\r\n        status: 'error',\r\n        message: 'Falha ao capturar pr-visualizao. Tente novamente.'\r\n      });\r\n      \r\n      // Mostrar alerta de erro\r\n      alert.error(`Erro ao gerar imagem: ${error.message || 'Falha desconhecida'}`, {\r\n        position: 'top-center',\r\n        autoCloseTime: 5000\r\n      });\r\n    } finally {\r\n      setIsGeneratingPreview(false);\r\n    }\r\n  };\r\n\r\n  // Se o componente est montado pela primeira vez, asseguramos que est no primeiro card\r\n  // Usamos um useEffect para evitar atualizao durante a renderizao\r\n  useEffect(() => {\r\n    if (isInitialized) {\r\n      // Pequeno atraso para garantir que o componente est totalmente montado\r\n      setTimeout(() => {\r\n        goToCard(0);\r\n      }, 300);\r\n    }\r\n  }, [isInitialized]);\r\n\r\n  return (\r\n    <div className={styles.previewSection}>\r\n      <div className={styles.sectionHeader}>\r\n        <h3>Visualizao Final</h3>\r\n        <p>\r\n          Este  o carrossel que seus clientes vero no WhatsApp. Deslize para ver todos os cartes.\r\n        </p>\r\n      </div>\r\n\r\n      <div className={styles.previewContainer} ref={previewContainerRef}>\r\n        {/* Usando o componente conectado ao controlador */}\r\n        <ControlledCarouselPreview\r\n          cards={cards}\r\n          bodyText={bodyText}\r\n        />\r\n      </div>\r\n\r\n      <div className={styles.templateInfo}>\r\n        <div className={styles.infoItem}>\r\n          <span className={styles.infoLabel}>Nome do Template:</span>\r\n          <span className={styles.infoValue}>{templateName}</span>\r\n        </div>\r\n        <div className={styles.infoItem}>\r\n          <span className={styles.infoLabel}>Cartes:</span>\r\n          <span className={styles.infoValue}>{cards.length}</span>\r\n        </div>\r\n\r\n        <PreRenderStatus \r\n          downloadPreview={downloadPreview} \r\n          preRenderStarted={preRenderStarted} \r\n        />\r\n\r\n        <DownloadOptions\r\n          previewFormat={previewFormat}\r\n          setPreviewFormat={setPreviewFormat}\r\n          captureSequence={captureSequence}\r\n          handleSimpleDownload={handleSimpleDownload}\r\n          isGeneratingPreview={isGeneratingPreview}\r\n          downloadStatus={downloadStatus}\r\n          areDownloadButtonsDisabled={areDownloadButtonsDisabled}\r\n          interactionDisabled={interactionDisabled}\r\n          alert={alert} // Passar o sistema de alertas\r\n        />\r\n      </div>\r\n\r\n    </div>\r\n  );\r\n};\r\n/**\r\n * StepThree - Visualizao final, exportao JSON e envio do template\r\n * @param {Object} props - Props do componente\r\n * @returns {JSX.Element} Componente StepThree\r\n */\r\nconst StepThree = ({\r\n  // Existing props\r\n  finalJson,\r\n  copyToClipboard,\r\n  resetForm,\r\n  error,\r\n  success,\r\n  cards,\r\n  bodyText,\r\n  setStep,\r\n  templateName,\r\n\r\n  // Send-related props\r\n  sendTemplate,\r\n  loading\r\n}) => {\r\n  // Inicializar sistema de alertas\r\n  const alert = useAlert();\r\n  \r\n  // State\r\n  const [activeView, setActiveView] = useState('send');\r\n  const [justCopied, setJustCopied] = useState({\r\n    createTemplate: false,\r\n    sendTemplate: false,\r\n    builderTemplate: false\r\n  });\r\n\r\n  // Send-related state\r\n  const [sendSuccess, setSendSuccess] = useState(false);\r\n  const [phoneNumber, setPhoneNumber] = useState('');\r\n\r\n  // Preview-related state\r\n  const [isGeneratingPreview, setIsGeneratingPreview] = useState(false);\r\n  const [previewFormat, setPreviewFormat] = useState('mp4');\r\n  const [downloadStatus, setDownloadStatus] = useState({ status: 'idle', message: '' });\r\n\r\n  // Mostrar alertas para erros e sucessos recebidos como propriedades\r\n  useEffect(() => {\r\n    if (error) {\r\n      alert.error(error, { \r\n        position: 'top-center',\r\n        autoCloseTime: 7000 \r\n      });\r\n    }\r\n    \r\n    if (success) {\r\n      alert.success(success, { \r\n        position: 'top-right' \r\n      });\r\n    }\r\n  }, [error, success, alert]);\r\n\r\n  // Inicializar downloadPreview\r\n  useEffect(() => {\r\n    const initializeDownloadService = async () => {\r\n      try {\r\n        console.log('Tentando inicializar servio de download...');\r\n        // Pr-carregar FFmpeg em segundo plano sem bloquear a UI\r\n        downloadPreview.preloadFFmpeg();\r\n      } catch (error) {\r\n        console.warn('Falha ao pr-carregar recursos:', error);\r\n        \r\n        // Mensagem mais amigvel\r\n        setDownloadStatus({\r\n          status: 'error',\r\n          message: 'No foi possvel carregar a ferramenta de gerao de vdeo. Voc ainda pode baixar uma imagem esttica.'\r\n        });\r\n        \r\n        // Mostrar alerta de erro\r\n        alert.warning('No foi possvel carregar as ferramentas de vdeo. A opo de imagem esttica ainda est disponvel.', {\r\n          position: 'top-center',\r\n          autoCloseTime: 7000\r\n        });\r\n      }\r\n    };\r\n\r\n    initializeDownloadService();\r\n  }, [alert]);\r\n\r\n  // Formatar telefone para exibio\r\n  const formatPhoneDisplay = (phone) => {\r\n    if (!phone) return '';\r\n    const cleaned = phone.replace(/\\D/g, '');\r\n    if (cleaned.length < 7) return phone;\r\n\r\n    // Tenta formatar com cdigo do pas, rea e nmero\r\n    try {\r\n      const countryCode = cleaned.substring(0, 2);\r\n      const areaCode = cleaned.substring(2, 4);\r\n      const firstPart = cleaned.substring(4, 9);\r\n      const secondPart = cleaned.substring(9);\r\n\r\n      return `+${countryCode} (${areaCode}) ${firstPart}-${secondPart}`;\r\n    } catch (error) {\r\n      // Em caso de erro, retorna o nmero limpo\r\n      return cleaned;\r\n    }\r\n  };\r\n\r\n  // Handle copy with visual feedback e mostrar alerta\r\n  const handleCopy = (jsonType) => {\r\n    copyToClipboard(jsonType);\r\n    setJustCopied({\r\n      ...justCopied,\r\n      [jsonType]: true\r\n    });\r\n\r\n    // Mostrar alerta de sucesso ao copiar\r\n    alert.info(`JSON do tipo \"${jsonType}\" copiado para a rea de transferncia`, {\r\n      position: 'bottom-right',\r\n      autoCloseTime: 2000\r\n    });\r\n\r\n    setTimeout(() => {\r\n      setJustCopied({\r\n        ...justCopied,\r\n        [jsonType]: false\r\n      });\r\n    }, 2000);\r\n  };\r\n\r\n  // Handle download JSON e mostrar alerta\r\n  const handleDownload = (jsonType) => {\r\n    // Verifica se h um JSON vlido para download\r\n    if (!finalJson || !finalJson[jsonType]) {\r\n      alert.error(`Tipo de JSON \"${jsonType}\" no disponvel para download`, {\r\n        position: 'top-center'\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Cria um blob com o contedo JSON formatado\r\n      const jsonContent = JSON.stringify(finalJson[jsonType], null, 2);\r\n      const blob = new Blob([jsonContent], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n\r\n      // Cria um elemento de link e ativa o download\r\n      const link = document.createElement('a');\r\n      link.href = url;\r\n      link.download = `${templateName || 'template'}_${jsonType}.json`;\r\n      document.body.appendChild(link);\r\n      link.click();\r\n\r\n      // Limpeza\r\n      setTimeout(() => {\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(url);\r\n      }, 100);\r\n      \r\n      // Mostrar alerta de sucesso\r\n      alert.success(`JSON \"${jsonType}\" baixado com sucesso`, {\r\n        position: 'bottom-right',\r\n        autoCloseTime: 3000\r\n      });\r\n    } catch (error) {\r\n      console.error('Erro ao fazer download do JSON:', error);\r\n      alert.error(`Falha ao baixar o JSON. ${error.message || 'Tente novamente.'}`, {\r\n        position: 'top-center'\r\n      });\r\n    }\r\n  };\r\n  \r\n  // Enviar o template para o nmero de telefone\r\n  const handleSendTemplate = async () => {\r\n    if (!phoneNumber) {\r\n      alert.warning(\" necessrio fornecer um nmero de telefone vlido\", {\r\n        position: 'top-center'\r\n      });\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      // Tenta enviar o template\r\n      await sendTemplate(phoneNumber);\r\n      setSendSuccess(true);\r\n      \r\n      // No  necessrio mostrar outro alerta aqui, pois j est sendo mostrado no sendTemplate do useWhatsAppTemplate\r\n    } catch (error) {\r\n      console.error('Erro ao enviar template:', error);\r\n      // O alerta de erro j est sendo mostrado no sendTemplate\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={steps.container}>\r\n      {/* Introduction section */}\r\n      <div className={steps.introStepWrapper}>\r\n        <h2 className={steps.stepTitle}>Template Concludo</h2>\r\n        <p className={steps.stepDescription}>\r\n          Seu template foi criado com sucesso! Veja abaixo a prvia de como ficar para seus clientes,\r\n          faa download para compartilhar com sua equipe ou envie para um nmero de teste.\r\n        </p>\r\n      </div>\r\n\r\n      {/* View tabs */}\r\n      <div className={styles.viewTabs}>\r\n        <Button\r\n          className={`${styles.viewTab} ${activeView === 'send' ? styles.activeTab : ''}`}\r\n          onClick={() => setActiveView('send')}\r\n          variant=\"text\"\r\n          color={activeView === 'send' ? 'primary' : 'content'}\r\n          iconLeft={<FiSend className={styles.tabIcon} />}\r\n        >\r\n          Visualizao e Envio\r\n        </Button>\r\n        <Button\r\n          className={`${styles.viewTab} ${activeView === 'code' ? styles.activeTab : ''}`}\r\n          onClick={() => setActiveView('code')}\r\n          variant=\"text\"\r\n          color={activeView === 'code' ? 'primary' : 'content'}\r\n          iconLeft={<FiCode className={styles.tabIcon} />}\r\n        >\r\n          Cdigo JSON\r\n        </Button>\r\n      </div>\r\n\r\n      {/* Content based on active tab */}\r\n      <div className={styles.viewContent}>\r\n        {/* Send Template Tab com Visualizao Integrada */}\r\n        {activeView === 'send' && (\r\n          <div className={styles.sendView}>\r\n            <div className={styles.contentWrapper}>\r\n              {/* Envolver o contedo de visualizao no provider */}\r\n              <CarouselControlProvider>\r\n                <PreviewContent\r\n                  cards={cards}\r\n                  bodyText={bodyText}\r\n                  templateName={templateName}\r\n                  finalJson={finalJson}\r\n                  copyToClipboard={copyToClipboard}\r\n                  justCopied={justCopied}\r\n                  handleCopy={handleCopy}\r\n                  handleDownload={handleDownload}\r\n                  downloadStatus={downloadStatus}\r\n                  setDownloadStatus={setDownloadStatus}\r\n                  isGeneratingPreview={isGeneratingPreview}\r\n                  setIsGeneratingPreview={setIsGeneratingPreview}\r\n                  previewFormat={previewFormat}\r\n                  setPreviewFormat={setPreviewFormat}\r\n                  alert={alert} // Passar o sistema de alertas\r\n                />\r\n              </CarouselControlProvider>\r\n\r\n              {/* Coluna de Envio */}\r\n              <div className={styles.sendSection}>\r\n                {!sendSuccess ? (\r\n                  <>\r\n                    <div className={styles.sectionHeader}>\r\n                      <h3>Testar Template</h3>\r\n                      <p>\r\n                        Envie seu template para um nmero WhatsApp para confirmar como ele ser exibido para seus clientes\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className={styles.formGroup}>\r\n                        <Input\r\n                          label=\"Nmero do WhatsApp\"\r\n                          variant=\"phoneNumber\"\r\n                          className={styles.phoneInput}\r\n                          value={phoneNumber || ''}\r\n                          onChange={(e) => {\r\n                            // Extrai apenas os dgitos do valor inserido\r\n                            const digitsOnly = e.target.value.replace(/\\D/g, '');\r\n                            setPhoneNumber(digitsOnly);\r\n                          }}\r\n                          placeholder=\"5521999999999\"\r\n                          />\r\n                    </div>\r\n\r\n                    <div className={styles.sendButtonContainer}>\r\n                      <Button\r\n                        variant=\"solid\"\r\n                        color=\"primary\"\r\n                        onClick={handleSendTemplate}\r\n                        disabled={!phoneNumber || loading}\r\n                        loading={loading}\r\n                        iconLeft={<FiSend />}\r\n                        fullWidth\r\n                      >\r\n                        Enviar Template\r\n                      </Button>\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <div className={styles.successContainer}>\r\n                    <div className={styles.successIcon}>\r\n                      <FiCheckCircle size={40} />\r\n                    </div>\r\n\r\n                    <h3 className={styles.successTitle}>Template Enviado!</h3>\r\n\r\n                    <p className={styles.successMessage}>\r\n                      Template enviado com sucesso para:\r\n                    </p>\r\n\r\n                    <div className={styles.phoneDisplay}>\r\n                      {formatPhoneDisplay(phoneNumber)}\r\n                    </div>\r\n\r\n                    <p className={styles.successNote}>\r\n                      Verifique o recebimento no dispositivo. Se no receber em alguns instantes,\r\n                      confirme se o nmero est correto e se o contato j enviou mensagem para sua\r\n                      conta WhatsApp Business.\r\n                    </p>\r\n\r\n                    <Button\r\n                      variant=\"outline\"\r\n                      color=\"primary\"\r\n                      onClick={() => {\r\n                        setSendSuccess(false);\r\n                        setPhoneNumber('');\r\n                      }}\r\n                      iconLeft={<FiRefreshCw />}\r\n                    >\r\n                      Enviar para outro nmero\r\n                    </Button>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        {/* Code View Tab - Existing functionality */}\r\n        {activeView === 'code' && (\r\n          <div className={styles.codeView}>\r\n            <div className={styles.codeSection}>\r\n              <div className={styles.codeSectionHeader}>\r\n                <h3 className={styles.codeSectionTitle}>JSON para Envio do Template</h3>\r\n                <p className={styles.codeSectionDescription}>\r\n                  Use este JSON para enviar seu template atravs da API do WhatsApp.\r\n                </p>\r\n              </div>\r\n              <div className={styles.jsonViewerWrapper}>\r\n                <JsonViewer\r\n                  json={finalJson.sendTemplate}\r\n                  fileName={`${templateName || 'template'}_sendTemplate.json`}\r\n                  onCopy={() => handleCopy('sendTemplate')}\r\n                  onDownload={() => handleDownload('sendTemplate')}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div className={styles.codeSection}>\r\n              <div className={styles.codeSectionHeader}>\r\n                <h3 className={styles.codeSectionTitle}>JSON para Criao do Template</h3>\r\n                <p className={styles.codeSectionDescription}>\r\n                  Use este JSON para registrar seu template no WhatsApp.\r\n                </p>\r\n              </div>\r\n              <div className={styles.jsonViewerWrapper}>\r\n                <JsonViewer\r\n                  json={finalJson.createTemplate}\r\n                  fileName={`${templateName || 'template'}_createTemplate.json`}\r\n                  onCopy={() => handleCopy('createTemplate')}\r\n                  onDownload={() => handleDownload('createTemplate')}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Novo formato para Builder Blip */}\r\n            <div className={styles.codeSection}>\r\n              <div className={styles.codeSectionHeader}>\r\n                <h3 className={styles.codeSectionTitle}>JSON para Contedo Dinmico (Builder Blip)</h3>\r\n                <p className={styles.codeSectionDescription}>\r\n                  Use este JSON para integrar seu template na plataforma Blip.\r\n                </p>\r\n              </div>\r\n              <div className={styles.jsonViewerWrapper}>\r\n                <JsonViewer\r\n                  json={finalJson.builderTemplate}\r\n                  fileName={`${templateName || 'template'}_builderTemplate.json`}\r\n                  onCopy={() => handleCopy('builderTemplate')}\r\n                  onDownload={() => handleDownload('builderTemplate')}\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Action buttons */}\r\n      <div className={steps.actionSection}>\r\n        <Button\r\n          variant='outline'\r\n          onClick={() => setStep(2)}\r\n          iconLeft={<FiChevronLeft />}\r\n          size='large'\r\n        >\r\n          Voltar para Edio\r\n        </Button>\r\n\r\n\r\n        <Button\r\n          onClick={() => {\r\n            resetForm();\r\n            alert.info(\"Iniciando um novo template. Dados anteriores foram limpos.\", {\r\n              position: 'top-right',\r\n              autoCloseTime: 3000\r\n            });\r\n          }}\r\n          size='large'\r\n        >\r\n          Criar Novo Template\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StepThree;","// extracted by mini-css-extract-plugin\nexport default {\"progressContainer\":\"ProgressHeader_progressContainer__ttKQ2\",\"progressBar\":\"ProgressHeader_progressBar__zRjVX\",\"progressFill\":\"ProgressHeader_progressFill__G+uwy\",\"stepsContainer\":\"ProgressHeader_stepsContainer__UGL0x\",\"step\":\"ProgressHeader_step__AJ81A\",\"stepNumber\":\"ProgressHeader_stepNumber__QPdF8\",\"stepContent\":\"ProgressHeader_stepContent__f4mPA\",\"stepName\":\"ProgressHeader_stepName__d3b7e\",\"stepIcon\":\"ProgressHeader_stepIcon__jtsO-\",\"stepDescription\":\"ProgressHeader_stepDescription__R5Aph\",\"active\":\"ProgressHeader_active__YWM21\",\"completed\":\"ProgressHeader_completed__gwxY7\",\"checkIcon\":\"ProgressHeader_checkIcon__mR30D\",\"checkmark\":\"ProgressHeader_checkmark__S-XrY\",\"next\":\"ProgressHeader_next__1Lo8B\",\"upcoming\":\"ProgressHeader_upcoming__BFgJh\"};","// components/common/ProgressHeader.js\r\nimport React from 'react';\r\nimport { FiUpload, FiEdit3, FiCheckCircle, FiSend } from 'react-icons/fi';\r\nimport styles from './ProgressHeader.module.css';\r\n\r\n/**\r\n * Enhanced ProgressHeader component showing the workflow steps\r\n * \r\n * @param {Object} props Component properties\r\n * @param {number} props.step Current active step\r\n * @param {Function} props.setStep Function to change the current step\r\n * @param {Function} props.isStepValid Function to check if a step is valid\r\n * @returns {JSX.Element} ProgressHeader component\r\n */\r\nconst ProgressHeader = ({ step, setStep, isStepValid }) => {\r\n  // Step configuration data\r\n  const steps = [\r\n    {\r\n      id: 1,\r\n      name: 'Enviar Arquivos',\r\n      icon: <FiUpload />,\r\n      description: 'Faa o upload dos arquivos e configure a mdia do carto.'\r\n    },\r\n    {\r\n      id: 2,\r\n      name: 'Personalizar Template',\r\n      icon: <FiEdit3 />,\r\n      description: 'Configure o texto e os botes do modelo e envie para aprovao.'\r\n    },\r\n    {\r\n      id: 3,\r\n      name: 'Teste o Template',\r\n      icon: <FiCheckCircle />,\r\n      description: 'Colete os cdigos JSON e envie o carrossel para seu Whatsapp.'\r\n    }\r\n  ];\r\n\r\n  // Handle navigation to a step\r\n  const handleStepClick = (stepNumber) => {\r\n    // Allow navigation only to completed steps or next available step\r\n    if (stepNumber < step || (stepNumber === step + 1 && isStepValid(step))) {\r\n      setStep(stepNumber);\r\n    }\r\n  };\r\n\r\n  // Get step status (whether it's completed, active, or upcoming)\r\n  const getStepStatus = (stepNumber) => {\r\n    if (stepNumber < step) return 'completed';\r\n    if (stepNumber === step) return 'active';\r\n    if (stepNumber === step + 1 && isStepValid(step)) return 'next';\r\n    return 'upcoming';\r\n  };\r\n\r\n  return (\r\n    <div className={styles.progressContainer}>\r\n      <div className={styles.progressBar}>\r\n        <div \r\n          className={styles.progressFill} \r\n          style={{ width: `${((step - 1) / (steps.length - 1)) * 100}%` }}\r\n        ></div>\r\n      </div>\r\n      \r\n      <div className={styles.stepsContainer}>\r\n        {steps.map((s) => {\r\n          const status = getStepStatus(s.id);\r\n          return (\r\n            <div \r\n              key={s.id} \r\n              className={`${styles.step} ${styles[status]}`}\r\n              onClick={() => handleStepClick(s.id)}\r\n            >\r\n              <div className={styles.stepNumber}>\r\n                {status === 'completed' ? (\r\n                  <FiCheckCircle className={styles.checkIcon} />\r\n                ) : (\r\n                  <span>{s.id}</span>\r\n                )}\r\n              </div>\r\n              <div className={styles.stepContent}>\r\n                <div className={styles.stepName}>\r\n                  {s.icon && <span className={styles.stepIcon}>{s.icon}</span>}\r\n                  {s.name}\r\n                </div>\r\n                <div className={styles.stepDescription}>{s.description}</div>\r\n              </div>\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressHeader;","// extracted by mini-css-extract-plugin\nexport default {\"overlay\":\"IntroductionGuide_overlay__Dj5ld\",\"fadeIn\":\"IntroductionGuide_fadeIn__KkLBS\",\"guideContainer\":\"IntroductionGuide_guideContainer__cmmIH\",\"slideUp\":\"IntroductionGuide_slideUp__ur9eA\",\"closeButton\":\"IntroductionGuide_closeButton__G-2Td\",\"guideContent\":\"IntroductionGuide_guideContent__t+lhd\",\"iconContainer\":\"IntroductionGuide_iconContainer__mi-am\",\"guideTitle\":\"IntroductionGuide_guideTitle__wvUgA\",\"guideText\":\"IntroductionGuide_guideText__UIC5r\",\"progressIndicator\":\"IntroductionGuide_progressIndicator__7kD+n\",\"progressDot\":\"IntroductionGuide_progressDot__k9TEh\",\"activeDot\":\"IntroductionGuide_activeDot__HnxeS\",\"guideActions\":\"IntroductionGuide_guideActions__xQsvx\",\"actionButton\":\"IntroductionGuide_actionButton__FQC1j\",\"backButton\":\"IntroductionGuide_backButton__+7HX2 IntroductionGuide_actionButton__FQC1j\",\"nextButton\":\"IntroductionGuide_nextButton__impKU IntroductionGuide_actionButton__FQC1j\"};","// components/common/IntroductionGuide.js\r\nimport React, { useState } from 'react';\r\nimport { \r\n  FiInfo, \r\n  FiArrowRight, \r\n  FiUpload, \r\n  FiEdit3, \r\n  FiCheckCircle, \r\n  FiTarget, \r\n  FiX, \r\n  FiChevronLeft, \r\n  FiChevronRight \r\n} from 'react-icons/fi';\r\nimport styles from './IntroductionGuide.module.css';\r\n\r\n/**\r\n * Introduction guide component shown to first-time users\r\n * Provides a step-by-step walkthrough of the application\r\n * \r\n * @param {Object} props Component properties\r\n * @param {Function} props.onClose Function called when guide is closed\r\n * @returns {JSX.Element} IntroductionGuide component\r\n */\r\nconst IntroductionGuide = ({ onClose }) => {\r\n  // Current step in the guide\r\n  const [currentStep, setCurrentStep] = useState(0);\r\n  \r\n  // Guide steps data\r\n  const steps = [\r\n    {\r\n      \"title\": \"Bem-vindo ao Criador de Carrossis do WhatsApp\",\r\n      \"icon\": <FiInfo size={28} />,\r\n      \"content\": \"Crie carrossis interativos para o WhatsApp de forma simples e rpida. Este guia passo a passo ajudar voc a comear.\"\r\n    },\r\n    {\r\n      \"title\": \"1. Adicione seus arquivos\",\r\n      \"icon\": <FiUpload size={28} />,\r\n      \"content\": <>Envie imagens ou vdeos para cada card do seu carrossel. Voc pode adicionar at <strong>10 cards</strong>, cada um com mdia e botes interativos.</>\r\n    },\r\n    {\r\n      \"title\": \"2. Personalize seu carrossel\",\r\n      \"icon\": <FiEdit3 size={28} />,\r\n      \"content\": <>Adicione textos e botes interativos a cada card. Inclua at <strong>2 botes por card</strong>, com aes como links ou respostas rpidas.</>\r\n    },\r\n    {\r\n      \"title\": \"3. Teste e finalize\",\r\n      \"icon\": <FiCheckCircle size={28} />,\r\n      \"content\": <><strong>Seu carrossel est pronto!</strong> Visualize a prvia, obtenha o cdigo JSON ou envie para testes.</>\r\n    },\r\n    {\r\n      \"title\": \"Por que criei isso?\",\r\n      \"icon\": <FiTarget size={28} />,\r\n      \"content\": <>Como a <strong>Meta</strong> e a <strong>Blip</strong> ainda no liberaram uma interface de criao de carrossis, tudo tinha que ser feito atravs de APIs, o que era muito trabalhoso.</>\r\n    }\r\n  ];\r\n  \r\n  // Move to next step\r\n  const nextStep = () => {\r\n    if (currentStep < steps.length - 1) {\r\n      setCurrentStep(currentStep + 1);\r\n    } else {\r\n      onClose();\r\n    }\r\n  };\r\n  \r\n  // Move to previous step\r\n  const prevStep = () => {\r\n    if (currentStep > 0) {\r\n      setCurrentStep(currentStep - 1);\r\n    }\r\n  };\r\n  \r\n  // Get current step data\r\n  const currentStepData = steps[currentStep];\r\n  \r\n  return (\r\n    <div className={styles.overlay}>\r\n      <div className={styles.guideContainer}>\r\n        <button className={styles.closeButton} onClick={onClose} aria-label=\"Close guide\">\r\n          <FiX size={24} />\r\n        </button>\r\n        \r\n        <div className={styles.guideContent}>\r\n          <div className={styles.iconContainer}>\r\n            {currentStepData.icon}\r\n          </div>\r\n          \r\n          <h2 className={styles.guideTitle}>{currentStepData.title}</h2>\r\n          \r\n          <p className={styles.guideText}>{currentStepData.content}</p>\r\n          \r\n          <div className={styles.progressIndicator}>\r\n            {steps.map((_, index) => (\r\n              <div \r\n                key={index} \r\n                className={`${styles.progressDot} ${index === currentStep ? styles.activeDot : ''}`}\r\n                onClick={() => setCurrentStep(index)}\r\n              />\r\n            ))}\r\n          </div>\r\n        </div>\r\n        \r\n        <div className={styles.guideActions}>\r\n          {currentStep > 0 && (\r\n            <button className={styles.backButton} onClick={prevStep}>\r\n              <FiChevronLeft size={18} />\r\n              Voltar\r\n            </button>\r\n          )}\r\n          \r\n          <button className={styles.nextButton} onClick={nextStep}>\r\n            {currentStep < steps.length - 1 ? (\r\n              <>\r\n                Seguir\r\n                <FiChevronRight size={18} />\r\n              </>\r\n            ) : (\r\n              <>\r\n                Vamos l!\r\n                <FiArrowRight size={18} />\r\n              </>\r\n            )}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IntroductionGuide;","// extracted by mini-css-extract-plugin\nexport default {\"container\":\"WhatsAppCarouselCreator_container__c4oR4\",\"header\":\"WhatsAppCarouselCreator_header__Mfl+p\",\"title\":\"WhatsAppCarouselCreator_title__Mpikx\",\"fadeInDown\":\"WhatsAppCarouselCreator_fadeInDown__hSVfL\",\"subtitle\":\"WhatsAppCarouselCreator_subtitle__mtihy\",\"fadeInUp\":\"WhatsAppCarouselCreator_fadeInUp__Qjgx2\",\"content\":\"WhatsAppCarouselCreator_content__n7chO\",\"fadeIn\":\"WhatsAppCarouselCreator_fadeIn__7iZSl\",\"actions\":\"WhatsAppCarouselCreator_actions__Hr18X\",\"scrollTopButton\":\"WhatsAppCarouselCreator_scrollTopButton__AlGIF\",\"showScrollTop\":\"WhatsAppCarouselCreator_showScrollTop__pGcxn\",\"backButton\":\"WhatsAppCarouselCreator_backButton__O4js1\",\"resetButton\":\"WhatsAppCarouselCreator_resetButton__DygbA\"};","// extracted by mini-css-extract-plugin\nexport default {\"footer\":\"Footer_footer__IEqDI\",\"footerContent\":\"Footer_footerContent__pc9if\",\"footerInfo\":\"Footer_footerInfo__KsPw+\",\"footerActions\":\"Footer_footerActions__zAtJy\",\"footerLink\":\"Footer_footerLink__BaoY9\",\"footerButton\":\"Footer_footerButton__v8n7d\"};","// components/ui/Footer/Footer.jsx\r\nimport React from 'react';\r\nimport { FiInfo, FiMessageSquare, FiFileText } from 'react-icons/fi';\r\nimport { BiBug } from 'react-icons/bi';\r\nimport { FaLinkedin } from 'react-icons/fa';\r\nimport styles from './Footer.module.css';\r\n\r\nconst Footer = () => {\r\n  const handleReportError = () => {\r\n    // Implementar lgica para reportar erro\r\n    window.open('URL_PARA_REPORTAR_ERRO', '_blank');\r\n  };\r\n\r\n  const handleOpenDocs = () => {\r\n    window.open('URL_DA_DOCUMENTACAO', '_blank');\r\n  };\r\n\r\n  const handleOpenSupport = () => {\r\n    window.open('URL_DO_SUPORTE', '_blank');\r\n  };\r\n\r\n  const handleOpenSuggestions = () => {\r\n    window.open('URL_PARA_SUGESTOES', '_blank');\r\n  };\r\n\r\n  return (\r\n    <footer className={styles.footer}>\r\n      <div className={styles.footerContent}>\r\n        <div className={styles.footerInfo}>\r\n          <p>WhatsApp Carousel Creator  {new Date().getFullYear()}</p>\r\n          <p href=\"https://www.linkedin.com/in/luigiferronatto/\">Developed By: Luigi Ferronatto</p>\r\n          <p>CDA | Solution's Advocate at <span>Blip</span></p>\r\n        </div>\r\n\r\n        <div className={styles.footerActions}>\r\n          <a \r\n            href=\"https://www.linkedin.com/in/luigiferronatto/\"\r\n            target=\"_blank\"\r\n            rel=\"noopener noreferrer\"\r\n            className={styles.footerLink}\r\n            title=\"LinkedIn\"\r\n          >\r\n            <FaLinkedin />\r\n          </a>\r\n\r\n          <button \r\n            onClick={handleReportError}\r\n            className={styles.footerButton}\r\n            title=\"Report Bug\"\r\n          >\r\n            <BiBug />\r\n          </button>\r\n\r\n          <button \r\n            onClick={handleOpenDocs}\r\n            className={styles.footerButton}\r\n            title=\"Documentation\"\r\n          >\r\n            <FiFileText />\r\n          </button>\r\n\r\n          <button \r\n            onClick={handleOpenSupport}\r\n            className={styles.footerButton}\r\n            title=\"Support\"\r\n          >\r\n            <FiInfo />\r\n          </button>\r\n\r\n          <button \r\n            onClick={handleOpenSuggestions}\r\n            className={styles.footerButton}\r\n            title=\"Suggestions\"\r\n          >\r\n            <FiMessageSquare />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;","// components/WhatsAppCarouselCreator.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useWhatsAppTemplateContext } from '../contexts/WhatsAppTemplateContext';\r\nimport StepOne from './steps/StepOne';\r\nimport StepTwo from './steps/StepTwo';\r\nimport StepThree from './steps/StepThree';\r\nimport ProgressHeader from './ui/ProgressHeader/ProgressHeader';\r\nimport IntroductionGuide from './ui/IntroductionGuide/IntroductionGuide';\r\nimport { FiArrowUp } from 'react-icons/fi';\r\nimport styles from './WhatsAppCarouselCreator.module.css';\r\nimport Footer from './ui/Footer/Footer';\r\n\r\n/**\r\n * Componente principal para o aplicativo Criador de Carrossel do WhatsApp\r\n * Melhorado com UI/UX aprimorada com base no sistema de design\r\n * \r\n * @returns {JSX.Element} Componente WhatsAppCarouselCreator\r\n */\r\nconst WhatsAppCarouselCreator = () => {\r\n  // Obter contexto do template\r\n  const templateContext = useWhatsAppTemplateContext();\r\n  const { step, setStep, isStepValid, resetForm } = templateContext;\r\n  \r\n  // Estado local\r\n  const [showGuide, setShowGuide] = useState(false);\r\n  const [showScrollTop, setShowScrollTop] = useState(false);\r\n  const [showTips, setShowTips] = useState(true);\r\n\r\n  // Verificar se o guia de introduo foi mostrado antes\r\n  useEffect(() => {\r\n    const hasSeenGuide = localStorage.getItem('introductionGuideShown');\r\n    if (!hasSeenGuide) {\r\n      setShowGuide(true);\r\n    }\r\n  }, []);\r\n\r\n  // Monitorar posio de rolagem para mostrar/ocultar boto de rolar para o topo\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      setShowScrollTop(window.scrollY > 300);\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  // Funo para rolar para o topo\r\n  const scrollToTop = () => {\r\n    window.scrollTo({\r\n      top: 0,\r\n      behavior: 'smooth'\r\n    });\r\n  };\r\n\r\n  // Alternar visibilidade das dicas\r\n  const toggleTips = () => {\r\n    setShowTips(!showTips);\r\n    localStorage.setItem('showTips', String(!showTips));\r\n  };\r\n\r\n  // Marcar guia como mostrado\r\n  const handleGuideClose = () => {\r\n    setShowGuide(false);\r\n    localStorage.setItem('introductionGuideShown', 'true');\r\n  };\r\n\r\n  // Renderizar etapa atual com base no estado\r\n  const renderCurrentStep = () => {\r\n    switch(step) {\r\n      case 1:\r\n        return <StepOne {...templateContext} />;\r\n      case 2:\r\n        return <StepTwo {...templateContext} showHints={showTips} />;\r\n      case 3:\r\n        return <StepThree {...templateContext} />;\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.container}>\r\n      <div className={styles.header}>\r\n        <h1 className={styles.title}>Criador de Carrossel do WhatsApp</h1>\r\n        <p className={styles.subtitle}>\r\n          Crie templates interativos de carrossel para seu Router no Blip atravs de mensagens da API do WhatsApp Business\r\n        </p>\r\n\r\n        <ProgressHeader \r\n          step={step} \r\n          setStep={setStep} \r\n          isStepValid={isStepValid}\r\n        />\r\n      </div>\r\n      \r\n      <div className={styles.content}>\r\n        {renderCurrentStep()}\r\n      </div>\r\n      \r\n      <button \r\n        className={`${styles.scrollTopButton} ${showScrollTop ? styles.showScrollTop : ''}`}\r\n        onClick={scrollToTop}\r\n        aria-label=\"Voltar ao topo\"\r\n      >\r\n        <FiArrowUp size={20} />\r\n      </button>\r\n\r\n      {showGuide && (\r\n        <IntroductionGuide onClose={handleGuideClose} />\r\n      )}\r\n\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default WhatsAppCarouselCreator;\r\n"],"names":["_ref","current","max","threshold","dangerThreshold","className","variant","showFormatting","percentage","Math","min","isWarning","isDanger","wrapperClasses","styles","wrapper","warning","danger","filter","Boolean","join","progressClasses","progress","warningProgress","dangerProgress","countClasses","count","warningCount","dangerCount","_jsx","children","_jsxs","progressWrapper","style","width","onChange","value","inputRef","compact","darkMode","showHint","showHintContent","setShowHintContent","useState","activeFormat","setActiveFormat","isMobile","setIsMobile","showMoreOptions","setShowMoreOptions","useEffect","checkIfMobile","window","innerWidth","addEventListener","removeEventListener","renderFormatButton","format","icon","label","isActive","type","onClick","input","start","selectionStart","end","selectionEnd","selectedText","substring","newText","newPosition","setTimeout","bulletText","split","map","line","length","numberedText","i","quoteText","target","preventDefault","stopPropagation","focus","setSelectionRange","applyFormatting","title","primaryButtons","_Fragment","FiBold","size","FiItalic","secondaryButtons","FiCode","RiListOrdered","FiList","RiQuoteText","FiAlignLeft","onMouseEnter","onMouseLeave","FiHelpCircle","role","message","list","isAnimated","isDismissable","isCheckable","isImportant","isCompact","progressValue","socialCount","actionText","actionCallback","onDismiss","iconOverride","isVisible","setIsVisible","checkedItems","setCheckedItems","Array","fill","timeout","element","document","getElementById","hintId","classList","remove","animated","clearTimeout","random","toString","substr","id","hintContainer","dismissable","important","hintIconWrapper","getIcon","FiInfo","FiAlertCircle","FiCheckCircle","FiMessageCircle","hintContent","hintTitle","hintMessage","checkList","hintList","item","index","checkItem","checkbox","newCheckedItems","toggleCheckItem","tabIndex","FiCheckSquare","FiSquare","textDecoration","opacity","progressBar","socialProofInfo","hintAction","FiChevronRight","dismissButton","handleDismiss","FiX","Input","forwardRef","ref","name","placeholder","onBlur","error","hintVariant","hintIsDismissable","hintIsAnimated","hintIsImportant","hintIsCompact","hintSocialCount","hintActionText","hintActionCallback","hintOnDismiss","hintClassName","isDropdown","options","optionLabelKey","optionValueKey","multiple","searchable","creatable","noOptionsMessage","onOptionCreate","customOptionComponent","dropdownWidth","dropdownMaxHeight","closeOnSelect","showOptionalBadge","optionalText","optionalBadgeClassName","required","disabled","readOnly","iconPosition","maxLength","minLength","regexPattern","regexErrorMessage","mask","showCharCounter","showCounterFormatting","allowFormatting","inputClassName","clearable","fullWidth","formatOnBlur","validateOnChange","validateOnBlur","toolbar","rightElement","leftElement","characterCounterVariant","textFormatting","textFormattingCompact","textFormattingDarkMode","textFormattingShowHint","restProps","useRef","dropdownRef","combinedRef","localValue","setLocalValue","localError","setLocalError","isFocused","setIsFocused","isTouched","setIsTouched","showPassword","setShowPassword","changedFields","setChangedFields","isDropdownOpen","setIsDropdownOpen","searchValue","setSearchValue","selectedOptions","setSelectedOptions","filteredOptions","setFilteredOptions","initialSelected","isArray","option","includes","displayText","opt","selectedOption","find","displayValue","newFilteredOptions","optionLabel","String","toLowerCase","JSON","stringify","handleClickOutside","event","contains","timer","patterns","phoneNumber","cpf","cnpj","cep","rg","email","url","creditCard","number","onlyLetters","alphanumeric","templateName","applyMask","maskType","digits","replace","_","p1","p2","p3","result","trim","country","state","verificationDigit","p4","p5","formatValue","char","toUpperCase","charAt","slice","validateValue","valueToValidate","test","patternToUse","handleDropdownToggle","handleOptionSelect","newSelectedOptions","some","selected","values","optionValue","prev","handleSearchChange","e","handleCreateOption","newOption","togglePasswordVisibility","handleClear","handleChange","newValue","digitsOnly","preventInvalidInput","syntheticEvent","validationError","handleFocus","onFocus","handleBlur","finalValue","containerClasses","container","hasError","hasIcon","hasLeftElement","hasRightElement","iconLeft","iconRight","focused","inline","dropdownOpen","changed","inputClasses","inputError","dropdownInput","renderHintOrError","Hints","htmlFor","requiredMark","optionalBadge","TextFormatter","inputWrapper","dropdownContainer","open","renderDropdownOptions","dropdownStyles","maxHeight","dropdownOptions","searchContainer","searchInput","autoFocus","optionsList","isOptionSelected","checked","optionCheckbox","noOptions","createOption","dropdownToggle","FiChevronUp","FiChevronDown","textarea","rows","visibilityToggle","FiEyeOff","FiEye","clearButton","bottomWrapper","bottomContent","hintWrapper","counterWrapper","CharacterCounter","charCounter","displayName","CardUploadInput","card","updateCard","totalCards","alert","useAlert","uploadMethod","setUploadMethod","fileUrl","isDragging","setIsDragging","previewUrl","setPreviewUrl","urlValidationError","setUrlValidationError","loadingPreview","setLoadingPreview","previewError","setPreviewError","uploadProgress","setUploadProgress","forceRender","setForceRender","fileInputRef","dropAreaRef","previewImgRef","urlInputRef","uploadToAzure","isUploading","uploadError","uploadedFile","resetUpload","useFileUpload","setIsUploading","setUploadError","setUploadedFile","useCallback","async","file","updateProgress","arguments","undefined","blobService","createAzureBlobService","Error","onProgress","info","position","autoCloseTime","uploadFile","success","azureError","console","warn","simulatedResult","Promise","resolve","reader","FileReader","onloadend","readAsDataURL","startsWith","cancelUpload","fileType","preloadImg","Image","onload","onerror","src","handleGlobalDragEnter","dataTransfer","types","handleDragEnter","add","activeDrop","handleDragLeave","handleDragOver","handleDrop","files","handleFileUpload","validateFileType","acceptedImageTypes","isImage","maxSize","sizeInMB","toFixed","limit","_dropAreaRef$current","_dropAreaRef$current2","tempUrl","URL","createObjectURL","uploading","progressToastId","Date","now","uploadResult","log","toISOString","uploadSuccess","_dropAreaRef$current3","saveCurrentDraft","_dropAreaRef$current4","_dropAreaRef$current5","_dropAreaRef$current6","handleFileInputClick","_fileInputRef$current","click","validateUrl","fileExtension","pop","videoExtensions","isVideo","handleUrlChange","urlParts","fileName","handleUrlKeyDown","key","handleTestUrlClick","loadingToastId","testUrls","newUrl","handleClearFile","confirm","previewSection","querySelector","clearingAnimation","handleFileTypeChange","newType","extension","imageExtensions","videoRef","checkingToastId","img","video","createElement","onloadeddata","getFileTypeIcon","videoElement","loadSuccess","FiImage","typeIcon","FiVideo","handlePreviewLoad","handlePreviewError","cardClass","cardContainer","evenCard","oddCard","hasContent","fileSize","progressIndicator","active","cardHeader","cardNumberWrapper","cardNumber","fileTypeSelect","select","fileTypeIconWrapper","cardBody","uploadMethods","methodButton","activeMethod","FiLink","FiUploadCloud","formGroup","uploadHeader","dropArea","previewContent","loading","previewLoader","spinner","previewErrorMessage","Button","color","imgEl","FiRefreshCw","removeMediaButton","alt","previewImage","hidden","onLoad","onError","transition","videoWrapper","previewVideo","controls","playsInline","preload","onLoadedData","poster","videoOverlay","videoFormatInfo","onKeyDown","onClear","urlHelpActions","urlHint","FiTrendingUp","dragging","onDragEnter","onDragLeave","onDragOver","onDrop","uploadingSpinner","dropText","dropHint","round","uploadIcon","dropHintEnhanced","formatBadges","formatBadge","sizeLimit","accept","display","errorMessageContainer","errorMessage","previewActions","previewActionGroup","as","href","rel","FiExternalLink","FiTrash2","uploadDate","mediaDetailsFooter","uploadDetails","uploadTimestamp","React","authKey","setAuthKey","numCards","cards","handleAddCard","handleRemoveCard","handleUploadFiles","uploadResults","isStepValid","saveCurrentState","unsavedChanges","lastSavedTime","savedBeforeUpload","setSavedBeforeUpload","rememberKey","setRememberKey","localStorage","getItem","showTips","setShowTips","isKeyVisible","setIsKeyVisible","uploadSectionRef","setItem","removeItem","savedKey","scrollToUploadSection","_uploadSectionRef$cur","scrollIntoView","behavior","handleSaveBeforeUpload","allCardsHaveUrls","every","_card$fileUrl","simulateUploadProgress","interval","setInterval","clearInterval","wrappedHandleUploadFiles","stopProgress","err","fileHandle","checkStepValidity","progressPercentage","calculateProgress","points","floor","steps","FiKey","authInputWrapper","authOptions","rememberKeyLabel","rememberKeyCheckbox","securityNote","FiShield","cardsControlSection","cardCounter","cardCountLabel","buttonGroup","controlButton","FiMinus","cardCount","FiPlus","cardControlOptions","cardControlHelp","cardTipsContainer","tipsToggle","cardTips","FiArrowDown","jumpToCardsButton","cardsGrid","actionSection","FiSave","FiUpload","uploadProgressContainer","uploadProgressBar","uploadProgressFill","uploadProgressText","toLocaleString","uploadSummary","summaryTitle","summaryList","idx","summaryItem","cardIndex","status","successStatus","cachedStatus","simulatedStatus","_buttonTypes$find","buttonIndex","button","updateButtonField","removeButton","totalButtons","showHints","validationMessage","syncButtonTypes","setFocusedInput","urlTested","setUrlTested","phoneTested","setPhoneTested","isTypeLocked","setIsTypeLocked","showSyncWarning","setShowSyncWarning","isValidUrl","buttonTypes","description","FiMessageSquare","FiPhone","handleButtonTypeChange","FiLock","t","text","testUrl","payload","testPhoneNumber","location","handleRemoveButton","focusedInput","isExpanded","setIsExpanded","showImagePreview","setShowImagePreview","copySuccess","setCopySuccess","activeSection","setActiveSection","textareaRef","isTextValid","bodyText","handleBodyTextChange","updateButtons","newButtons","otherCard","buttons","cardButtons","existingButton","addButton","_card$buttons$","buttonType","push","field","getCardColor","colors","copyFileHandle","navigator","clipboard","writeText","then","catch","borderLeftColor","backgroundColor","FiCheck","FiMinimize2","FiMaximize2","ButtonEditor","b","CONFIG","ButtonIcon","QUICK_REPLY","viewBox","xmlns","d","PHONE_NUMBER","stroke","strokeLinecap","strokeLinejoin","formatWhatsAppText","formattedText","variable","NavButton","_ref2","direction","navButton","disabledButton","height","strokeWidth","CarouselPreview","_ref3","contactName","disableInteraction","currentCardIndex","setCurrentCardIndex","cardsWrapperRef","startPosition","setStartPosition","currentTranslate","setCurrentTranslate","prevTranslate","setPrevTranslate","dragOffset","setDragOffset","isTransitioning","setIsTransitioning","transitionTimeoutRef","dragStartTimeRef","lastTouchEnd","mediaLoadedRef","updateTranslatePosition","useImperativeHandle","goToNextCard","goToPrevCard","goToCard","getCards","getCurrentIndex","getTotalCards","newTranslate","newIndex","preloadMedia","onloadedmetadata","nextIndex","prevIndex","dragStart","pageX","touches","clientX","dragMove","currentPosition","wrapperWidth","offsetWidth","movePercent","clampedMovePercent","dragEnd","timeElapsed","abs","handleTouchStart","handleTouchMove","handleTouchEnd","passive","navigationDots","useMemo","dots","dot","activeDot","cursor","hasValidCards","phoneMockup","phoneHeader","phoneStatusBar","phoneIcons","whatsappHeader","backButton","FiChevronLeft","contactInfo","contactAvatar","moreButton","chatWindow","messageBodyText","dangerouslySetInnerHTML","__html","carouselContainer","cardsContainer","disableOverlay","cardsWrapper","grabbing","grab","transform","pointerEvents","cardHighlighted","activeCard","inactiveCard","cardImage","parentNode","placeholderImage","innerHTML","appendChild","x","y","rx","cx","cy","r","videoContainer","currentTarget","play","cardVideo","autoPlay","muted","loop","onLoadedMetadata","playButton","onPlay","nextSibling","onPause","FiPlay","placeholderText","separator","btnIndex","cardButton","buttonIcon","truncateText","setTemplateName","language","setLanguage","setBodyText","handleCreateTemplate","setStep","checkButtonConsistency","applyButtonStandardization","setShowHints","showPreview","setShowPreview","validationMessages","setValidationMessages","setActiveCard","buttonConsistencyStatus","setButtonConsistencyStatus","isConsistent","previewExpanded","setPreviewExpanded","templateNameSuggestions","setTemplateNameSuggestions","showNameSuggestions","setShowNameSuggestions","previewRef","formContainerRef","consistency","newMessages","isTemplateNameValid","isBodyTextValid","words","word","suggestions","validateCards","messages","allValid","validationErrors","forEach","handleContinue","completionPercentage","suggestion","_formContainerRef$cur","block","viewControls","viewToggle","hintsToggle","contentWrapper","formContainer","withPreview","FiEdit","formFields","templateNameWrapper","code","bodyTextContainer","buttonInconsistencyWarning","FiAlertTriangle","cardTabs","cardTab","activeCardTab","incompleteIndicator","activeCardEditor","CardTemplateEditor","nextButton","previewContainer","expanded","previewWrapper","previewHeader","previewTitle","previewSubtitle","json","onCopy","onDownload","collapsible","initiallyExpanded","minHeight","copied","setCopied","setExpanded","formattedJson","setFormattedJson","syntaxHighlighted","setSyntaxHighlighted","fullscreen","setFullscreen","setError","containerRef","jsonDataRef","formatJsonSyntax","jsonString","match","cls","string","boolean","null","formatted","jsonContainer","titleBar","titleIcon","toolBar","toolButton","collapsed","toggleExpanded","toggleFullscreen","FiMinimize","FiMaximize","handleCopy","jsonToCopy","successIcon","FiCopy","handleDownload","jsonToDownload","blob","Blob","link","download","body","removeChild","revokeObjectURL","FiDownload","errorContainer","errorIcon","codeContainer","overflowY","jsonContent","emptyContainer","emptyIcon","STORAGE_KEYS","downloadPreview","constructor","this","ffmpeg","FFmpeg","isLoaded","cachedFiles","mp4","gif","capturedFramesCache","isPreRendering","loadFromLocalStorage","generateTemplateHash","templateData","cardsLength","bodyTextLength","hash","charCodeAt","isCompatibleTemplate","currentHash","timestamp","parseInt","clearLocalStorageCache","framesJSON","frameData","parse","images","dataUrl","canvas","ctx","getContext","drawImage","saveToLocalStorage","frames","templateHash","maxFramesToStore","step","selectedFrames","frameDataUrls","toDataURL","selectedCount","hasLocalStorageCache","initialize","retryCount","loadPromise","load","timeoutPromise","reject","race","backoffTime","pow","preloadFFmpeg","cleanupFileSystem","readDir","readError","deleteFile","deleteFileError","deleteDir","deleteDirError","mp4Error","gifError","paletteError","captureFrames","containerElement","navigationControls","onStatusUpdate","waitForMediaLoad","querySelectorAll","videos","all","complete","readyState","oncanplaythrough","captureTransition","fromCardIndex","toCardIndex","transitionSteps","startFrame","html2canvas","scale","useCORS","allowTaint","logging","firstTransitionFrame","intervals","delay","transitionFrame","endFrame","firstFrame","generateVideo","createDir","selectedIndices","totalFrames","maxVideoFrames","estimatedCardsCount","ceil","transitionLength","transitions","transitionCenter","lastEnd","staticInterval","staticFramesToTake","staticStep","frameIndex","remainingInterval","remainingFramesToTake","remainingStep","sort","a","indices","finalStep","padStart","writeFile","fetchFile","frameError","exec","data","readFile","buffer","generateGif","dirError","transitionPoints","cardsCount","transitionIndex","maxGifFrames","transitionFrames","Set","point","transitionFramesCount","remainingFrames","staticFramesNeeded","staticFrameIndices","has","allMethodsError","cleanError","preRenderAnimations","preRenderFormats","isPreRenderingActive","clearCache","downloadFile","generateStaticImage","toBlob","CarouselControlContext","createContext","useCarouselControl","context","useContext","CarouselControlProvider","pendingCardIndex","setPendingCardIndex","carouselRef","isInitialized","setIsInitialized","interactionDisabled","setInteractionDisabled","checkPreRendering","preRenderingActive","intervalId","timeoutId","Provider","registerCarousel","_downloadPreview$cach5","_downloadPreview$cach6","preRenderStarted","setStatus","_downloadPreview$cach","_downloadPreview$cach2","_downloadPreview$cach3","_downloadPreview$cach4","formatStatus","setFormatStatus","checkStatus","_downloadPreview$cach7","_downloadPreview$cach8","_downloadPreview$cach9","_downloadPreview$cach10","_downloadPreview$cach11","_downloadPreview$cach12","mp4Status","gifStatus","FiLoader","FiClock","getCompletedCount","ControlledCarouselPreview","WrappedComponent","WithCarouselControl","props","innerRef","withCarouselControl","DownloadOptions","previewFormat","setPreviewFormat","captureSequence","handleSimpleDownload","isGeneratingPreview","downloadStatus","areDownloadButtonsDisabled","downloadOptions","downloadTitle","downloadIcon","ffmpegError","formatSelector","formatOptions","formatOption","FiFilm","checkMark","downloadActionArea","downloadButton","statusIndicator","progressBarContainer","progressFill","downloadError","downloadSuccess","PreviewContent","finalJson","copyToClipboard","justCopied","setDownloadStatus","setIsGeneratingPreview","previewContainerRef","setPreRenderStarted","setAreDownloadButtonsDisabled","updateStatusWithProgress","sectionHeader","templateInfo","infoItem","infoLabel","infoValue","PreRenderStatus","attempt","resetForm","sendTemplate","activeView","setActiveView","setJustCopied","createTemplate","builderTemplate","sendSuccess","setSendSuccess","setPhoneNumber","initializeDownloadService","jsonType","viewTabs","viewTab","activeTab","FiSend","tabIcon","viewContent","sendView","sendSection","successContainer","successTitle","successMessage","phoneDisplay","phone","cleaned","countryCode","areaCode","firstPart","formatPhoneDisplay","successNote","phoneInput","sendButtonContainer","codeView","codeSection","codeSectionHeader","codeSectionTitle","codeSectionDescription","jsonViewerWrapper","JsonViewer","FiEdit3","progressContainer","stepsContainer","s","stepNumber","handleStepClick","checkIcon","stepContent","stepName","stepIcon","stepDescription","onClose","currentStep","setCurrentStep","FiTarget","currentStepData","content","prevStep","nextStep","FiArrowRight","Footer","getFullYear","FaLinkedin","handleReportError","BiBug","handleOpenDocs","FiFileText","handleOpenSupport","handleOpenSuggestions","WhatsAppCarouselCreator","templateContext","useWhatsAppTemplateContext","showGuide","setShowGuide","showScrollTop","setShowScrollTop","handleScroll","scrollY","ProgressHeader","renderCurrentStep","StepOne","StepTwo","StepThree","scrollToTop","scrollTo","top","FiArrowUp","IntroductionGuide","handleGuideClose"],"sourceRoot":""}