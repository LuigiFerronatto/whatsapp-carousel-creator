"use strict";(self.webpackChunkwhatsapp_carousel_creator=self.webpackChunkwhatsapp_carousel_creator||[]).push([[422],{422:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Bt});var s=t(43),r=t(19),o=t(376),n=t(866);var i=t(169);const l={container:"Input_container__id-8D",sizeSmall:"Input_sizeSmall__nXEZ+",inputWrapper:"Input_inputWrapper__x4IWK",sizeMedium:"Input_sizeMedium__ZoMPb",sizeLarge:"Input_sizeLarge__jFz8+",input:"Input_input__2YT+q",textarea:"Input_textarea__XLnW6",inline:"Input_inline__ryJ4z",label:"Input_label__tjboa",requiredMark:"Input_requiredMark__mxYa0",focused:"Input_focused__ZEm8c",hasError:"Input_hasError__ISZ6x",inputError:"Input_inputError__wxorL",disabled:"Input_disabled__M3FmD",readOnly:"Input_readOnly__dEUV-",icon:"Input_icon__dX8O1",iconLeft:"Input_iconLeft__itEuW",iconRight:"Input_iconRight__9wSDW",passwordToggle:"Input_passwordToggle__PNp5z",clearButton:"Input_clearButton__2fOad",bottomContent:"Input_bottomContent__KTADF",counterWrapper:"Input_counterWrapper__kgfLh",visibilityToggle:"Input_visibilityToggle__TjEGf",optionalBadge:"Input_optionalBadge__4XNpX",optionalBadgeSubtle:"Input_optionalBadgeSubtle__NUpmO",optionalBadgeOutlined:"Input_optionalBadgeOutlined__yf5xz",isDropdown:"Input_isDropdown__v-OrW",dropdownContainer:"Input_dropdownContainer__3CAKD",dropdownInput:"Input_dropdownInput__+aUeL",dropdownToggle:"Input_dropdownToggle__jLPWV",dropdownOptions:"Input_dropdownOptions__-TDUp",searchContainer:"Input_searchContainer__LKTYu",searchInput:"Input_searchInput__mBw9t",optionsList:"Input_optionsList__7DrWn",option:"Input_option__5Iisj",selectedOption:"Input_selectedOption__Zc7Yj",optionCheckbox:"Input_optionCheckbox__piDk4",optionLabel:"Input_optionLabel__kydi6",noOptions:"Input_noOptions__FIkS3",createOption:"Input_createOption__uo5dK",dropdownOpen:"Input_dropdownOpen__dC+AQ"},c={wrapper:"CharacterCounter_wrapper__EJLlC",progressWrapper:"CharacterCounter_progressWrapper__4npeD",progress:"CharacterCounter_progress__UXh2V",count:"CharacterCounter_count__5Iddo",warning:"CharacterCounter_warning__XP2qo",warningProgress:"CharacterCounter_warningProgress__wtdZj",warningCount:"CharacterCounter_warningCount__i3USf",danger:"CharacterCounter_danger__iLNeC",dangerProgress:"CharacterCounter_dangerProgress__3Caof",dangerCount:"CharacterCounter_dangerCount__49afj",compact:"CharacterCounter_compact__8m3MD",minimal:"CharacterCounter_minimal__ltg2L"};var d=t(579);const p=e=>{let{current:a,max:t,threshold:s=75,dangerThreshold:r=90,className:o="",variant:n="default",showFormatting:i=!0}=e;const l=Math.min(a/t*100,100),p=i&&l>=s&&l<r,u=i&&l>=r,m=[c.wrapper,p?c.warning:"",u?c.danger:"",c[n],o].filter(Boolean).join(" "),h=[c.progress,p?c.warningProgress:"",u?c.dangerProgress:""].filter(Boolean).join(" "),_=[c.count,p?c.warningCount:"",u?c.dangerCount:""].filter(Boolean).join(" ");return"minimal"===n?(0,d.jsx)("div",{className:m,children:(0,d.jsxs)("span",{className:_,children:[a,"/",t]})}):(0,d.jsxs)("div",{className:m,children:[(0,d.jsx)("div",{className:c.progressWrapper,children:(0,d.jsx)("div",{className:h,style:{width:`${l}%`}})}),(0,d.jsxs)("span",{className:_,children:[a,"/",t]})]})};var u=t(200),m=t(196);const h="TextFormatter_formattingToolbar__azvE2",_="TextFormatter_compact__rS2Cf",g="TextFormatter_toolbarGroup__SdJl2",v="TextFormatter_formatButton__VD5Ix",x="TextFormatter_active__0GD4P",f="TextFormatter_buttonLabel__4dlS9",C="TextFormatter_divider__bHliT",j="TextFormatter_dark__IbSuk",w="TextFormatter_formatHint__D19Uz",b="TextFormatter_helpButton__1w8pE",N="TextFormatter_formatHintContent__MN7JC",T="TextFormatter_hintGrid__RRh6N",S="TextFormatter_hintItem__ywSQA",y="TextFormatter_strikethrough__xuhph",I="TextFormatter_moreOptionsWrapper__2F9ol",E="TextFormatter_moreButton__G-KGO",k="TextFormatter_moreOptionsMenu__T6Y03",F=e=>{let{onChange:a,value:t="",inputRef:r,compact:o=!1,darkMode:n=!1,showHint:i=!0}=e;const[l,c]=(0,s.useState)(!1),[p,F]=(0,s.useState)(null),[P,L]=(0,s.useState)(!1),[$,B]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=()=>{L(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const z=(e,s,n)=>{const i=p===e;return(0,d.jsxs)("button",{type:"button",className:`${v} ${i?x:""}`,onClick:()=>(e=>{if(!r||!r.current)return;const s=r.current,o=s.selectionStart,n=s.selectionEnd,i=t.substring(o,n);let l=t,c=n;switch(F(e),setTimeout((()=>F(null)),300),e){case"bold":l=l.substring(0,o)+"*"+i+"*"+l.substring(n),c=n+4;break;case"italic":l=l.substring(0,o)+"_"+i+"_"+l.substring(n),c=n+2;break;case"strikethrough":l=l.substring(0,o)+"~"+i+"~"+l.substring(n),c=n+4;break;case"code":l=l.substring(0,o)+"`"+i+"`"+l.substring(n),c=n+7;break;case"bullet":const e=i?i.split("\n").map((e=>`* ${e}`)).join("\n"):"* ";l=l.substring(0,o)+e+l.substring(n),c=o+e.length;break;case"numbered":const a=i?i.split("\n").map(((e,a)=>`${a+1}. ${e}`)).join("\n"):"1. ";l=l.substring(0,o)+a+l.substring(n),c=o+a.length;break;case"quote":const t=i?i.split("\n").map((e=>`> ${e}`)).join("\n"):"> ";l=l.substring(0,o)+t+l.substring(n),c=o+t.length;break;case"newline":l=l.substring(0,o)+"\n"+l.substring(n),c=o+1}a&&a({target:{value:l},preventDefault:()=>{},stopPropagation:()=>{}});setTimeout((()=>{r.current&&(r.current.focus(),r.current.setSelectionRange(c,c))}),0)})(e),"aria-label":n,title:n,children:[s,!o&&!P&&(0,d.jsx)("span",{className:f,children:n})]})},U=(0,d.jsxs)(d.Fragment,{children:[z("bold",(0,d.jsx)(u.hJt,{size:o?14:16}),"Negrito"),z("italic",(0,d.jsx)(u.Gql,{size:o?14:16}),"It\xe1lico"),z("strikethrough",(0,d.jsx)("span",{className:y,children:"S"}),"Tachado")]}),A=(0,d.jsxs)(d.Fragment,{children:[z("code",(0,d.jsx)(u.PjK,{size:o?14:16}),"Bloco de c\xf3digo"),z("numbered",(0,d.jsx)(m.jPQ,{size:o?14:16}),"Lista numerada"),z("bullet",(0,d.jsx)(u.Wm,{size:o?14:16}),"Lista"),z("quote",(0,d.jsx)(m.h1p,{size:o?14:16}),"Cita\xe7\xe3o")]});return(0,d.jsxs)("div",{className:`${h} ${o?_:""} ${n?j:""}`,children:[(0,d.jsxs)("div",{className:g,children:[U,P?(0,d.jsxs)("div",{className:I,children:[(0,d.jsxs)("button",{type:"button",className:`${v} ${E}`,onClick:()=>B(!$),"aria-expanded":$,"aria-label":"Mais op\xe7\xf5es",children:[(0,d.jsx)(u.qm6,{size:o?14:16}),(0,d.jsx)("span",{className:f,children:"Mais"})]}),$&&(0,d.jsx)("div",{className:k,children:A})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:C}),A]})]}),i&&(0,d.jsxs)("div",{className:w,children:[(0,d.jsx)("button",{className:b,"aria-label":"Ajuda de formata\xe7\xe3o",onClick:()=>c(!l),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),children:(0,d.jsx)(u.lrG,{size:16})}),l&&(0,d.jsxs)("div",{className:N,role:"tooltip",children:[(0,d.jsx)("h4",{children:"Formata\xe7\xe3o de Texto"}),(0,d.jsxs)("div",{className:T,children:[(0,d.jsxs)("div",{className:S,children:[(0,d.jsx)("strong",{children:"Negrito"}),(0,d.jsx)("code",{children:"**texto**"})]}),(0,d.jsxs)("div",{className:S,children:[(0,d.jsx)("strong",{children:"It\xe1lico"}),(0,d.jsx)("code",{children:"_texto_"})]}),(0,d.jsxs)("div",{className:S,children:[(0,d.jsx)("strong",{children:"Tachado"}),(0,d.jsx)("code",{children:"~~texto~~"})]}),(0,d.jsxs)("div",{className:S,children:[(0,d.jsx)("strong",{children:"Lista"}),(0,d.jsx)("code",{children:"* item"})]}),(0,d.jsxs)("div",{className:S,children:[(0,d.jsx)("strong",{children:"Lista numerada"}),(0,d.jsx)("code",{children:"1. item"})]}),(0,d.jsxs)("div",{className:S,children:[(0,d.jsx)("strong",{children:"Cita\xe7\xe3o"}),(0,d.jsx)("code",{children:"> texto"})]}),(0,d.jsxs)("div",{className:S,children:[(0,d.jsx)("strong",{children:"C\xf3digo inline"}),(0,d.jsx)("code",{children:"`c\xf3digo`"})]}),(0,d.jsxs)("div",{className:S,children:[(0,d.jsx)("strong",{children:"Bloco de c\xf3digo"}),(0,d.jsx)("code",{children:"`c\xf3digo`"})]})]})]})]})]})},P={hintContainer:"Hints_hintContainer__AtW-O",hintIconWrapper:"Hints_hintIconWrapper__Z9jaV",hintContent:"Hints_hintContent__F46AO",hintTitle:"Hints_hintTitle__8Av5T",hintMessage:"Hints_hintMessage__w-YTs",hintList:"Hints_hintList__kbKwG",hintAction:"Hints_hintAction__dkXyv",info:"Hints_info__CkTCb",warning:"Hints_warning__n1TiJ",success:"Hints_success__hsb-L",error:"Hints_error__BNG73",whatsapp:"Hints_whatsapp__UW4ci",buttonHint:"Hints_buttonHint__QqSiZ",textHint:"Hints_textHint__x8fQZ",simple:"Hints_simple__7OGWi",detailed:"Hints_detailed__Ziv7L",animated:"Hints_animated__CEYFh",subtlePulse:"Hints_subtlePulse__7asS+",dismissable:"Hints_dismissable__lUeNQ",dismissButton:"Hints_dismissButton__c58XB",checkList:"Hints_checkList__YNrNX",checkItem:"Hints_checkItem__1rzpx",checkbox:"Hints_checkbox__GfpDg",hintsGroup:"Hints_hintsGroup__Tmkgj",progress:"Hints_progress__Bt+a+",progressBar:"Hints_progressBar__jOTyU",socialProof:"Hints_socialProof__l+qDI",socialCount:"Hints_socialCount__KMnIi",important:"Hints_important__NgSXk",compact:"Hints_compact__55R3t",whatsappRequirement:"Hints_whatsappRequirement__rBUxv",infoIcon:"Hints_infoIcon__IiuF7"},L=e=>{let{variant:a="info",message:t,title:r,list:o,className:n,isAnimated:i=!1,isDismissable:l=!1,isCheckable:c=!1,isImportant:p=!1,isCompact:m=!1,progressValue:h=null,socialCount:_=null,actionText:g=null,actionCallback:v=null,onDismiss:x=null,iconOverride:f=null}=e;const[C,j]=(0,s.useState)(!0),[w,b]=(0,s.useState)(o?Array(o.length).fill(!1):[]);(0,s.useEffect)((()=>{if(i){const e=setTimeout((()=>{const e=document.getElementById(`hint-${N}`);e&&e.classList.remove(P.animated)}),2e3);return()=>clearTimeout(e)}}),[i]);const N=Math.random().toString(36).substr(2,9);return C?(0,d.jsxs)("div",{id:`hint-${N}`,className:`\n        ${P.hintContainer} \n        ${P[a]} \n        ${i?P.animated:""}\n        ${l?P.dismissable:""}\n        ${p?P.important:""}\n        ${m?P.compact:""}\n        ${n||""}\n      `,role:"alert","aria-live":p?"assertive":"polite",children:[(0,d.jsx)("div",{className:P.hintIconWrapper,children:(()=>{if(f)return f;switch(a){case"info":default:return(0,d.jsx)(u.S8s,{size:m?14:18});case"warning":return(0,d.jsx)(u.y3G,{size:m?14:18});case"success":return(0,d.jsx)(u.A3x,{size:m?14:18});case"whatsapp":return(0,d.jsx)(u.X6_,{size:m?14:18});case"simple":return(0,d.jsx)(u.S8s,{size:m?12:16})}})()}),(0,d.jsxs)("div",{className:P.hintContent,children:[r&&(0,d.jsx)("div",{className:P.hintTitle,children:r}),"string"===typeof t?(0,d.jsx)("p",{className:P.hintMessage,children:t}):t,o&&o.length>0&&(0,d.jsx)("ul",{className:c?P.checkList:P.hintList,children:o.map(((e,a)=>c?(0,d.jsxs)("li",{className:P.checkItem,children:[(0,d.jsx)("div",{className:P.checkbox,onClick:()=>(e=>{const a=[...w];a[e]=!a[e],b(a)})(a),role:"checkbox","aria-checked":w[a],tabIndex:0,children:w[a]?(0,d.jsx)(u.NLe,{size:16}):(0,d.jsx)(u.TG1,{size:16})}),(0,d.jsx)("span",{style:w[a]?{textDecoration:"line-through",opacity:.7}:{},children:e})]},a):(0,d.jsx)("li",{children:e},a)))}),null!==h&&(0,d.jsx)("div",{className:P.progressBar,style:{width:`${h}%`}}),null!==_&&(0,d.jsxs)("div",{className:P.socialProofInfo,children:[(0,d.jsx)("span",{className:P.socialCount,children:_})," users found this helpful"]}),g&&v&&(0,d.jsxs)("div",{className:P.hintAction,onClick:v,role:"button",tabIndex:0,children:[g,(0,d.jsx)(u.fOo,{size:14})]})]}),l&&(0,d.jsx)("button",{className:P.dismissButton,onClick:()=>{j(!1),x&&x()},"aria-label":"Dismiss",children:(0,d.jsx)(u.yGN,{size:16})})]}):null},$=(0,s.forwardRef)(((e,a)=>{let{id:t,name:r,type:o="text",label:n,placeholder:i,value:c,onChange:m,onBlur:h,error:_,hintMessage:g,hintVariant:v="simple",hintTitle:x,hintList:f,hintIsDismissable:C=!1,hintIsAnimated:j=!1,hintIsImportant:w=!1,hintIsCompact:b=!1,hintSocialCount:N=null,hintActionText:T=null,hintActionCallback:S=null,hintOnDismiss:y=null,hintClassName:I="",isDropdown:E=!1,options:k=[],optionLabelKey:P="label",optionValueKey:$="value",multiple:B=!1,searchable:z=!1,creatable:U=!1,noOptionsMessage:A="No options available",onOptionCreate:O,customOptionComponent:M,dropdownWidth:R,dropdownMaxHeight:D="250px",closeOnSelect:H=!0,showOptionalBadge:G=!1,optionalText:W="Optional",optionalBadgeClassName:V="",required:q=!1,disabled:J=!1,readOnly:K=!1,icon:Z,iconPosition:X="right",maxLength:Q,minLength:Y,regexPattern:ee,regexErrorMessage:ae,variant:te="default",mask:se,showCharCounter:re=!1,showCounterFormatting:oe=!0,allowFormatting:ne=!1,className:ie="",inputClassName:le="",clearable:ce=!1,size:de="medium",fullWidth:pe=!0,formatOnBlur:ue=!1,validateOnChange:me=!1,validateOnBlur:he=!0,toolbar:_e,rightElement:ge,leftElement:ve,characterCounterVariant:xe="default",textFormatting:fe=!1,textFormattingCompact:Ce=!1,textFormattingDarkMode:je=!1,textFormattingShowHint:we=!0,...be}=e;const Ne=(0,s.useRef)(null),Te=(0,s.useRef)(null),Se=a||Ne,[ye,Ie]=(0,s.useState)(c||""),[Ee,ke]=(0,s.useState)(_||""),[Fe,Pe]=(0,s.useState)(!1),[Le,$e]=(0,s.useState)(!1),[Be,ze]=(0,s.useState)(!1),[Ue,Ae]=(0,s.useState)([]),[Oe,Me]=(0,s.useState)(!1),[Re,De]=(0,s.useState)(""),[He,Ge]=(0,s.useState)([]),[We,Ve]=(0,s.useState)(k);(0,s.useEffect)((()=>{E||c===ye||Ie(c||"")}),[c,E]),(0,s.useEffect)((()=>{if(E&&k&&k.length>0)if(B){const e=Array.isArray(c)?k.filter((e=>c.includes(e[$]||e))):[];Ge(e);const a=e.length>0?e.map((e=>e[P]||e)).join(", "):"";a!==ye&&Ie(a)}else{const e=k.find((e=>(e[$]||e)===c));Ge(e?[e]:[]);const a=e?e[P]||e:"";a!==ye&&Ie(a)}}),[E,k,c,$,P,B]),(0,s.useEffect)((()=>{const e=E&&z?k.filter((e=>{const a=e[P]||e;return String(a).toLowerCase().includes(Re.toLowerCase())})):k;JSON.stringify(We)!==JSON.stringify(e)&&Ve(e)}),[E,k,Re,z,P]),(0,s.useEffect)((()=>{const e=e=>{Te.current&&!Te.current.contains(e.target)&&Me(!1)};return Oe&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[Oe]),(0,s.useEffect)((()=>{ke(_||"")}),[_]),(0,s.useEffect)((()=>{if(Ue.length>0){const e=setTimeout((()=>{Ae([])}),3e3);return()=>clearTimeout(e)}}),[Ue]);const qe={phoneNumber:/^\(\d{2}\) \d{5}-\d{4}$/,cpf:/^\d{3}\.\d{3}\.\d{3}-\d{2}$/,cnpj:/^\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}$/,cep:/^\d{5}-\d{3}$/,rg:/^(\d{1,2})\.(\d{3})\.(\d{3})-(\d{1}|X|x)$/,name:/^[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff\s'.-]+$/,email:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,url:/^(https?:\/\/)?(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_+.~#?&//=]*)$/,creditCard:/^(?:\d{4}[ -]?){3}\d{4}$/,number:/^[0-9]+$/,onlyLetters:/^[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff]+$/,alphanumeric:/^[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff0-9]+$/,templateName:/^[a-z0-9_]{3,}$/},Je=(e,a)=>{if(!e)return"";const t=e.replace(/\D/g,"");switch(a){case"phoneNumber":return t.length<=11?t.replace(/^(\d{2})(\d{0,5})(\d{0,4})/,((e,a,t,s)=>{let r="";return a&&(r+=`(${a}`),t&&(r+=`) ${t}`),s&&(r+=`-${s}`),r})).trim():e;case"internationalPhone":return t.replace(/^(\d{0,2})(\d{0,2})(\d{0,1})(\d{0,7})/,((e,a,t,s,r)=>{let o="";return a&&(o+=a),t&&(o+=t),s&&(o+=s),r&&(o+=r),o})).trim();case"cpf":return t.replace(/^(\d{0,3})(\d{0,3})(\d{0,3})(\d{0,2})/,((e,a,t,s,r)=>{let o="";return a&&(o+=a),t&&(o+=`.${t}`),s&&(o+=`.${s}`),r&&(o+=`-${r}`),o})).trim();case"cnpj":return t.replace(/^(\d{0,2})(\d{0,3})(\d{0,3})(\d{0,4})(\d{0,2})/,((e,a,t,s,r,o)=>{let n="";return a&&(n+=a),t&&(n+=`.${t}`),s&&(n+=`.${s}`),r&&(n+=`/${r}`),o&&(n+=`-${o}`),n})).trim();case"cep":return t.replace(/^(\d{0,5})(\d{0,3})/,((e,a,t)=>{let s="";return a&&(s+=a),t&&(s+=`-${t}`),s})).trim();default:return e}},Ke=(e,a)=>{if(!e||!ne)return e;switch(a){case"name":return e.replace(/\b\w/g,(e=>e.toUpperCase()));case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();case"capitalize":return e.charAt(0).toUpperCase()+e.slice(1);case"sentence":return e.replace(/(^\s*\w|[.!?]\s*\w)/g,(e=>e.toUpperCase()));default:return e}},Ze=e=>{if(J||K)return"";if(E&&q&&0===He.length)return"Este campo \xe9 obrigat\xf3rio";if(q&&(null===e||void 0===e||!e.trim())&&!E)return"Este campo \xe9 obrigat\xf3rio";if(!e&&!E)return"";if(!E){if(Y&&e.length<Y)return`O comprimento m\xednimo \xe9 de ${Y} caracteres`;if(Q&&e.length>Q)return`O comprimento m\xe1ximo \xe9 de ${Q} caracteres`;if("phoneNumber"===te)return/\d/.test(e)?"":"O n\xfamero de telefone deve conter pelo menos um d\xedgito";const a=ee||qe[te]||null;if(a&&e&&!a.test(e))return"templateName"===te?"Use um nome descritivo sem espa\xe7os, m\xednimo de 3 caracteres. Exemplo: 'promo_verao' ou 'lancamento_produto'":ae||`Formato inv\xe1lido para ${te||"campo"}`}return""},Xe=()=>{J||K||(Me(!Oe),!Oe&&Se.current&&Se.current.focus())},Qe=e=>{if(B){let a;a=He.some((a=>(a[$]||a)===(e[$]||e)))?He.filter((a=>(a[$]||a)!==(e[$]||e))):[...He,e],Ge(a);const t=a.length>0?a.map((e=>e[P]||e)).join(", "):"";if(Ie(t),m){const e=a.map((e=>e[$]||e));m({target:{name:r,value:e},preventDefault:()=>{},stopPropagation:()=>{}})}}else{Ge([e]);const a=e[P]||e;if(Ie(a),H&&Me(!1),m){const a=e[$]||e;m({target:{name:r,value:a},preventDefault:()=>{},stopPropagation:()=>{}})}}Ue.includes("value")||Ae((e=>[...e,"value"])),z&&De("")},Ye=e=>{De(e.target.value)},ea=()=>{if(U&&Re&&O){const e=O(Re);e&&(Qe(e),De(""))}},aa=()=>{ze(!Be)},ta=()=>{if(E){if(Ge([]),Ie(""),m){m({target:{name:r,value:B?[]:""},preventDefault:()=>{},stopPropagation:()=>{}})}}else if(Ie(""),m){m({target:{name:r,value:""},preventDefault:()=>{},stopPropagation:()=>{}})}Se.current&&Se.current.focus(),Ue.includes("value")||Ae((e=>[...e,"value"]))},sa=e=>{if(E)return;let a=e.target.value;const t="phoneNumber"===te?a.replace(/\D/g,""):null;if(a=na(a,te),te&&"default"!==te?a=Je(a,te):se&&(a=Je(a,"custom")),ne&&!ue&&(a=Ke(a,te)),Ie(a),m)if("phoneNumber"===te&&null!==t){const s={...e,target:{...e.target,value:t,displayValue:a}};m(s)}else{const t={...e,target:{...e.target,value:a}};m(t)}if(me&&Le){const e=Ze(a);ke(e)}Ue.includes("value")||Ae((e=>[...e,"value"]))},ra=e=>{Pe(!0),$e(!0),be.onFocus&&be.onFocus(e),E&&!Oe&&Me(!0)},oa=e=>{if(E)return;Pe(!1);let a=e.target.value;if(ne&&ue&&(a=Ke(a,te),Ie(a),m)){const t={...e,target:{...e.target,value:a}};m(t)}if(he){const e=Ze(a);ke(e)}if(h)if(ne&&ue){const t={...e,target:{...e.target,value:a}};h(t)}else h(e)},na=(e,a)=>{if(!a||"default"===a)return e;switch(a){case"phoneNumber":return e.replace(/[^\d() -]/g,"");case"number":case"onlyNumbers":return e.replace(/[^\d]/g,"");case"onlyLetters":return e.replace(/[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff ]/g,"");case"alphanumeric":return e.replace(/[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff0-9 ]/g,"");case"name":return e.replace(/[^A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff\s'.-]/g,"");case"email":return e.replace(/[^A-Za-z0-9@._+-]/g,"");case"url":return e.replace(/[^A-Za-z0-9:/.?&=_-]/g,"");case"cpf":return e.replace(/[^\d.-]/g,"");case"cnpj":return e.replace(/[^\d./-]/g,"");case"cep":return e.replace(/[^\d-]/g,"");case"rg":return e.replace(/[^\dXx.-]/g,"");case"creditCard":return e.replace(/[^\d -]/g,"");case"templateName":return e.replace(/[^a-z0-9_]/g,"");default:return e}},ia=[l.container,l[`size${de.charAt(0).toUpperCase()+de.slice(1)}`],Ee?l.hasError:"",J?l.disabled:"",K?l.readOnly:"",Z?l.hasIcon:"",ve?l.hasLeftElement:"",ge?l.hasRightElement:"",Z&&"left"===X?l.iconLeft:"",Z&&"right"===X?l.iconRight:"",Fe?l.focused:"",pe?"":l.inline,E?l.isDropdown:"",Oe?l.dropdownOpen:"",Ue.includes("value")?l.changed:"",ie].filter(Boolean).join(" "),la=[l.input,Ee?l.inputError:"",E?l.dropdownInput:"",le].filter(Boolean).join(" "),ca=()=>g||Ee?Ee?(0,d.jsx)(L,{variant:"warning",message:Ee,className:I,isAnimated:j,isDismissable:C,isImportant:w,isCompact:b,iconOverride:(0,d.jsx)(u.y3G,{size:b?14:18})}):g?(0,d.jsx)(L,{variant:v,message:g,title:x,list:f,className:I,isAnimated:j,isDismissable:C,isImportant:w,isCompact:b,socialCount:N,actionText:T,actionCallback:S,onDismiss:y,iconOverride:"simple"===v?(0,d.jsx)(u.S8s,{size:b?12:16}):null}):null:null;return(0,d.jsxs)("div",{className:ia,children:[n&&(0,d.jsxs)("label",{htmlFor:t,className:l.label,children:[n,q&&(0,d.jsx)("span",{className:l.requiredMark,children:"*"}),!q&&G&&(0,d.jsx)("span",{className:`${l.optionalBadge} ${V}`,children:W})]}),!E&&(fe||_e)&&(0,d.jsx)("div",{className:l.toolbar,children:E?null:fe?(0,d.jsx)(F,{onChange:sa,value:ye,inputRef:Se,compact:Ce,darkMode:je,showHint:we}):_e}),(0,d.jsxs)("div",{className:l.inputWrapper,children:[ve&&(0,d.jsx)("div",{className:l.leftElement,children:ve}),Z&&"left"===X&&(0,d.jsx)("span",{className:l.icon,children:Z}),E?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:`${l.dropdownContainer} ${Oe?l.open:""}`,onClick:Xe,children:[(0,d.jsx)("input",{ref:Se,id:t,name:r,type:"text",value:ye,placeholder:i,disabled:J,readOnly:!0,className:la,onFocus:ra,required:q,...be}),(()=>{if(!E||!Oe)return null;const e={maxHeight:D,width:R||"100%"};return(0,d.jsxs)("div",{className:l.dropdownOptions,style:e,ref:Te,children:[z&&(0,d.jsx)("div",{className:l.searchContainer,children:(0,d.jsx)("input",{type:"text",placeholder:"Search...",value:Re,onChange:Ye,className:l.searchInput,autoFocus:!0})}),We.length>0?(0,d.jsx)("ul",{className:l.optionsList,children:We.map(((e,a)=>{const t=e[P]||e,s=e[$]||e,r=(e=>He.some((a=>(a[$]||a)===(e[$]||e))))(e);return(0,d.jsx)("li",{className:`${l.option} ${r?l.selectedOption:""}`,onClick:()=>Qe(e),children:M?M(e,r):(0,d.jsxs)(d.Fragment,{children:[B&&(0,d.jsx)("input",{type:"checkbox",checked:r,onChange:()=>{},className:l.optionCheckbox}),(0,d.jsx)("span",{className:l.optionLabel,children:t})]})},`${s}-${a}`)}))}):(0,d.jsxs)("div",{className:l.noOptions,children:[(0,d.jsx)("p",{children:A}),U&&Re&&(0,d.jsxs)("button",{className:l.createOption,onClick:ea,children:['Criar "',Re,'"']})]})]})})()]}),E?(0,d.jsx)("button",{type:"button",className:l.dropdownToggle,onClick:Xe,"aria-label":Oe?"Close dropdown":"Open dropdown",tabIndex:"-1",disabled:J||K,children:Oe?(0,d.jsx)(u.wAb,{size:16}):(0,d.jsx)(u.fK4,{size:16})}):null]}):"textarea"===o?(0,d.jsx)("textarea",{ref:Se,id:t,name:r,value:ye,onChange:sa,onBlur:oa,onFocus:ra,placeholder:i,disabled:J,readOnly:K,maxLength:Q,minLength:Y,className:`${l.textarea} ${la}`,required:q,rows:be.rows||3,...be}):(0,d.jsx)("input",{ref:Se,id:t,name:r,type:E?"text":"password"===o?Be?"text":"password":["phoneNumber","cpf","cnpj","cep","rg"].includes(te)?"tel":"email"===te?"email":"number"===te||"onlyNumbers"===te?"tel":"url"===te?"url":o,value:ye,onChange:sa,onBlur:oa,onFocus:ra,placeholder:i,disabled:J,readOnly:K,maxLength:Q,minLength:Y,className:la,required:q,...be}),"password"===o&&("password"!==o||E?null:(0,d.jsxs)("button",{type:"button",className:l.visibilityToggle,onClick:aa,"aria-label":Be,tabIndex:"-1",children:[Be?(0,d.jsx)(u._NO,{size:16}):(0,d.jsx)(u.Vap,{size:16}),(0,d.jsx)("span",{children:Be?"Esconder":"Mostrar"})]})),ce&&(!ce||!ye&&0===He.length||J||K?null:(0,d.jsx)("button",{type:"button",className:l.clearButton,onClick:ta,"aria-label":"Clear input",tabIndex:"-1",children:(0,d.jsx)(u.yGN,{})})),Z&&"right"===X&&(0,d.jsx)("span",{className:l.icon,children:Z}),ge&&(0,d.jsx)("div",{className:l.rightElement,children:ge})]}),(0,d.jsx)("div",{className:l.bottomWrapper,children:(0,d.jsxs)("div",{className:l.bottomContent,children:[(0,d.jsx)("div",{className:l.hintWrapper,children:ca()}),re&&Q&&!E&&(0,d.jsx)("div",{className:l.counterWrapper,children:(0,d.jsx)(p,{current:ye?ye.length:0,max:Q,className:l.charCounter,variant:xe,showFormatting:oe})})]})})]})}));$.displayName="Input";const B=$,z={cardContainer:"CardUploadInput_cardContainer__rn1bp",evenCard:"CardUploadInput_evenCard__9h+BG",oddCard:"CardUploadInput_oddCard__QdSaI",hasContent:"CardUploadInput_hasContent__LintI",cardHeader:"CardUploadInput_cardHeader__-xtHK",cardNumberWrapper:"CardUploadInput_cardNumberWrapper__YDOQ8",cardNumber:"CardUploadInput_cardNumber__Zh2K9",fileNameDisplay:"CardUploadInput_fileNameDisplay__fYk0n",progressIndicator:"CardUploadInput_progressIndicator__eFArm",active:"CardUploadInput_active__ReKmG",progressBar:"CardUploadInput_progressBar__0zfDE",shimmer:"CardUploadInput_shimmer__w4bvR",fileTypeSelect:"CardUploadInput_fileTypeSelect__pJT-z",select:"CardUploadInput_select__8d1Kt",fileTypeIconWrapper:"CardUploadInput_fileTypeIconWrapper__ggDTy",fileTypeInfo:"CardUploadInput_fileTypeInfo__kl7Sm",typeIcon:"CardUploadInput_typeIcon__QZBJB",cardBody:"CardUploadInput_cardBody__KUtxR",uploadMethods:"CardUploadInput_uploadMethods__1Fzni",methodButton:"CardUploadInput_methodButton__16X2+",activeMethod:"CardUploadInput_activeMethod__ufI9K",formGroup:"CardUploadInput_formGroup__wa3XN",uploadHeader:"CardUploadInput_uploadHeader__8R1u9",label:"CardUploadInput_label__d1Kds",urlActions:"CardUploadInput_urlActions__foG6o",testUrlButton:"CardUploadInput_testUrlButton__S-opu",dropArea:"CardUploadInput_dropArea__KDe94",dragging:"CardUploadInput_dragging__2zwfa",activeDrop:"CardUploadInput_activeDrop__c4qGa",pulseArea:"CardUploadInput_pulseArea__xT9cK",uploading:"CardUploadInput_uploading__pp6BJ",uploadingSpinner:"CardUploadInput_uploadingSpinner__U-osR",spin:"CardUploadInput_spin__1+D7z",uploadSuccess:"CardUploadInput_uploadSuccess__9U9Q+",successPulse:"CardUploadInput_successPulse__dAMV9",uploadError:"CardUploadInput_uploadError__GZ6I+",errorPulse:"CardUploadInput_errorPulse__p65Cr",uploadIcon:"CardUploadInput_uploadIcon__8bB6R",dropText:"CardUploadInput_dropText__T2ZY1",dropHint:"CardUploadInput_dropHint__e70Lk",dropHintEnhanced:"CardUploadInput_dropHintEnhanced__nygPl",formatBadges:"CardUploadInput_formatBadges__Bxt39",formatBadge:"CardUploadInput_formatBadge__VVglQ",sizeLimit:"CardUploadInput_sizeLimit__68O2j",errorMessageContainer:"CardUploadInput_errorMessageContainer__82awP",errorMessage:"CardUploadInput_errorMessage__tr00F",slideIn:"CardUploadInput_slideIn__JR646",previewContent:"CardUploadInput_previewContent__byj2x",loading:"CardUploadInput_loading__KKQBR",error:"CardUploadInput_error__UPeQx",previewLoader:"CardUploadInput_previewLoader__5fX3F",spinner:"CardUploadInput_spinner__XWzgY",previewErrorMessage:"CardUploadInput_previewErrorMessage__GU5iu",hidden:"CardUploadInput_hidden__ALJzB",removeMediaButton:"CardUploadInput_removeMediaButton__roF2K",previewImage:"CardUploadInput_previewImage__UkhfZ",previewVideo:"CardUploadInput_previewVideo__7-4II",videoWrapper:"CardUploadInput_videoWrapper__rMJcj",videoOverlay:"CardUploadInput_videoOverlay__FBXcY",videoFormatInfo:"CardUploadInput_videoFormatInfo__dBYLU",previewActions:"CardUploadInput_previewActions__ieD3o",previewActionGroup:"CardUploadInput_previewActionGroup__J1fK4",clearingAnimation:"CardUploadInput_clearingAnimation__YrbWi",clearAway:"CardUploadInput_clearAway__qJcRT",mediaDetailsFooter:"CardUploadInput_mediaDetailsFooter__tDkcG",uploadDetails:"CardUploadInput_uploadDetails__UFkuj",uploadTimestamp:"CardUploadInput_uploadTimestamp__Ebm3S",previewHeader:"CardUploadInput_previewHeader__J53zR",previewControls:"CardUploadInput_previewControls__6EEmH",loadSuccess:"CardUploadInput_loadSuccess__GE7TP",pulseSuccess:"CardUploadInput_pulseSuccess__LFyb0",pulse:"CardUploadInput_pulse__DBBzw",successFade:"CardUploadInput_successFade__YtmL7",fadeIn:"CardUploadInput_fadeIn__2vd9B"},U=e=>{let{index:a,card:t,updateCard:r,totalCards:l}=e;const c=(0,o.MW)(),[p,m]=(0,s.useState)(t.fileUrl?"url":"file"),[h,_]=(0,s.useState)(!1),[g,v]=(0,s.useState)(t.fileUrl||""),[x,f]=(0,s.useState)(""),[C,j]=(0,s.useState)(!1),[w,b]=(0,s.useState)(!1),[N,T]=(0,s.useState)(0),[S,y]=(0,s.useState)(0),I=(0,s.useRef)(null),E=(0,s.useRef)(null),k=(0,s.useRef)(null),F=(0,s.useRef)(null),{uploadToAzure:P,isUploading:L,uploadError:$,uploadedFile:U,resetUpload:A}=(()=>{const[e,a]=(0,s.useState)(!1),[t,r]=(0,s.useState)(""),[i,l]=(0,s.useState)(null),[c,d]=(0,s.useState)(0),p=(0,o.MW)();return{uploadToAzure:(0,s.useCallback)((async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};a(!0),r(""),l(null),d(0);try{try{const a=(0,n.o)();if(!a)throw new Error("Servi\xe7o de upload n\xe3o configurado");const s=e=>{d(e),t(e),e%25===0&&e>0&&p.info(`Upload ${e}% conclu\xeddo`,{position:"bottom-right",autoCloseTime:1500})},r=await a.uploadFile(e,{onProgress:s});return l(r),p.success(`Upload do arquivo "${e.name}" conclu\xeddo com sucesso!`,{position:"top-right",autoCloseTime:3e3}),r}catch(s){console.warn("Falha no upload para Azure, usando fallback:",s);const a={url:await new Promise((a=>{const t=new FileReader;t.onloadend=()=>a(t.result),t.readAsDataURL(e)})),type:e.type.startsWith("image/")?"image":"video",name:e.name};for(let e=0;e<=100;e+=20)await new Promise((e=>setTimeout(e,300))),d(e),t(e),e%25===0&&e>0&&p.info(`Upload ${e}% conclu\xeddo (modo fallback)`,{position:"bottom-right",autoCloseTime:1500});return l(a),p.success(`Upload do arquivo "${e.name}" conclu\xeddo em modo fallback!`,{position:"top-right",autoCloseTime:3e3}),a}}catch(o){throw console.error("Erro fatal em uploadToAzure:",o),r(o.message||"Erro no upload do arquivo"),p.error(`Falha no upload: ${o.message||"Erro desconhecido"}`,{position:"top-center",autoCloseTime:5e3}),o}finally{a(!1)}}),[p]),isUploading:e,uploadError:t,uploadedFile:i,uploadProgress:c,cancelUpload:(0,s.useCallback)((()=>{a(!1),d(0),p.info("Upload cancelado",{position:"bottom-right",autoCloseTime:3e3})}),[p]),resetUpload:(0,s.useCallback)((()=>{a(!1),r(""),l(null),d(0)}),[])}})();(0,s.useEffect)((()=>{if(t.fileUrl){if(f(""),b(!1),g&&g===t.fileUrl||(j(!0),v(t.fileUrl)),"image"===t.fileType){const e=new Image;e.onload=()=>{j(!1),b(!1)},e.onerror=()=>{j(!1),b(!0),console.error(`Erro ao carregar imagem para Card ${a+1}: ${t.fileUrl}`),c.warning(`N\xe3o foi poss\xedvel carregar a imagem do Card ${a+1}. Verifique se a URL est\xe1 correta.`,{position:"bottom-right",autoCloseTime:4e3})},e.src=t.fileUrl}}else v(""),j(!1),b(!1)}),[t.fileUrl,t.fileType,a,c]),(0,s.useEffect)((()=>{const e=e=>{e.dataTransfer.types.includes("Files")&&"file"!==p&&(m("file"),c.info(`Modo de upload de arquivo ativado para o Card ${a+1}`,{position:"bottom-right",autoCloseTime:2e3}))};return document.addEventListener("dragenter",e),()=>{document.removeEventListener("dragenter",e)}}),[p,a,c]);const O=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),_(!0),E.current&&E.current.classList.add(z.activeDrop)}),[]),M=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),_(!1),E.current&&E.current.classList.remove(z.activeDrop)}),[]),R=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),h||_(!0)}),[h]),D=(0,s.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),_(!1),E.current&&E.current.classList.remove(z.activeDrop),e.dataTransfer.files&&e.dataTransfer.files.length>0&&G({target:{files:e.dataTransfer.files}})}),[]),H=(0,s.useCallback)((e=>{const a=["image/jpeg","image/png","image/gif","image/webp"];if(![...a,"video/mp4","video/webm"].includes(e.type))return c.error(`Tipo de arquivo n\xe3o suportado: ${e.type}. Use JPEG, PNG, GIF, WebP, MP4 ou WebM.`,{position:"top-center",autoCloseTime:5e3}),!1;const t=a.includes(e.type),s=t?10485760:31457280;if(e.size>s){const a=(e.size/1048576).toFixed(2),s=t?"10MB":"30MB";return c.error(`Arquivo muito grande: ${a}MB. O limite para ${t?"imagens":"v\xeddeos"} \xe9 ${s}.`,{position:"top-center",autoCloseTime:5e3}),!1}return!0}),[c]),G=(0,s.useCallback)((async e=>{const t=e.target.files[0];if(t)if(H(t))try{var s,o;const e=t.type.startsWith("image/")?"image":"video";r(a,"fileType",e);const n=URL.createObjectURL(t);v(n),j(!0),b(!1);const i=e=>{T(e)};null===(s=E.current)||void 0===s||s.classList.add(z.uploading);const l=`upload-progress-${a}-${Date.now()}`;setTimeout((()=>{c.info(`Enviando ${"image"===e?"imagem":"v\xeddeo"} para o Card ${a+1}...`,{id:l,position:"bottom-right",autoCloseTime:!1,progress:0})}),0);const d=await P(t,i);if(!d||!d.url)throw new Error("Upload falhou: nenhuma URL retornada.");console.log("Upload conclu\xeddo!",d);const p=t.name.length>20?t.name.substring(0,18)+"..."+t.name.slice(-8):t.name;r(a,"fileUrl",d.url),r(a,"fileType",e),r(a,"fileName",p),r(a,"fileSize",t.size),r(a,"uploadDate",(new Date).toISOString()),r(a,"hasFile",!0),r(a,"uploadMethod","file"),setTimeout((()=>{v(""),setTimeout((()=>{v(d.url),j(!1),b(!1)}),50)}),100),c.success(`Arquivo "${p}" configurado para o Card ${a+1}!`,{position:"bottom-right",autoCloseTime:3e3}),null===(o=E.current)||void 0===o||o.classList.add(z.uploadSuccess),setTimeout((()=>{var e;null===(e=E.current)||void 0===e||e.classList.remove(z.uploadSuccess)}),1e3),"function"===typeof window.saveCurrentDraft&&window.saveCurrentDraft()}catch(l){var n;console.error("Erro no processamento do arquivo:",l),null===(n=E.current)||void 0===n||n.classList.add(z.uploadError),setTimeout((()=>{var e;null===(e=E.current)||void 0===e||e.classList.remove(z.uploadError)}),1e3),c.error(`Erro no upload: ${l.message||"Erro desconhecido"}`,{position:"top-center",autoCloseTime:5e3}),b(!0)}finally{var i;I.current&&(I.current.value=""),null===(i=E.current)||void 0===i||i.classList.remove(z.uploading),T(0)}else I.current&&(I.current.value="")}),[a,r,P,c,H]),W=(0,s.useCallback)((()=>{var e;A(),null===(e=I.current)||void 0===e||e.click()}),[A]),V=(0,s.useCallback)((e=>{if(!e)return f("URL \xe9 obrigat\xf3ria"),!1;try{new URL(e);const t=e.split(".").pop().toLowerCase(),s=["mp4","webm","ogg","mov"],o=["jpg","jpeg","png","gif","webp","svg"].includes(t),n=s.includes(t);return o?r(a,"fileType","image"):n&&r(a,"fileType","video"),f(""),!0}catch(t){return f('URL inv\xe1lida. Inclua "https://" ou "http://"'),!1}}),[a,r]),q=(0,s.useCallback)((e=>{const t=e.target.value.trim();if(!t)return r(a,"fileUrl",""),r(a,"hasFile",!1),f(""),void v("");if(V(t)){j(!0),b(!1),r(a,"fileUrl",t),r(a,"uploadMethod","url"),r(a,"hasFile",!0),r(a,"uploadDate",(new Date).toISOString());const e=t.split("/"),s=e[e.length-1];r(a,"fileName",s||`url-${a+1}`),v(t),c.success(`URL configurada para o Card ${a+1}!`,{position:"bottom-right",autoCloseTime:3e3}),"function"===typeof window.saveCurrentDraft&&window.saveCurrentDraft()}}),[a,r,V,c]),J=(0,s.useCallback)((e=>{"Enter"===e.key&&q(e)}),[q]),K=(0,s.useCallback)((()=>{const e=`loading-test-url-${a}`;c.info(`Carregando URL de teste para o Card ${a+1}...`,{id:e,position:"bottom-right",autoCloseTime:!1});const t=["https://images.sympla.com.br/64999ce2a7792.png"],s=t[a%t.length];setTimeout((()=>{r(a,"fileUrl",s),r(a,"fileType","image"),r(a,"fileName",`imagem-teste-${a+1}.png`),r(a,"uploadMethod","url"),r(a,"fileSize",124500),r(a,"uploadDate",(new Date).toISOString()),r(a,"hasFile",!0),m("url"),V(s),v(s),setTimeout((()=>{c.success(`URL de teste aplicada ao Card ${a+1}`,{position:"bottom-right",autoCloseTime:3e3})}),0),"function"===typeof window.saveCurrentDraft&&window.saveCurrentDraft()}),800)}),[a,r,V,c]),Z=(0,s.useCallback)((()=>{if(t.fileUrl&&!window.confirm(`Tem certeza que deseja remover o arquivo do Card ${a+1}?`))return;const e=document.querySelector(`#preview-section-${a}`);e&&e.classList.add(z.clearingAnimation),setTimeout((()=>{r(a,"fileUrl",""),r(a,"fileName",""),r(a,"fileSize",null),r(a,"hasFile",!1),r(a,"uploadMethod",""),v(""),I.current&&(I.current.value=""),F.current&&(F.current.value=""),f(""),b(!1),A&&A(),setTimeout((()=>{c.info(`Card ${a+1} foi limpo`,{position:"bottom-right",autoCloseTime:3e3})}),0),"function"===typeof window.saveCurrentDraft&&window.saveCurrentDraft(),e&&e.classList.remove(z.clearingAnimation)}),300)}),[a,r,A,t.fileUrl,c]),X=(0,s.useCallback)((e=>{const s=e.target.value;if(t.fileName){const e=t.fileName.split(".").pop().toLowerCase(),a=["jpg","jpeg","png","gif","webp","svg"];"image"===s&&["mp4","webm","ogg","mov"].includes(e)?c.warning(`A extens\xe3o .${e} geralmente \xe9 um formato de v\xeddeo.`,{position:"bottom-right",autoCloseTime:4e3}):"video"===s&&a.includes(e)&&c.warning(`A extens\xe3o .${e} geralmente \xe9 um formato de imagem.`,{position:"bottom-right",autoCloseTime:4e3})}r(a,"fileType",s),setTimeout((()=>{c.info(`Tipo de arquivo alterado para ${"image"===s?"imagem":"v\xeddeo"} no Card ${a+1}`,{position:"bottom-right",autoCloseTime:2e3})}),0)}),[a,r,c,t.fileName]),Q=((0,s.useCallback)((()=>{if(!t.fileUrl)return;const e=`checking-url-${a}`;c.info(`Verificando URL para o Card ${a+1}...`,{id:e,position:"bottom-right",autoCloseTime:!1});const s=new Image;s.onload=()=>{c.success(`URL verificada com sucesso para o Card ${a+1}!`,{position:"bottom-right",autoCloseTime:3e3}),b(!1)},s.onerror=()=>{const e=document.createElement("video");e.onloadeddata=()=>{c.success(`URL de v\xeddeo verificada com sucesso para o Card ${a+1}!`,{position:"bottom-right",autoCloseTime:3e3}),b(!1),"video"!==t.fileType&&(r(a,"fileType","video"),c.info(`Tipo de arquivo atualizado para v\xeddeo no Card ${a+1}`,{position:"bottom-right",autoCloseTime:3e3}))},e.onerror=()=>{c.error(`A URL fornecida no Card ${a+1} n\xe3o parece ser v\xe1lida. Verifique se o endere\xe7o est\xe1 correto.`,{position:"bottom-right",autoCloseTime:5e3}),b(!0)},e.src=t.fileUrl},s.src=t.fileUrl}),[t.fileUrl,t.fileType,a,c,r]),(0,s.useRef)(null)),Y=((0,s.useCallback)((()=>{j(!1),b(!1);const e=Q.current;e&&(e.classList.add(z.loadSuccess),setTimeout((()=>{e&&e.classList.remove(z.loadSuccess)}),500)),console.log(`V\xeddeo carregado com sucesso para o Card ${a+1}`)}),[a]),(0,s.useCallback)((()=>"image"===t.fileType?(0,d.jsx)(u.fZZ,{size:20,className:z.typeIcon}):(0,d.jsx)(u.pVQ,{size:20,className:z.typeIcon})),[t.fileType])),ee=(0,s.useCallback)((()=>{console.log(`Imagem/v\xeddeo carregado com sucesso para Card ${a+1}`),j(!1),b(!1);const e="image"===t.fileType?k.current:Q.current;e&&(e.classList.add(z.loadSuccess),setTimeout((()=>{e&&e.classList.remove(z.loadSuccess)}),500))}),[a,t.fileType]),ae=(0,s.useCallback)((()=>{j(!1),b(!0),c.warning(`N\xe3o foi poss\xedvel carregar a pr\xe9via para o Card ${a+1}. Verifique se a URL \xe9 v\xe1lida.`,{position:"bottom-right",autoCloseTime:4e3})}),[a,c]),te=`${z.cardContainer} ${a%2===0?z.evenCard:z.oddCard} ${t.fileUrl?z.hasContent:""}`;return(0,s.useEffect)((()=>{t.fileUrl&&m("file"===t.uploadMethod||t.fileSize?"file":"url")}),[t.fileUrl,t.uploadMethod,t.fileSize]),(0,d.jsxs)("div",{className:te,children:[N>0&&(0,d.jsx)("div",{className:`${z.progressIndicator} ${z.active}`,children:(0,d.jsx)("div",{className:z.progressBar,style:{width:`${N}%`}})}),(0,d.jsxs)("div",{className:z.cardHeader,children:[(0,d.jsx)("div",{className:z.cardNumberWrapper,children:(0,d.jsxs)("div",{className:z.cardNumber,children:["Cart\xe3o ",a+1]})}),(0,d.jsxs)("div",{className:z.fileTypeSelect,children:[(0,d.jsxs)("select",{className:z.select,value:t.fileType||"image",onChange:X,"aria-label":"Tipo de m\xeddia",children:[(0,d.jsx)("option",{value:"image",children:"Imagem"}),(0,d.jsx)("option",{value:"video",children:"V\xeddeo"})]}),(0,d.jsx)("div",{className:z.fileTypeIconWrapper,children:Y()})]})]}),(0,d.jsxs)("div",{className:z.cardBody,children:[(0,d.jsxs)("div",{className:z.uploadMethods,children:[(0,d.jsxs)("button",{className:`${z.methodButton} ${"url"===p?z.activeMethod:""}`,onClick:()=>m("url"),"aria-label":"Mudar para m\xe9todo URL",children:[(0,d.jsx)(u.ayE,{size:16}),(0,d.jsx)("span",{children:"URL"})]}),(0,d.jsxs)("button",{className:`${z.methodButton} ${"file"===p?z.activeMethod:""}`,onClick:()=>m("file"),"aria-label":"Mudar para m\xe9todo Upload",children:[(0,d.jsx)(u.YoE,{size:16}),(0,d.jsx)("span",{children:"Upload"})]})]}),g?(0,d.jsxs)("div",{className:z.formGroup,children:[(0,d.jsx)("div",{className:z.uploadHeader,children:(0,d.jsx)("label",{className:z.label,children:"Visualiza\xe7\xe3o do Arquivo"})}),(0,d.jsxs)("div",{className:`${z.dropArea} ${z.previewContent} ${C?z.loading:""} ${w?z.error:""}`,id:`preview-section-${a}`,children:[C&&(0,d.jsxs)("div",{className:z.previewLoader,children:[(0,d.jsx)("div",{className:z.spinner}),(0,d.jsx)("p",{children:"Carregando..."})]}),w&&(0,d.jsxs)("div",{className:z.previewErrorMessage,children:[(0,d.jsx)(u.y3G,{size:32}),(0,d.jsx)("p",{children:"N\xe3o foi poss\xedvel carregar a m\xeddia"}),(0,d.jsx)(i.A,{variant:"outline",size:"small",color:"secondary",onClick:()=>{b(!1),j(!0);const e=k.current;e&&(e.src=t.fileUrl+"?t="+Date.now())},iconLeft:(0,d.jsx)(u.jTZ,{size:14}),children:"Tentar novamente"})]}),(0,d.jsx)("button",{className:z.removeMediaButton,onClick:Z,"aria-label":"Remover m\xeddia",title:"Remover m\xeddia",children:(0,d.jsx)(u.yGN,{size:18})}),"image"===t.fileType?(0,d.jsx)("img",{ref:k,src:g,alt:`Pr\xe9-visualiza\xe7\xe3o do Cart\xe3o ${a+1}`,className:`${z.previewImage} ${w?z.hidden:""}`,loading:"lazy",onLoad:ee,onError:ae,style:{opacity:C?0:1,transition:"opacity 0.3s ease"}}):(0,d.jsxs)("div",{className:z.videoWrapper,children:[(0,d.jsx)("video",{ref:Q,src:g,className:`${z.previewVideo} ${w?z.hidden:""}`,controls:!0,playsInline:!0,preload:"metadata",onLoadedData:ee,onError:ae,style:{opacity:C?0:1,transition:"opacity 0.3s ease"},poster:"/static/video-poster.jpg"}),!w&&!C&&(0,d.jsx)("div",{className:z.videoOverlay,children:(0,d.jsx)("div",{className:z.videoFormatInfo,children:(0,d.jsx)("span",{children:"MP4, WebM"})})})]})]})]}):"url"===p?(0,d.jsxs)("div",{className:z.formGroup,children:[(0,d.jsx)("div",{className:z.uploadHeader,children:(0,d.jsx)("label",{className:z.label,children:"URL do Arquivo"})}),(0,d.jsx)(B,{type:"url",clearable:!0,ref:F,value:t.fileUrl||"",onChange:e=>V(e.target.value),onBlur:q,onKeyDown:J,onClear:Z,placeholder:"https://exemplo.com/imagem.jpg",error:x,"aria-label":"URL do arquivo de m\xeddia"}),(0,d.jsxs)("div",{className:z.urlHelpActions,children:[(0,d.jsx)("span",{className:z.urlHint,children:"Cole uma URL direta para uma imagem ou v\xeddeo"}),(0,d.jsx)(i.A,{variant:"text",size:"small",color:"primary",onClick:K,iconLeft:(0,d.jsx)(u.ARf,{size:14}),children:"Usar URL de teste"})]})]}):(0,d.jsxs)("div",{className:z.formGroup,children:[(0,d.jsx)("div",{className:z.uploadHeader,children:(0,d.jsx)("label",{className:z.label,children:g?"Visualiza\xe7\xe3o do Arquivo":"Upload de Arquivo"})}),(0,d.jsx)("div",{className:`${z.dropArea} ${h?z.dragging:""}`,onDragEnter:O,onDragLeave:M,onDragOver:R,onDrop:D,ref:E,onClick:W,role:"button",tabIndex:0,"aria-label":"\xc1rea de arrastar e soltar",children:L?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:z.uploadingSpinner}),(0,d.jsx)("p",{className:z.dropText,children:"Enviando arquivo..."}),(0,d.jsx)("p",{className:z.dropHint,children:N>0?`${Math.round(N)}% conclu\xeddo`:"Preparando upload..."})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.YoE,{size:32,className:z.uploadIcon}),(0,d.jsx)("p",{className:z.dropText,children:"Arraste um arquivo ou clique para escolher"}),(0,d.jsxs)("div",{className:z.dropHintEnhanced,children:[(0,d.jsxs)("div",{className:z.formatBadges,children:[(0,d.jsx)("span",{className:z.formatBadge,children:"JPEG"}),(0,d.jsx)("span",{className:z.formatBadge,children:"PNG"}),(0,d.jsx)("span",{className:z.formatBadge,children:"MP4"})]}),(0,d.jsxs)("span",{className:z.sizeLimit,children:["Limite: ","image"===t.fileType?"10MB":"30MB"]})]})]})}),(0,d.jsx)("input",{type:"file",ref:I,accept:"image/jpeg,image/png,image/gif,image/webp,video/mp4,video/webm",onChange:G,style:{display:"none"},disabled:L,"aria-hidden":"true"})]}),$&&(0,d.jsxs)("div",{className:z.errorMessageContainer,children:[(0,d.jsxs)("div",{className:z.errorMessage,children:[(0,d.jsx)(u.y3G,{size:16}),(0,d.jsx)("span",{children:$})]}),(0,d.jsx)(i.A,{variant:"text",size:"small",color:"negative",onClick:A,iconLeft:(0,d.jsx)(u.jTZ,{size:14}),children:"Tentar novamente"})]})]}),g&&(0,d.jsx)("div",{className:z.formGroup,children:(0,d.jsxs)("div",{className:z.previewActions,children:[(0,d.jsxs)("div",{className:z.previewActionGroup,children:[(0,d.jsx)(i.A,{variant:"text",size:"small",color:"primary",as:"a",href:t.fileUrl,target:"_blank",rel:"noopener noreferrer",iconLeft:(0,d.jsx)(u.HaR,{size:14}),title:"Abrir a m\xeddia em uma nova aba",children:"Ver original"}),(0,d.jsx)(i.A,{variant:"text",size:"small",color:"negative",onClick:Z,iconLeft:(0,d.jsx)(u.IXo,{size:14}),title:"Remover m\xeddia",children:"Remover"})]}),t.uploadDate&&(0,d.jsx)("div",{className:z.mediaDetailsFooter,children:(0,d.jsx)("div",{className:z.uploadDetails,children:(0,d.jsxs)("span",{className:z.uploadTimestamp,children:[`${t.fileName||"Arquivo"} \u2022 `,`${((t.fileSize||0)/1024).toFixed(1)} KB`]})})})]})})]})},A=s.memo(U),O={authOptions:"StepOne_authOptions__T2JvM",rememberKeyLabel:"StepOne_rememberKeyLabel__PvUU0",rememberKeyCheckbox:"StepOne_rememberKeyCheckbox__I56qz",securityNote:"StepOne_securityNote__yZZDP",twoColumnLayout:"StepOne_twoColumnLayout__0XxEy",mainColumn:"StepOne_mainColumn__Fcofg",sideColumn:"StepOne_sideColumn__LXy3D",uploadSummaryCard:"StepOne_uploadSummaryCard__7MmkS",summaryHeader:"StepOne_summaryHeader__zSjLO",uploadStats:"StepOne_uploadStats__yPV-P",statRow:"StepOne_statRow__A3F2H",statLabel:"StepOne_statLabel__TTKI9",statValue:"StepOne_statValue__695Uk",statusActions:"StepOne_statusActions__dghqR",cardsControlSection:"StepOne_cardsControlSection__b1iAd",controlHeader:"StepOne_controlHeader__Jtbx4",cardCounter:"StepOne_cardCounter__nbZzS",cardCountLabel:"StepOne_cardCountLabel__EG3c1",buttonGroup:"StepOne_buttonGroup__tdt40",controlButton:"StepOne_controlButton__Vcu4U",cardCount:"StepOne_cardCount__Yn+6N",cardControlOptions:"StepOne_cardControlOptions__mu57m",cardControlHelp:"StepOne_cardControlHelp__lyQuP",cardTipsContainer:"StepOne_cardTipsContainer__K6uE3",tipsToggle:"StepOne_tipsToggle__7HzdG",cardTips:"StepOne_cardTips__3hXZ+",fadeIn:"StepOne_fadeIn__WPxUp",jumpToCardsButton:"StepOne_jumpToCardsButton__AcSN3",cardsGrid:"StepOne_cardsGrid__N6VSh",fadeInUp:"StepOne_fadeInUp__2AfRL",uploadProgressContainer:"StepOne_uploadProgressContainer__6tKQc",uploadProgressBar:"StepOne_uploadProgressBar__46xUO",uploadProgressFill:"StepOne_uploadProgressFill__mhK2g",uploadProgressText:"StepOne_uploadProgressText__sWm56",fileHandleInfo:"StepOne_fileHandleInfo__+FbSZ",slideIn:"StepOne_slideIn__4tDoe",uploadSummary:"StepOne_uploadSummary__cQgcu",summaryTitle:"StepOne_summaryTitle__U0UK+",summaryList:"StepOne_summaryList__E04q1",summaryItem:"StepOne_summaryItem__4nliE",successStatus:"StepOne_successStatus__wJB8n",cachedStatus:"StepOne_cachedStatus__UrEbw",simulatedStatus:"StepOne_simulatedStatus__qurZr",container:"StepOne_container__OzvQS",authHeader:"StepOne_authHeader__HuZOe",authIconContainer:"StepOne_authIconContainer__LX-mQ"},M="Steps_container__p2lLy",R="Steps_introStepWrapper__ObIih",D="Steps_stepTitle__f7OJP",H="Steps_stepDescription__FkqAp",G="Steps_sectionHeader__56hXd",W="Steps_sectionIconContainer__EximX",V="Steps_containerCard__eGlhp",q="Steps_actionSection__1apm7",J="Steps_lastSavedInfo__tRb-h",K="Steps_unsavedIndicator__Gg334",Z="Steps_stepProgressContainer__Nbxd3",X="Steps_stepProgressBar__FhaQy",Q="Steps_stepProgressFill__sEWoc",Y="Steps_stepProgressText__DYyU+",ee=e=>{let{authKey:a,setAuthKey:t,numCards:r,cards:n,updateCard:l,handleAddCard:c,handleRemoveCard:p,handleUploadFiles:m,loading:h,error:_,success:g,uploadResults:v,isStepValid:x,saveCurrentState:f,unsavedChanges:C,lastSavedTime:j}=e;const[w,b]=(0,s.useState)(!1),[N,T]=(0,s.useState)((()=>"true"===localStorage.getItem("remember_auth_key"))),[S,y]=(0,s.useState)(!1),[I,E]=(0,s.useState)(!1),[k,F]=(0,s.useState)(0),P=(0,o.MW)(),L=(0,s.useRef)(null);(0,s.useEffect)((()=>{N&&a?(localStorage.setItem("auth_key",a),localStorage.setItem("remember_auth_key","true")):N||(localStorage.removeItem("auth_key"),localStorage.setItem("remember_auth_key","false"))}),[N,a]),(0,s.useEffect)((()=>{if(N&&!a){const e=localStorage.getItem("auth_key");e&&t(e)}}),[N,a,t]);const $=(0,s.useCallback)((()=>{var e;null===(e=L.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}),[]),z=(0,s.useCallback)((()=>{if("function"===typeof f){f()?(b(!0),P.success("Rascunho salvo com sucesso!",{position:"bottom-right",autoCloseTime:3e3}),setTimeout((()=>{b(!1)}),3e3)):P.error("N\xe3o foi poss\xedvel salvar o rascunho.",{position:"top-center",autoCloseTime:5e3})}else console.error("Fun\xe7\xe3o saveCurrentState n\xe3o est\xe1 dispon\xedvel"),P.error("N\xe3o foi poss\xedvel salvar o rascunho. Tente novamente mais tarde.",{position:"top-center"})}),[f,P]),U=(0,s.useCallback)((()=>n.slice(0,r).every((e=>{var a;return null===(a=e.fileUrl)||void 0===a?void 0:a.trim()}))),[n,r]),ee=(0,s.useCallback)((()=>{F(0);const e=setInterval((()=>{F((a=>{const t=a+10*Math.random();return t>=100?(clearInterval(e),100):t}))}),300);return()=>clearInterval(e)}),[]),ae=(0,s.useCallback)((async()=>{try{if(!a)return void P.error("Chave de autoriza\xe7\xe3o (Router Key) \xe9 obrigat\xf3ria para continuar",{position:"top-center"});if(!U())return void P.warning("Adicione arquivos para todos os cards antes de continuar",{position:"top-center"});const e=ee();"function"===typeof f&&f(),await m(),F(100),e(),P.success("Upload de arquivos conclu\xeddo com sucesso!",{position:"top-right"})}catch(e){F(0),P.error(`Erro no upload dos arquivos: ${e.message||"Erro desconhecido"}`,{position:"top-center",autoCloseTime:7e3})}}),[a,U,m,P,f,ee]);(0,s.useEffect)((()=>{_&&P.error(_,{position:"top-center"}),g&&P.success(g,{position:"top-right"})}),[_,g,P]);n.slice(0,r).filter((e=>e.fileUrl&&e.fileHandle&&""!==e.fileHandle)).length,(0,s.useCallback)((()=>{if(window.confirm("Tem certeza que deseja limpar tudo? Isso for\xe7ar\xe1 um novo upload para todos os cards.")){for(let e=0;e<r;e++)l(e,"fileHandle","");P.info("Todos os arquivos foram limpos. Voc\xea precisar\xe1 fazer upload novamente.",{position:"top-center",autoCloseTime:3e3})}}),[n,r,l,P]);const te=(0,s.useCallback)((()=>"function"!==typeof x?!!a&&U():x(1)),[x,a,U]),se=(()=>{let e=0;return a&&e++,U()&&e++,Math.floor(e/2*100)})();return(0,d.jsxs)("div",{className:M,children:[(0,d.jsxs)("div",{className:R,children:[(0,d.jsx)("h2",{className:D,children:"Configura\xe7\xe3o de Arquivos"}),(0,d.jsx)("p",{className:H,children:"Nesta etapa, voc\xea configurar\xe1 as imagens ou v\xeddeos que ser\xe3o exibidos no seu carrossel do WhatsApp e fornecer\xe1 a chave de autoriza\xe7\xe3o necess\xe1ria para fazer o upload dos arquivos."}),(0,d.jsxs)("div",{className:Z,children:[(0,d.jsx)("div",{className:X,children:(0,d.jsx)("div",{className:Q,style:{width:`${se}%`}})}),(0,d.jsx)("span",{className:Y,children:100===se?"Pronto para continuar!":`${se}% completo`})]})]}),(0,d.jsxs)("div",{className:V,children:[(0,d.jsxs)("div",{className:G,children:[(0,d.jsx)("div",{className:W,children:(0,d.jsx)(u.Fv0,{size:24})}),(0,d.jsx)("h3",{children:"Autentica\xe7\xe3o"})]}),(0,d.jsx)("div",{className:O.authInputWrapper,children:(0,d.jsx)(B,{id:"authKey",name:"authKey",label:"Chave de Autoriza\xe7\xe3o (Router Key)",type:I?"text":"password",value:a,onChange:e=>t(e.target.value),placeholder:"Digite sua chave de autoriza\xe7\xe3o",hintMessage:"Esta chave \xe9 necess\xe1ria para enviar arquivos e criar templates. Voc\xea pode encontr\xe1-la no portal Blip no seu roteador conectado ao Canal WhatsApp.",hintVariant:"simple",hintIsCompact:!0,required:!0,error:""})}),(0,d.jsxs)("div",{className:O.authOptions,children:[(0,d.jsxs)("label",{className:O.rememberKeyLabel,children:[(0,d.jsx)("input",{type:"checkbox",className:O.rememberKeyCheckbox,checked:N,onChange:e=>T(e.target.checked)}),"Lembrar minha chave"]}),(0,d.jsxs)("div",{className:O.securityNote,children:[(0,d.jsx)(u.pcC,{size:14}),(0,d.jsx)("span",{children:"Sua chave \xe9 armazenada apenas no seu navegador"})]})]})]}),(0,d.jsxs)("div",{className:O.cardsControlSection,children:[(0,d.jsxs)("div",{className:G,children:[(0,d.jsx)("div",{className:W,children:(0,d.jsx)(u.Fv0,{size:24})}),(0,d.jsx)("h3",{children:"Autentica\xe7\xe3o"})]}),(0,d.jsxs)("div",{className:O.cardCounter,children:[(0,d.jsx)("span",{className:O.cardCountLabel,children:"N\xfamero de cards:"}),(0,d.jsxs)("div",{className:O.buttonGroup,children:[(0,d.jsx)(i.A,{onClick:p,disabled:r<=2,className:O.controlButton,"aria-label":"Remover card",variant:"outline",color:"content",size:"small",iconLeft:(0,d.jsx)(u.QLg,{size:18})}),(0,d.jsx)("span",{className:O.cardCount,children:r}),(0,d.jsx)(i.A,{onClick:c,disabled:r>=10,className:O.controlButton,"aria-label":"Adicionar card",variant:"outline",color:"content",size:"small",iconLeft:(0,d.jsx)(u.GGD,{size:18})})]})]}),(0,d.jsxs)("div",{className:O.cardControlOptions,children:[(0,d.jsx)("p",{className:O.cardControlHelp,children:"Um carrossel precisa de pelo menos 2 e no m\xe1ximo 10 cards. Cada card ter\xe1 uma imagem ou v\xeddeo e bot\xf5es interativos."}),(0,d.jsxs)("div",{className:O.cardTipsContainer,children:[(0,d.jsx)(i.A,{className:O.tipsToggle,onClick:()=>y(!S),variant:"text",color:"content",size:"small",children:S?"Ocultar dicas":"Mostrar dicas"}),S&&(0,d.jsxs)("div",{className:O.cardTips,children:[(0,d.jsx)("h4",{children:"Melhores pr\xe1ticas para imagens de carrossel:"}),(0,d.jsxs)("ul",{children:[(0,d.jsx)("li",{children:"Tamanho recomendado: 800\xd7418 pixels"}),(0,d.jsx)("li",{children:"Use as mesmas dimens\xf5es para todas as imagens para uma exibi\xe7\xe3o consistente"}),(0,d.jsx)("li",{children:"Mantenha os arquivos abaixo de 5MB para carregamento r\xe1pido"}),(0,d.jsx)("li",{children:"Para v\xeddeos, mantenha a dura\xe7\xe3o abaixo de 60 segundos"})]})]})]})]}),(0,d.jsx)(i.A,{variant:"outline",color:"primary",onClick:$,iconRight:(0,d.jsx)(u.LPr,{size:14}),className:O.jumpToCardsButton,children:"Ver todos os cards"})]}),(0,d.jsx)("div",{className:O.cardsGrid,ref:L,children:n.slice(0,r).map(((e,a)=>(0,d.jsx)(A,{index:a,card:e,updateCard:l,totalCards:r},a)))}),(0,d.jsxs)("div",{className:O.actionSection,children:[(0,d.jsxs)("div",{className:q,children:[(0,d.jsx)(i.A,{variant:"outline",color:"primary",size:"large",onClick:z,iconLeft:w?(0,d.jsx)(u.A3x,{size:18}):(0,d.jsx)(u.Bc_,{size:18}),children:w?"Salvo!":"Salvar Rascunho"}),(0,d.jsx)(i.A,{variant:"solid",color:"primary",size:"large",loading:h,disabled:!te()||h,iconLeft:h?null:(0,d.jsx)(u.B88,{size:18}),onClick:ae,children:h?"Processando uploads...":"Enviar Arquivos & Continuar"})]}),h&&(0,d.jsxs)("div",{className:O.uploadProgressContainer,children:[(0,d.jsx)("div",{className:O.uploadProgressBar,children:(0,d.jsx)("div",{className:O.uploadProgressFill,style:{width:`${k}%`}})}),(0,d.jsx)("span",{className:O.uploadProgressText,children:k<100?`Enviando arquivos... ${Math.floor(k)}%`:"Upload conclu\xeddo!"})]}),j&&!w&&(0,d.jsxs)("div",{className:J,children:[(0,d.jsx)(u.S8s,{size:14}),(0,d.jsxs)("span",{children:["\xdaltimo salvamento: ",new Date(j).toLocaleString(),C&&(0,d.jsx)("span",{className:K,children:" (Altera\xe7\xf5es n\xe3o salvas)"})]})]})]}),v.length>0&&(0,d.jsxs)("div",{className:O.uploadSummary,children:[(0,d.jsx)("div",{className:O.summaryTitle,children:"Resumo do upload:"}),(0,d.jsx)("ul",{className:O.summaryList,children:v.map(((e,a)=>(0,d.jsxs)("li",{className:O.summaryItem,children:["Card ",void 0!==e.cardIndex?e.cardIndex+1:a+1,":",(0,d.jsx)("span",{className:"success"===e.status?O.successStatus:"cached"===e.status?O.cachedStatus:O.simulatedStatus,children:"success"===e.status?" Upload bem-sucedido":"cached"===e.status?" Carregado do cache":" Simulado para teste"})]},a)))})]})]})},ae="ButtonEditor_buttonContainer__09rZO",te="ButtonEditor_invalidContainer__MpkzH",se="ButtonEditor_buttonTypeSelector__w4Rci",re="ButtonEditor_typeOption__gRdb8",oe="ButtonEditor_selectedType__ruoxW",ne="ButtonEditor_typeIconWrapper__HfVNo",ie="ButtonEditor_typeLabel__6KNmw",le="ButtonEditor_typeDescription__7kdas",ce="ButtonEditor_formGroup__3lScc",de="ButtonEditor_testActionButton__WEolC",pe="ButtonEditor_buttonActions__WFxG0",ue="ButtonEditor_removeButton__LDrY4",me="ButtonEditor_validationMessage__epDrW",he="ButtonEditor_validationIcon__8Jivp",_e="ButtonEditor_lockIndicator__9aksD",ge="ButtonEditor_disabledType__vLGMK",ve="ButtonEditor_syncWarning__1bqO+",xe="ButtonEditor_syncNotice__JTRLj",fe=e=>{var a;let{index:t,buttonIndex:r,button:o,updateButtonField:n,removeButton:l,totalButtons:c,showHints:p=!0,validationMessage:m,cards:h,numCards:_,syncButtonTypes:g,setFocusedInput:v}=e;const[x,f]=(0,s.useState)(!1),[C,j]=(0,s.useState)(!1),[w,b]=(0,s.useState)(!0),[N,T]=(0,s.useState)(!1);(0,s.useEffect)((()=>{b(_>1&&t>0)}),[_,t]);const S=()=>{null===v||void 0===v||v({cardIndex:t,buttonIndex:r})},y=()=>{null===v||void 0===v||v({cardIndex:null,buttonIndex:null})},I=e=>{try{return new URL(e),!0}catch(a){return!1}},E=[{value:"URL",label:"Abrir Link",icon:(0,d.jsx)(u.ayE,{size:20}),description:"Leva o usu\xe1rio para um site externo."},{value:"QUICK_REPLY",label:"Resposta R\xe1pida",icon:(0,d.jsx)(u.mEP,{size:20}),description:"Envia uma mensagem pronta ao clicar."},{value:"PHONE_NUMBER",label:"Liga\xe7\xe3o",icon:(0,d.jsx)(u.QFc,{size:20}),description:"Inicia uma chamada telef\xf4nica instantaneamente."}];return(0,d.jsxs)("div",{className:`${ae} ${m?te:""}`,children:[N&&0===t&&_>1&&(0,d.jsxs)("div",{className:ve,children:[(0,d.jsx)(u.S8s,{size:16}),(0,d.jsx)("span",{children:"O WhatsApp exige que todos os cards tenham os mesmos bot\xf5es na mesma posi\xe7\xe3o. Se alterar este bot\xe3o, todas as outras vers\xf5es ser\xe3o ajustadas automaticamente."})]}),(0,d.jsx)("div",{className:se,children:E.map((e=>(0,d.jsxs)("div",{className:`\n              ${re} \n              ${o.type===e.value?oe:""} \n              ${w&&e.value!==o.type?ge:""}\n            `,onClick:()=>{return a=e.value,void(w&&!window.confirm("Alterar o tipo deste bot\xe3o ir\xe1 sincronizar todos os bot\xf5es nesta posi\xe7\xe3o em todos os cards. Deseja continuar?")||(0===t&&_>1&&!N&&(T(!0),setTimeout((()=>T(!1)),5e3)),_>1?(n(r,"type",a),g&&g(r,a)):n(r,"type",a)));var a},children:[(0,d.jsxs)("div",{className:ne,children:[e.icon,w&&t>0&&(0,d.jsx)("div",{className:_e,children:(0,d.jsx)(u.F5$,{size:12})})]}),(0,d.jsx)("span",{className:ie,children:e.label})]},e.value)))}),p&&(0,d.jsx)("div",{className:le,children:null===(a=E.find((e=>e.value===o.type)))||void 0===a?void 0:a.description}),w&&t>0&&p&&(0,d.jsxs)("div",{className:xe,children:[(0,d.jsx)(u.S8s,{size:14}),(0,d.jsx)("span",{children:"O tipo deste bot\xe3o segue a configura\xe7\xe3o do primeiro card, conforme as regras do WhatsApp."})]}),(0,d.jsx)(B,{id:"buttonText",name:"ButtonText",label:"Texto do Bot\xe3o",value:o.text||"",onChange:e=>n(r,"text",e.target.value),placeholder:"Exemplos: Saiba mais, Comprar agora, etc.",required:!0,minLength:1,maxLength:25,error:!1,hintMessage:p?"Texto exibido no bot\xe3o. M\xe1ximo de 25 caracteres.":"",allowFormatting:!1,textFormatting:!1,textFormattingCompact:!1,textFormattingDarkMode:!1,showCharCounter:!0,hintIsCompact:!0,onFocus:S,onBlur:y}),"URL"===o.type&&(0,d.jsx)(B,{id:`button-${r}-url`,name:`button-${r}-url`,type:"url",label:"Link de Destino",value:o.url||"",onChange:e=>n(r,"url",e.target.value),placeholder:"https://example.com/page",required:!0,error:o.url&&!I(o.url)?"URL inv\xe1lida. Certifique-se de incluir 'https://' ou 'http://'":"",variant:"url",validateOnChange:!0,onFocus:S,onBlur:y,rightElement:o.url&&(0,d.jsx)(i.A,{type:"button",className:de,onClick:()=>{o.url&&I(o.url)&&(window.open(o.url,"_blank","noopener,noreferrer"),f(!0),setTimeout((()=>f(!1)),3e3))},disabled:!I(o.url),title:I(o.url)?"Testar este URL":"Formato de URL inv\xe1lido",children:x?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.A3x,{size:14}),(0,d.jsx)("span",{children:"Aberto"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.HaR,{size:14}),(0,d.jsx)("span",{children:"Testar"})]})}),icon:o.url&&!I(o.url)?(0,d.jsx)(u.y3G,{size:14}):null,hintMessage:p,hintTitle:"Como criar um bom link:",hintList:["Sempre use HTTPS quando poss\xedvel (mais seguro)","A URL completa deve incluir 'https://' no in\xedcio","Evite encurtadores de URL n\xe3o confi\xe1veis","Teste o link antes de salvar",(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)("strong",{children:"Exemplos v\xe1lidos:"}),(0,d.jsx)("br",{}),(0,d.jsx)("code",{children:"https://www.example.com"}),(0,d.jsx)("br",{}),(0,d.jsx)("code",{children:"https://example.com/product?id=123"})]})],hintVariant:"simple",hintIsCompact:!0}),"QUICK_REPLY"===o.type&&(0,d.jsx)("div",{className:ce,children:(0,d.jsx)(B,{type:"text",name:"OptinalPayload",label:"Payload",hintMessage:"O payload \xe9 o texto que ser\xe1 enviado ao seu sistema quando o usu\xe1rio clicar no bot\xe3o.",hintVariant:"simple",value:o.payload||"",onChange:e=>n(r,"payload",e.target.value),placeholder:"Deixe vazio para usar o texto do bot\xe3o como payload",hintIsCompact:!0,onFocus:S,onBlur:y})}),"PHONE_NUMBER"===o.type&&(0,d.jsx)(B,{id:`button-${r}-phone`,name:`button-${r}-phone`,type:"tel",label:"N\xfamero de Telefone",value:o.phoneNumber||"",onChange:e=>{n(r,"phoneNumber",e.target.value)},placeholder:"5521999999999",required:!0,variant:"phoneNumber",validateOnChange:!0,onFocus:S,onBlur:y,rightElement:o.phoneNumber&&(0,d.jsx)(i.A,{type:"button",className:de,onClick:()=>{o.phoneNumber&&(window.location.href=`tel:${o.phoneNumber}`,j(!0),setTimeout((()=>j(!1)),3e3))},title:"Testar este n\xfamero",size:"small",variant:"outline",children:C?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.A3x,{size:14}),(0,d.jsx)("span",{children:"Testado"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.QFc,{size:14}),(0,d.jsx)("span",{children:"Testar"})]})}),hintMessage:p,hintTitle:"Formato do n\xfamero de telefone:",hintList:["Inclua o c\xf3digo do pa\xeds (Brasil: 55)","Inclua o c\xf3digo de \xe1rea sem o zero","N\xe3o use espa\xe7os, par\xeanteses ou h\xedfens"],hintVariant:"simple",hintIsCompact:!0}),c>1&&(0,d.jsx)("div",{className:pe,children:(0,d.jsx)("button",{type:"button",className:ue,onClick:()=>{_>1&&!window.confirm("Remover este bot\xe3o ir\xe1 remover o bot\xe3o correspondente em todos os cards. Deseja continuar?")||l(r)},children:_>1?"Remover Bot\xe3o em Todos os Cards":"Remover Bot\xe3o"})}),m&&(0,d.jsxs)("div",{className:me,children:[(0,d.jsx)(u.y3G,{className:he}),m]})]})},Ce="CardTemplateEditor_cardContainer__SsVV1",je="CardTemplateEditor_invalidCard__io5EL",we="CardTemplateEditor_collapsedCard__vNJrB",be="CardTemplateEditor_cardHeader__khEpo",Ne="CardTemplateEditor_cardTitleSection__M+BSm",Te="CardTemplateEditor_cardTitle__edRyr",Se="CardTemplateEditor_cardIndicator__tVq1B",ye="CardTemplateEditor_cardActions__p7fpm",Ie="CardTemplateEditor_validationBadge__-mJR1",Ee="CardTemplateEditor_expandButton__f7r5f",ke="CardTemplateEditor_expanded__6ZmfP",Fe="CardTemplateEditor_fileHandleInfo__sq7oe",Pe="CardTemplateEditor_fileHandleLabel__GLter",Le="CardTemplateEditor_fileHandleWrapper__Uou4L",$e="CardTemplateEditor_fileHandleValue__cce5q",Be="CardTemplateEditor_copyButton__QltsO",ze="CardTemplateEditor_copyIcon__fy6pQ",Ue="CardTemplateEditor_tooltipText__7go9z",Ae="CardTemplateEditor_previewButton__mrrQT",Oe="CardTemplateEditor_validationMessage__FvDR4",Me="CardTemplateEditor_warningIcon__Tpiyh",Re="CardTemplateEditor_imagePreviewContainer__8NFQ6",De="CardTemplateEditor_imagePreview__LowFd",He="CardTemplateEditor_closePreviewButton__sIw0e",Ge="CardTemplateEditor_cardContent__vhPrg",We="CardTemplateEditor_editorTabs__PLmHZ",Ve="CardTemplateEditor_editorTab__Q13wr",qe="CardTemplateEditor_activeTab__6pn4l",Je="CardTemplateEditor_buttonCount__vfdzR",Ke="CardTemplateEditor_cardFieldSection__6AO4+",Ze="CardTemplateEditor_invalidInput__kG17K",Xe="CardTemplateEditor_changedField__CekUx",Qe="CardTemplateEditor_buttonsSection__kM9K1",Ye="CardTemplateEditor_buttonsList__rzoL3",ea="CardTemplateEditor_buttonItem__Hu4rM",aa="CardTemplateEditor_noButtonsMessage__rkrG5",ta="CardTemplateEditor_addButton__-0MII",sa="CardTemplateEditor_collapsedPreview__nkhdV",ra="CardTemplateEditor_collapsedField__jMcL1",oa="CardTemplateEditor_collapsedLabel__VaN3O",na="CardTemplateEditor_collapsedValue__1vaS6",ia="CardTemplateEditor_emptyText__3QQlO",la="CardTemplateEditor_collapsedValidation__bo9LS",ca="CardTemplateEditor_validationIcon__7DFfo",da="CardTemplateEditor_validationText__npd+k",pa=e=>{let{id:a,index:t,card:r,cards:n,updateCard:i,showHints:l=!0,validationMessage:c,numCards:p=2,setFocusedInput:m,focusedInput:h}=e;const _=(0,o.MW)(),[g,v]=(0,s.useState)(!0),[x,f]=(0,s.useState)(!1),[C,j]=(0,s.useState)(!1),[w,b]=(0,s.useState)("text"),[N,T]=(0,s.useState)([]),S=(0,s.useRef)(null);(0,s.useEffect)((()=>{if(N.length>0){const e=setTimeout((()=>{T([])}),3e3);return()=>clearTimeout(e)}}),[N]);const y=!!r.bodyText,I=(0,s.useCallback)((e=>{i(t,"bodyText",e.target.value),N.includes("bodyText")||T((e=>[...e,"bodyText"]))}),[i,t,N]),E=(0,s.useCallback)((e=>{i(t,"buttons",e),N.includes("buttons")||T((e=>[...e,"buttons"]))}),[i,t,N]),k=(0,s.useCallback)(((e,a)=>{if(0===t&&p>1)for(let t=1;t<p;t++){const s=n[t];if(s.buttons.length>e){const r=[...s.buttons],o=r[e];r[e]={...o,type:a,..."URL"!==a||o.url?{}:{url:""},..."PHONE_NUMBER"!==a||o.phoneNumber?{}:{phoneNumber:""},..."QUICK_REPLY"!==a||o.payload?{}:{payload:""}},i(t,"buttons",r)}}}),[t,n,p,i]),F=(0,s.useCallback)((()=>{if(r.buttons.length<2){var e;const a=(null===(e=r.buttons[0])||void 0===e?void 0:e.type)||"QUICK_REPLY",s=[...r.buttons,{type:a,text:""}];if(E(s),0===t&&p>1){for(let e=1;e<p;e++){const t=[...n[e].buttons];t.push({type:a,text:""}),i(e,"buttons",t)}_.info("Bot\xe3o adicionado em todos os cards para manter a consist\xeancia exigida pelo WhatsApp.",{position:"bottom-right",autoCloseTime:4e3})}else if(t>0){_.warning("Para manter a consist\xeancia do WhatsApp, adicionaremos este bot\xe3o em todos os cards.",{position:"top-center"});for(let e=0;e<p;e++)if(e!==t){const t=[...n[e].buttons];t.push({type:a,text:""}),i(e,"buttons",t)}}}else _.warning("O WhatsApp permite no m\xe1ximo 2 bot\xf5es por card.",{position:"top-center"})}),[r.buttons,E,n,i,t,p,_]),P=(0,s.useCallback)((e=>{const a=r.buttons.filter(((a,t)=>t!==e));if(E(a),p>1){_.warning("O bot\xe3o ser\xe1 removido de todos os cards para manter a consist\xeancia exigida pelo WhatsApp.",{position:"top-center",autoCloseTime:3e3});for(let a=0;a<p;a++)if(a!==t){const t=n[a].buttons.filter(((a,t)=>t!==e));i(a,"buttons",t)}}}),[r.buttons,E,n,i,t,p,_]),$=(0,s.useCallback)(((e,a,s)=>{const o=[...r.buttons];o[e]={...o[e],[a]:s},E(o),"type"===a&&0===t&&p>1&&(k(e,s),_.info(`Tipo de bot\xe3o sincronizado em todos os cards: ${s}`,{position:"bottom-right",autoCloseTime:3e3}))}),[r.buttons,E,k,t,p,_]),z=(0,s.useCallback)((()=>{const e=["var(--blip-action)","var(--mountain-meadow)","var(--marigold-yellow)","var(--chilean-fire)","var(--windsor)","var(--extended-ocean-light)","var(--extended-ocean-dark)","var(--extended-blue-light)","var(--extended-blue-dark)","var(--extended-green-light)","var(--extended-green-dark)","var(--extended-yellow-light)","var(--extended-yellow-dark)","var(--extended-orange-light)","var(--extended-orange-dark)","var(--extended-red-light)","var(--extended-red-dark)","var(--extended-pink-light)","var(--extended-pink-dark)","var(--extended-gray-light)","rgba(30, 107, 241, 1)","rgba(1, 114, 62, 1)","rgba(138, 0, 0, 1)","rgba(30, 107, 241, 1)","rgba(41, 41, 41, 1)","rgba(0, 122, 66, 1)","rgba(138, 0, 0, 1)","rgba(230, 15, 15, 1)","#C5D9FB","#0096fa","#1968F0","#0C4EC0","#072F73","rgba(0, 150, 250, 1)"];return e[t%e.length]}),[t]),U=(0,s.useCallback)((()=>{r.fileHandle?navigator.clipboard.writeText(r.fileHandle).then((()=>{j(!0),_.success("ID do arquivo copiado para a \xe1rea de transfer\xeancia!",{position:"bottom-right",autoCloseTime:2e3}),setTimeout((()=>j(!1)),2e3)})).catch((e=>{console.error("Error copying:",e),_.error("N\xe3o foi poss\xedvel copiar o ID do arquivo",{position:"bottom-right"})})):_.warning("Este card n\xe3o possui ID de arquivo para copiar",{position:"bottom-right"})}),[r.fileHandle,_]);return(0,d.jsxs)("div",{id:a,className:`${Ce} ${c?je:""} ${g?"":we}`,style:{borderLeftColor:z()},children:[(0,d.jsxs)("div",{className:be,children:[(0,d.jsxs)("div",{className:Ne,children:[(0,d.jsxs)("h3",{className:Te,children:["Card ",t+1,(0,d.jsx)("span",{className:Se,style:{backgroundColor:z()}})]}),r.fileHandle&&(0,d.jsxs)("div",{className:Fe,children:[(0,d.jsx)("span",{className:Pe,children:"File ID:"}),(0,d.jsxs)("div",{className:Le,children:[(0,d.jsx)("span",{className:$e,children:r.fileHandle}),(0,d.jsx)("button",{className:Be,onClick:U,title:"Copy file ID","aria-label":"Copy file ID",children:C?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(u.YrT,{className:ze}),(0,d.jsx)("span",{className:Ue,children:"Copied!"})]}):(0,d.jsx)(u.ayE,{className:ze})})]}),"image"===r.fileType&&(0,d.jsxs)("button",{className:Ae,onClick:()=>f(!x),children:[x?(0,d.jsx)(u._NO,{size:14}):(0,d.jsx)(u.Vap,{size:14}),x?"Esconder imagem":"Mostrar imagem"]})]})]}),(0,d.jsxs)("div",{className:ye,children:[c&&(0,d.jsx)("div",{className:Ie,title:c,children:(0,d.jsx)(u.y3G,{size:16})}),(0,d.jsx)("button",{className:`${Ee} ${g?ke:""}`,onClick:()=>v(!g),"aria-label":g?"Minimizar":"Expandir",children:g?(0,d.jsx)(u.eDi,{size:18}):(0,d.jsx)(u.mkN,{size:18})})]})]}),c&&(0,d.jsxs)("div",{className:Oe,children:[(0,d.jsx)(u.y3G,{className:Me}),c]}),x&&r.fileUrl&&"image"===r.fileType&&(0,d.jsxs)("div",{className:Re,children:[(0,d.jsx)("img",{src:r.fileUrl,alt:`Preview of card ${t+1}`,className:De}),(0,d.jsx)("button",{className:He,onClick:()=>f(!1),"aria-label":"Close preview",children:"\u2715"})]}),g?(0,d.jsxs)("div",{className:Ge,children:[(0,d.jsxs)("div",{className:We,children:[(0,d.jsxs)("button",{className:`${Ve} ${"text"===w?qe:""}`,onClick:()=>b("text"),children:[(0,d.jsx)(u.mEP,{size:16}),"Card Text"]}),(0,d.jsxs)("button",{className:`${Ve} ${"buttons"===w?qe:""}`,onClick:()=>b("buttons"),children:[(0,d.jsx)(u.ayE,{size:16}),"Buttons",(0,d.jsxs)("span",{className:Je,children:["(",r.buttons.length,"/2)"]})]})]}),"text"===w&&(0,d.jsx)("div",{className:Ke,children:(0,d.jsx)(B,{id:`card-${t}-text`,name:"cardText",label:"Texto do card",ref:S,type:"textarea",className:`\n          ${y||""===r.bodyText?"":Ze} \n          ${N.includes("bodyText")?Xe:""}\n        `,rows:4,value:r.bodyText||"",onChange:I,placeholder:"Descreva o produto ou servi\xe7o de forma clara e objetiva.",maxLength:160,allowFormatting:!0,textFormatting:!0,textFormattingCompact:!0,textFormattingDarkMode:!1,showCharCounter:!0,characterCounterVariant:"default",required:!0,hintMessage:l,hintVariant:"simple",hintTitle:"Dicas para um bom texto:",hintList:["Mantenha entre 60-120 caracteres para melhor legibilidade.","Foque nos principais benef\xedcios ou diferenciais.","Evite repetir informa\xe7\xf5es que j\xe1 est\xe3o na imagem.","Use frases diretas e insira chamadas para a\xe7\xe3o.","Use formata\xe7\xe3o para destaque: *negrito*, _it\xe1lico_, ~tachado~, `c\xf3digo`.","Para listas: * para t\xf3picos, 1. para numera\xe7\xe3o.","Para cita\xe7\xf5es, comece a linha com >."],validateOnChange:!0,validateOnBlur:!0,error:y||""===r.bodyText?"":"O texto n\xe3o atende aos requisitos m\xednimos."})}),"buttons"===w&&(0,d.jsxs)("div",{className:Qe,children:[0===t&&p>1&&(0,d.jsx)(L,{variant:"whatsapp",isCompact:!0,title:"Melhores Pr\xe1ticas para Bot\xf5es:",list:[(0,d.jsx)("strong",{children:'"Requisito do WhatsApp:"'}),"Todos os cards devem ter o mesmo n\xfamero e tipos de bot\xf5es.","As altera\xe7\xf5es feitas no Card 1 ser\xe3o sincronizadas automaticamente com os outros cards."]}),r.buttons.length>0?(0,d.jsx)("div",{className:Ye,children:r.buttons.map(((e,a)=>(0,d.jsx)("div",{className:`\n                ${ea} \n                ${N.includes("buttons")?Xe:""}\n              `,children:(0,d.jsx)(fe,{index:t,buttonIndex:a,button:e,updateButtonField:$,removeButton:()=>P(a),totalButtons:r.buttons.length,showHints:l,cards:n,numCards:p,syncButtonTypes:k,setFocusedInput:m},a)},a)))}):(0,d.jsxs)("div",{className:aa,children:[(0,d.jsx)(u.y3G,{size:18}),"Nenhum bot\xe3o adicionado. Cada card deve ter pelo menos um bot\xe3o."]}),r.buttons.length<2&&(0,d.jsxs)("button",{onClick:F,className:ta,children:[(0,d.jsx)(u.GGD,{size:16}),p>1?"Adicionar Bot\xe3o a Todos os Cards":"Adicionar Bot\xe3o"]}),l&&(0,d.jsx)(L,{variant:"simple",title:"Melhores Pr\xe1ticas para Bot\xf5es:",list:["Use um texto claro e orientado para a\xe7\xe3o (ex.: 'Compre Agora', 'Saiba Mais')","Mantenha o texto do bot\xe3o com menos de 20 caracteres","Cada card pode ter at\xe9 2 bot\xf5es","Para URLs, sempre inclua o prefixo https://","Para n\xfameros de telefone, use o formato internacional (+XXXXXXXXXXX)","Requisito do WhatsApp: Todos os cards devem ter os mesmos tipos de bot\xf5es na mesma ordem"]})]})]}):(0,d.jsxs)("div",{className:sa,children:[(0,d.jsxs)("div",{className:ra,children:[(0,d.jsx)("span",{className:oa,children:"Texto:"}),(0,d.jsx)("span",{className:na,children:r.bodyText?r.bodyText.length>40?r.bodyText.substring(0,40)+"...":r.bodyText:(0,d.jsx)("em",{className:ia,children:"Not defined"})})]}),(0,d.jsxs)("div",{className:ra,children:[(0,d.jsx)("span",{className:oa,children:"Buttons:"}),(0,d.jsx)("span",{className:na,children:r.buttons.length>0?r.buttons.map((e=>e.text||"No text")).join(", "):(0,d.jsx)("em",{className:ia,children:"No buttons"})})]}),c&&(0,d.jsxs)("div",{className:la,children:[(0,d.jsx)(u.y3G,{size:14,className:ca}),(0,d.jsx)("span",{className:da,children:c})]})]})]})},ua={phoneMockup:"CarouselPreview_phoneMockup__ltRlE",phoneStatusBar:"CarouselPreview_phoneStatusBar__kT+QK",phoneIcons:"CarouselPreview_phoneIcons__DbLMQ",whatsappHeader:"CarouselPreview_whatsappHeader__XosO6",backButton:"CarouselPreview_backButton__Q+48x",moreButton:"CarouselPreview_moreButton__NEh4r",contactInfo:"CarouselPreview_contactInfo__ndm54",contactAvatar:"CarouselPreview_contactAvatar__Xsl9I",contactName:"CarouselPreview_contactName__Jd7Cv",chatWindow:"CarouselPreview_chatWindow__Y4ugR",messageBodyText:"CarouselPreview_messageBodyText__-dcYJ",cardBody:"CarouselPreview_cardBody__hGJMu","multiline-code":"CarouselPreview_multiline-code__G2YWE","inline-code":"CarouselPreview_inline-code__M74vC",blockquote:"CarouselPreview_blockquote__7kjNi","list-item":"CarouselPreview_list-item__fRmUI",bullet:"CarouselPreview_bullet__t9oKr",number:"CarouselPreview_number__xy7i9",variable:"CarouselPreview_variable__6t+7A",carouselContainer:"CarouselPreview_carouselContainer__wp+3B",navButton:"CarouselPreview_navButton__c4-kB",prevButton:"CarouselPreview_prevButton__i2eMw",nextButton:"CarouselPreview_nextButton__Vx3kS",cardsContainer:"CarouselPreview_cardsContainer__eAYFs",grab:"CarouselPreview_grab__Oe5l+",grabbing:"CarouselPreview_grabbing__aKI2B",cardsWrapper:"CarouselPreview_cardsWrapper__+H0HF",card:"CarouselPreview_card__1Cc3F",cardHeader:"CarouselPreview_cardHeader__Le5kS",cardImage:"CarouselPreview_cardImage__V7k0J",cardVideo:"CarouselPreview_cardVideo__3eeIA",videoContainer:"CarouselPreview_videoContainer__YevPu",playButton:"CarouselPreview_playButton__FaYxa",placeholderImage:"CarouselPreview_placeholderImage__En3ai",placeholderText:"CarouselPreview_placeholderText__HT0yh",cardButtons:"CarouselPreview_cardButtons__pPd++",cardButton:"CarouselPreview_cardButton__HGTsO",buttonIcon:"CarouselPreview_buttonIcon__PW1mL",separator:"CarouselPreview_separator__YgAnC",dots:"CarouselPreview_dots__vXsd2",dot:"CarouselPreview_dot__rrAv7",activeDot:"CarouselPreview_activeDot__uzKMV",activeCard:"CarouselPreview_activeCard__+S79E",fadeIn:"CarouselPreview_fadeIn__y6O3w",inactiveCard:"CarouselPreview_inactiveCard__55Njv",grabIndicator:"CarouselPreview_grabIndicator__sOn3Z",mockupContainer:"CarouselPreview_mockupContainer__GTjrD","scale-container":"CarouselPreview_scale-container__nrLRg",disabledButton:"CarouselPreview_disabledButton__vStqa",loadingIndicator:"CarouselPreview_loadingIndicator__dHZt-",spin:"CarouselPreview_spin__ZNwac",disableOverlay:"CarouselPreview_disableOverlay__F9VoB",fadeOverlay:"CarouselPreview_fadeOverlay__Y4jsw",disableMessage:"CarouselPreview_disableMessage__hG3qx",disabled:"CarouselPreview_disabled__A6hG5",cardHighlighted:"CarouselPreview_cardHighlighted__cuORo",highlightPulse:"CarouselPreview_highlightPulse__jOmWM",buttonHighlighted:"CarouselPreview_buttonHighlighted__Z8nqc"},ma=25,ha=300,_a=400,ga=e=>{let{type:a}=e;return{QUICK_REPLY:(0,d.jsx)("svg",{viewBox:"0 0 395 395",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{fill:"currentColor",d:"M355.596 369.39C353.405 369.42 351.247 368.866 349.342 367.783C347.437 366.701 345.856 365.13 344.761 363.233C328.362 335.296 304.988 312.098 276.928 295.91C248.869 279.722 217.086 271.099 184.693 270.886V344.764C184.68 347.195 183.949 349.567 182.59 351.583C181.232 353.599 179.307 355.168 177.059 356.092C174.816 357.034 172.345 357.292 169.956 356.832C167.568 356.372 165.369 355.214 163.637 353.506L15.8824 205.751C14.7283 204.606 13.8123 203.244 13.1872 201.744C12.5621 200.243 12.2402 198.634 12.2402 197.009C12.2402 195.383 12.5621 193.774 13.1872 192.273C13.8123 190.773 14.7283 189.411 15.8824 188.266L163.637 40.5113C165.369 38.8028 167.568 37.6454 169.956 37.1852C172.345 36.7251 174.816 36.9827 177.059 37.9256C179.307 38.8493 181.232 40.418 182.59 42.4338C183.949 44.4497 184.68 46.8226 184.693 49.2535V124.485C235.634 131.028 282.458 155.87 316.438 194.382C350.419 232.893 369.237 282.446 369.386 333.805C369.357 342.039 368.823 350.263 367.786 358.431C367.478 360.993 366.374 363.393 364.628 365.293C362.883 367.193 360.585 368.497 358.059 369.02L355.596 369.39ZM178.536 246.26C209.939 245.809 241.066 252.182 269.765 264.937C298.464 277.692 324.052 296.526 344.761 320.138C341.056 275.471 321.558 233.586 289.764 201.995C257.97 170.404 215.961 151.175 171.271 147.757C168.202 147.479 165.347 146.061 163.273 143.781C161.198 141.501 160.054 138.526 160.067 135.444V78.9276L41.9858 197.009L160.067 315.09V258.573C160.067 255.308 161.364 252.176 163.673 249.867C165.982 247.558 169.114 246.26 172.38 246.26H179.029H178.536Z "})}),URL:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:(0,d.jsx)("path",{fill:"currentColor",d:"M5 5v22h22V5zm2 2h18v18H7zm6 3v2h5.563L9.28 21.281l1.438 1.438L20 13.437V19h2v-9z"})}),PHONE_NUMBER:(0,d.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14 14",children:(0,d.jsx)("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M8.76 13a3.19 3.19 0 0 0 4-.44l.45-.44a1.08 1.08 0 0 0 0-1.51L11.3 8.72a1.07 1.07 0 0 0-1.5 0h0a1.08 1.08 0 0 1-1.51 0l-3-3a1.06 1.06 0 0 1 0-1.51h0a1.07 1.07 0 0 0 0-1.5L3.39.81a1.08 1.08 0 0 0-1.51 0l-.44.45a3.19 3.19 0 0 0-.44 4A28.94 28.94 0 0 0 8.76 13Z"})})}[a]||null},va=e=>{if(!e)return"";let a=e.replace(/\{\{(\d+)\}\}/g,((e,a)=>`<span class="${ua.variable}">{{${a}}}</span>`));return a=a.replace(/\*([^*\n]+)\*/g,"<strong>$1</strong>"),a=a.replace(/\_([^_\n]+)\_/g,"<em>$1</em>"),a=a.replace(/\~([^~\n]+)\~/g,"<del>$1</del>"),a=a.replace(/```([^`]+)```/g,'<code class="multiline-code">$1</code>'),a=a.replace(/`([^`\n]+)`/g,'<code class="inline-code">$1</code>'),a=a.replace(/^[*-]\s(.+)$/gm,'<div class="list-item"><span class="bullet">\u2022</span> $1</div>'),a=a.replace(/^(\d+)\.\s(.+)$/gm,'<div class="list-item"><span class="number">$1.</span> $2</div>'),a=a.replace(/^>\s(.+)$/gm,'<span class="blockquote" style="padding: 5px 0 5px 10px; border-left: 3px solid #128C7E; border-radius: 3px; color: #272727; display: block; width: 100%; margin: 5px 0; background-color: rgba(0, 0, 0, 0.04);">$1</span>'),a=a.replace(/&gt;\s(.+)/g,'<span class="blockquote" style="padding: 5px 0 5px 10px; border-left: 3px solid #128C7E; border-radius: 3px; color: #272727; display: block; width: 100%; margin: 5px 0; background-color: rgba(0, 0, 0, 0.04);">$1</span>'),a=a.replace(/\n/g,"<br/>"),a},xa=e=>{let{direction:a,onClick:t,disabled:s=!1}=e;return(0,d.jsx)("button",{className:`${ua.navButton} ${ua[`${a}Button`]} ${s?ua.disabledButton:""}`,onClick:t,disabled:s,"aria-label":("prev"===a?"Anterior":"Pr\xf3ximo")+" card",children:(0,d.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,d.jsx)("path",{d:"prev"===a?"M15 18L9 12L15 6":"M9 18L15 12L9 6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})},fa=(0,s.forwardRef)(((e,a)=>{let{cards:t=[],bodyText:r="Exemplo de Body Text",contactName:o="Blip CDA",disableInteraction:n=!1,focusedInput:i}=e;const[l,c]=(0,s.useState)(0),p=(0,s.useRef)(null),[m,h]=(0,s.useState)(!1),[_,g]=(0,s.useState)(0),[v,x]=(0,s.useState)(0),[f,C]=(0,s.useState)(0),[j,w]=(0,s.useState)(0),[b,N]=(0,s.useState)(!1),T=(0,s.useRef)(null),S=(0,s.useRef)(0),y=(0,s.useRef)(0),I=(0,s.useRef)({});(0,s.useEffect)((()=>{i&&null!==i.cardIndex&&(c(i.cardIndex),E(i.cardIndex))}),[i]),(0,s.useImperativeHandle)(a,(()=>({goToNextCard:()=>{b||F()},goToPrevCard:()=>{b||k()},goToCard:e=>{b||e>=0&&e<t.length&&(c(e),E(e))},getCards:()=>t,getCurrentIndex:()=>l,getTotalCards:()=>t.length,isTransitioning:()=>b})));const E=function(e){const a=-91.45*e;(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(N(!0),T.current&&clearTimeout(T.current),T.current=setTimeout((()=>{N(!1)}),_a)),x(a),C(a),w(0)},k=()=>{b||c((e=>{const a=0===e?t.length-1:e-1;return E(a),a}))},F=()=>{b||c((e=>{const a=e===t.length-1?0:e+1;return E(a),a}))},P=e=>{if(!t[e]||I.current[e])return;const a=t[e];if(a.fileUrl){if("image"===a.fileType){const t=new Image;t.onload=()=>{I.current[e]=!0},t.onerror=()=>{I.current[e]=!0},t.src=a.fileUrl}else if("video"===a.fileType){const t=document.createElement("video");t.preload="metadata",t.onloadedmetadata=()=>{I.current[e]=!0},t.onerror=()=>{I.current[e]=!0},t.src=a.fileUrl}}else I.current[e]=!0};(0,s.useEffect)((()=>{if(0===t.length)return;P(l);const e=l===t.length-1?0:l+1;P(e);const a=0===l?t.length-1:l-1;P(a)}),[l,t]);const L=e=>{if(n)return;if("touchstart"===e.type){Date.now()-y.current<300&&e.preventDefault()}if(b)return;const a=e.type.includes("mouse")?e.pageX:e.touches[0].clientX;h(!0),g(a),S.current=Date.now()},$=e=>{if(n)return;if(!m)return;e.preventDefault();const a=e.type.includes("mouse")?e.pageX:e.touches[0].clientX,t=p.current?p.current.offsetWidth:1,s=(a-_)/t*100,r=Math.max(Math.min(s,100),-100);w(r),x(f+r)},B=()=>{if(n)return;if(!m)return;h(!1),window.event&&!window.event.type.includes("mouse")&&(y.current=Date.now());const e=Date.now()-S.current;let a=15;Math.abs(j)/(e||1)>.5&&(a=5);let s=l;j>a?s=Math.max(0,l-1):j<-a&&(s=Math.min(t.length-1,l+1)),s!==l?(c(s),E(s,!0)):E(l,!0)};(0,s.useEffect)((()=>{const e=p.current;if(!e)return;const a=e=>{try{L(e)}catch(a){console.error("Erro em touchstart:",a)}},t=e=>{try{$(e)}catch(a){console.error("Erro em touchmove:",a)}},s=e=>{try{B()}catch(a){console.error("Erro em touchend:",a)}};return e.addEventListener("touchstart",a,{passive:!0}),e.addEventListener("touchmove",t,{passive:!1}),e.addEventListener("touchend",s),e.addEventListener("mousedown",L),window.addEventListener("mousemove",$),window.addEventListener("mouseup",B),()=>{e.removeEventListener("touchstart",a),e.removeEventListener("touchmove",t),e.removeEventListener("touchend",s),e.removeEventListener("mousedown",L),window.removeEventListener("mousemove",$),window.removeEventListener("mouseup",B)}}),[m,_,f,l,j,b,n]),(0,s.useEffect)((()=>{t.length>0&&E(l,!1)}),[t.length]);const z=(0,s.useMemo)((()=>(0,d.jsx)("div",{className:ua.dots,children:t.map(((e,a)=>(0,d.jsx)("div",{className:`${ua.dot} ${a===l?ua.activeDot:""}`,onClick:()=>{n||b||(c(a),E(a))},style:{cursor:n?"not-allowed":"pointer"}},a)))})),[t,l,b,n]),U=t.length>0;return(0,d.jsxs)("div",{className:ua.phoneMockup,children:[(0,d.jsxs)("div",{className:ua.phoneHeader,children:[(0,d.jsxs)("div",{className:ua.phoneStatusBar,children:[(0,d.jsx)("span",{children:"9:41"}),(0,d.jsxs)("div",{className:ua.phoneIcons,children:[(0,d.jsx)("span",{children:"4G"}),(0,d.jsx)("span",{children:"\ud83d\udcf6"}),(0,d.jsx)("span",{children:"\ud83d\udd0b"})]})]}),(0,d.jsxs)("div",{className:ua.whatsappHeader,children:[(0,d.jsx)("div",{className:ua.backButton,children:(0,d.jsx)(u.irw,{})}),(0,d.jsxs)("div",{className:ua.contactInfo,children:[(0,d.jsx)("div",{className:ua.contactAvatar}),(0,d.jsx)("div",{className:ua.contactName,children:o})]}),(0,d.jsx)("div",{className:ua.moreButton,children:(0,d.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("path",{d:"M12 13C12.5523 13 13 12.5523 13 12C13 11.4477 12.5523 11 12 11C11.4477 11 11 11.4477 11 12C11 12.5523 11.4477 13 12 13Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M19 13C19.5523 13 20 12.5523 20 12C20 11.4477 19.5523 11 19 11C18.4477 11 18 11.4477 18 12C18 12.5523 18.4477 13 19 13Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,d.jsx)("path",{d:"M5 13C5.55228 13 6 12.5523 6 12C6 11.4477 5.55228 11 5 11C4.44772 11 4 11.4477 4 12C4 12.5523 4.44772 13 5 13Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),(0,d.jsxs)("div",{className:ua.chatWindow,children:[r&&(0,d.jsx)("div",{className:ua.messageBodyText,dangerouslySetInnerHTML:{__html:va(r)}}),U&&(0,d.jsxs)("div",{className:ua.carouselContainer,children:[(0,d.jsx)(xa,{direction:"prev",onClick:n?null:k,disabled:b||n}),(0,d.jsxs)("div",{className:ua.cardsContainer,children:[n&&(0,d.jsx)("div",{className:ua.disableOverlay}),(0,d.jsx)("div",{ref:p,className:`${ua.cardsWrapper} ${m?ua.grabbing:ua.grab} ${n?ua.disabled:""}`,style:{transform:`translateX(${v}%)`,transition:m?"none":`transform ${ha}ms cubic-bezier(0.25, 0.1, 0.25, 1)`,pointerEvents:n?"none":"auto"},children:t.map(((e,a)=>(0,d.jsxs)("div",{className:`${ua.card} ${i&&a===i.cardIndex?ua.cardHighlighted:""} ${a===l?ua.activeCard:ua.inactiveCard}`,children:[(0,d.jsx)("div",{className:ua.cardHeader,children:e.fileUrl?"image"===e.fileType?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("img",{src:e.fileUrl,alt:`Card ${a+1}`,className:ua.cardImage,onLoad:()=>{I.current[a]=!0},onError:t=>{console.log(`Erro ao carregar imagem: ${e.fileUrl}`),t.target.style.display="none",I.current[a]=!0;const s=t.target.parentNode.querySelector(`.${ua.placeholderImage}`)||document.createElement("div");s.className=ua.placeholderImage,s.innerHTML='\n                                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n                                    <rect x="3" y="3" width="18" height="18" rx="2" stroke="currentColor" strokeWidth="2"/>\n                                    <circle cx="8.5" cy="8.5" r="1.5" fill="currentColor"/>\n                                    <path d="M21 15L16 10L5 21" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"/>\n                                  </svg>\n                                  <div>Imagem n\xe3o dispon\xedvel</div>\n                                ',t.target.parentNode.querySelector(`.${ua.placeholderImage}`)||t.target.parentNode.appendChild(s)}}),(0,d.jsx)("div",{className:ua.placeholderImage,style:{display:"none"},children:(0,d.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,d.jsx)("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",stroke:"currentColor",strokeWidth:"2"}),(0,d.jsx)("circle",{cx:"8.5",cy:"8.5",r:"1.5",fill:"currentColor"}),(0,d.jsx)("path",{d:"M21 15L16 10L5 21",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}):(0,d.jsxs)("div",{className:ua.videoContainer,onClick:e=>{if(n)return;const a=e.currentTarget.querySelector("video");if(a)try{a.play().catch((e=>console.error("Erro ao reproduzir v\xeddeo:",e)))}catch(t){console.error("Erro ao iniciar reprodu\xe7\xe3o:",t)}},children:[(0,d.jsx)("video",{src:e.fileUrl,className:ua.cardVideo,controls:!n,autoPlay:!1,muted:!0,loop:!0,playsInline:!0,onLoadedMetadata:()=>{I.current[a]=!0},onError:t=>{console.error(`Erro ao carregar v\xeddeo: ${e.fileUrl}`),I.current[a]=!0,t.target.style.display="none",t.target.parentNode.querySelector(`.${ua.playButton}`).style.display="none",t.target.parentNode.innerHTML+='<div class="videoError">Erro ao carregar v\xeddeo</div>'},onPlay:e=>e.currentTarget.nextSibling.style.display="none",onPause:e=>e.currentTarget.nextSibling.style.display="flex"}),(0,d.jsx)("div",{className:ua.playButton,children:(0,d.jsx)(u.aze,{})})]}):(0,d.jsx)("div",{className:ua.placeholderImage,children:(0,d.jsx)(u.fZZ,{})})}),(0,d.jsx)("div",{className:ua.cardBody,children:e.bodyText?(0,d.jsx)("div",{dangerouslySetInnerHTML:{__html:va(e.bodyText)}}):(0,d.jsx)("p",{className:ua.placeholderText,children:"Texto do card"})}),e.buttons&&e.buttons.length>0&&(0,d.jsxs)("div",{className:ua.cardButtons,children:[(0,d.jsx)("div",{className:ua.separator}),e.buttons.map(((e,a)=>{return(0,d.jsxs)(s.Fragment,{children:[a>0&&(0,d.jsx)("div",{className:ua.separator}),(0,d.jsxs)("button",{className:ua.cardButton,onClick:()=>{n||console.log(`Bot\xe3o ${a+1} clicado`,e)},disabled:n,style:{cursor:n?"not-allowed":"pointer",opacity:1},children:[e.type&&(0,d.jsx)("span",{className:ua.buttonIcon,children:(0,d.jsx)(ga,{type:e.type})}),(t=e.text||`Bot\xe3o ${a+1}`,r=ma,t?t.length>r?`${t.slice(0,r)}...`:t:"")]})]},a);var t,r}))]})]},a)))})]}),(0,d.jsx)(xa,{direction:"next",onClick:n?null:F,disabled:b||n})]}),z]})]})}));fa.displayName="CarouselPreview";const Ca=fa,ja={viewControls:"StepTwo_viewControls__Cz0WB",viewToggle:"StepTwo_viewToggle__qHppH",hintsToggle:"StepTwo_hintsToggle__BlGoc",active:"StepTwo_active__7no51",contentWrapper:"StepTwo_contentWrapper__eiquz",formContainer:"StepTwo_formContainer__sITQ-",withPreview:"StepTwo_withPreview__VfXYz",basicDetailsSection:"StepTwo_basicDetailsSection__IU8d1",cardEditorSection:"StepTwo_cardEditorSection__neMVb",formGroup:"StepTwo_formGroup__LdQEh",customSelect:"StepTwo_customSelect__0Z2sa",cardNavigation:"StepTwo_cardNavigation__M2kvO",cardTabs:"StepTwo_cardTabs__Nk2Km",cardTab:"StepTwo_cardTab__dQDPf",activeCardTab:"StepTwo_activeCardTab__uSOpX",incompleteIndicator:"StepTwo_incompleteIndicator__rq9uf",activeCardEditor:"StepTwo_activeCardEditor__L33zV",previewContainer:"StepTwo_previewContainer__ceWxr",previewWrapper:"StepTwo_previewWrapper__4E-7B",previewTitle:"StepTwo_previewTitle__RsI4S",previewSubtitle:"StepTwo_previewSubtitle__lgkXN",previewContent:"StepTwo_previewContent__PY7T8",whatsappRequirement:"StepTwo_whatsappRequirement__+8N9S",infoIcon:"StepTwo_infoIcon__ThJbj",progressContainer:"StepTwo_progressContainer__ACqA7",progressBarWrapper:"StepTwo_progressBarWrapper__i4K+V",backButton:"StepTwo_backButton__9h8qa",saveButton:"StepTwo_saveButton__A0mQH",nextButton:"StepTwo_nextButton__NHY9s",container:"StepTwo_container__D98P3",fadeIn:"StepTwo_fadeIn__6NMlH"},wa=e=>{let{templateName:a,setTemplateName:t,language:r,setLanguage:n,bodyText:l,setBodyText:c,cards:p,numCards:m,updateCard:h,handleCreateTemplate:_,setStep:g,error:v,loading:x,isStepValid:f,saveCurrentState:C,unsavedChanges:j,lastSavedTime:w,checkButtonConsistency:b,applyButtonStandardization:N}=e;const T=(0,o.MW)(),[S,y]=(0,s.useState)(!0),[I,E]=(0,s.useState)(!0),[k,F]=(0,s.useState)({}),[P,L]=(0,s.useState)(0),[$,z]=(0,s.useState)(!1),[U,A]=(0,s.useState)({isConsistent:!0,message:""}),[O,ee]=(0,s.useState)({cardIndex:null,buttonIndex:null}),[ae,te]=(0,s.useState)(!1),[se,re]=(0,s.useState)([]),[oe,ne]=(0,s.useState)(!1),ie=(0,s.useRef)(null),le=(0,s.useRef)(null);(0,s.useEffect)((()=>{if("function"===typeof b&&m>1){const e=b();A(e)}}),[b,p,m]),(0,s.useEffect)((()=>{a&&F((e=>{const a={...e};return delete a.templateName,a})),l&&F((e=>{const a={...e};return delete a.bodyText,a}))}),[a,l]),(0,s.useEffect)((()=>{v&&T.error(v,{position:"top-center",autoCloseTime:7e3})}),[v,T]);const ce=a&&a.length>=3,de=l&&l.length>0;(0,s.useEffect)((()=>{if(l&&!a){const e=l.toLowerCase().replace(/[^\w\s]/gi,"").split(" ").filter((e=>e.length>3)).slice(0,3);if(e.length>0){const a=[e.join("_").substring(0,20),`carousel_${e[0]}`,`template_${e[0]}`];re(a),ne(!0)}}}),[l,a]);const pe=(0,s.useCallback)((()=>{const e={};let a=!0,t=[];return p.slice(0,m).forEach(((s,r)=>{s.bodyText||(e[`card-${r}`]=`O texto do Card ${r+1} \xe9 obrigat\xf3rio`,t.push(`Card ${r+1}: texto obrigat\xf3rio`),a=!1),s.buttons.some((e=>!e.text))&&(e[`card-${r}-buttons`]=`Todos os bot\xf5es do Card ${r+1} devem ter texto`,t.push(`Card ${r+1}: todos os bot\xf5es precisam de texto`),a=!1),s.buttons.forEach(((s,o)=>{"URL"!==s.type||s.url||(e[`card-${r}-button-${o}`]=`URL \xe9 obrigat\xf3rio para o bot\xe3o ${o+1}`,t.push(`Card ${r+1}, Bot\xe3o ${o+1}: URL obrigat\xf3rio`),a=!1),"PHONE_NUMBER"!==s.type||s.phoneNumber||(e[`card-${r}-button-${o}`]=`N\xfamero de telefone \xe9 obrigat\xf3rio para o bot\xe3o ${o+1}`,t.push(`Card ${r+1}, Bot\xe3o ${o+1}: n\xfamero de telefone obrigat\xf3rio`),a=!1)}))})),F(e),!a&&t.length>0&&T.error(`Problemas de valida\xe7\xe3o encontrados:\n${t.join("\n")}`,{position:"top-center",autoCloseTime:7e3}),a}),[p,m,T]),ue=(0,s.useCallback)((async()=>{if(ce)if(de){if(m>1&&"function"===typeof b){if(!b().isConsistent){if(!window.confirm("Os cards possuem configura\xe7\xf5es diferentes de bot\xf5es, o que n\xe3o \xe9 permitido pelo WhatsApp.\n\nDeseja padronizar os bot\xf5es automaticamente baseado no primeiro card?\n\nClique em OK para padronizar ou Cancelar para revisar manualmente."))return;"function"===typeof N&&(N(),await new Promise((e=>setTimeout(e,500))),T.success("Bot\xf5es padronizados com sucesso!",{position:"bottom-right",autoCloseTime:3e3}))}}if(pe())try{"function"===typeof C&&C(),await _()}catch(e){T.error(`Erro ao criar template: ${e.message||"Falha desconhecida"}`,{position:"top-center",autoCloseTime:7e3})}}else T.warning("A mensagem de introdu\xe7\xe3o \xe9 obrigat\xf3ria",{position:"top-center"});else T.warning("O nome do template deve ter pelo menos 3 caracteres",{position:"top-center"})}),[ce,de,pe,_,T,C,m,b,N]),me=(0,s.useCallback)((()=>{if("function"===typeof C){C()?(z(!0),T.success("Rascunho salvo com sucesso!",{position:"bottom-right",autoCloseTime:3e3}),setTimeout((()=>{z(!1)}),5e3)):T.error("N\xe3o foi poss\xedvel salvar o rascunho. Verifique o armazenamento local.",{position:"top-center",autoCloseTime:5e3})}else console.error("Fun\xe7\xe3o saveCurrentState n\xe3o est\xe1 dispon\xedvel"),T.error("N\xe3o foi poss\xedvel salvar o rascunho. Tente novamente mais tarde.",{position:"top-center"})}),[C,T]),he=(0,s.useCallback)((()=>"function"!==typeof f?!(!ce||!de)&&pe():f(2)),[f,ce,de,pe]),_e=((0,s.useCallback)((e=>{navigator.clipboard.writeText(e).then((()=>{T.info("Texto copiado para a \xe1rea de transfer\xeancia",{position:"bottom-right",autoCloseTime:2e3})})).catch((e=>{console.error("Erro ao copiar texto: ",e),T.error("Falha ao copiar texto",{position:"bottom-right"})}))}),[T]),(0,s.useCallback)((e=>{t(e),ne(!1),T.success("Nome do template aplicado!",{position:"bottom-right",autoCloseTime:2e3})}),[t,T]),(0,s.useCallback)((()=>{var e;(te(!ae),ie.current)&&(ae?null===(e=le.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"}):setTimeout((()=>{ie.current.scrollIntoView({behavior:"smooth",block:"start"})}),100))}),[ae]),25*[ce,de,p.slice(0,m).every((e=>e.bodyText)),p.slice(0,m).every((e=>e.buttons.every((e=>e.text))))].filter(Boolean).length);return(0,d.jsxs)("div",{className:M,children:[(0,d.jsxs)("div",{className:R,children:[(0,d.jsx)("h2",{className:D,children:"Cria\xe7\xe3o de Template"}),(0,d.jsx)("p",{className:H,children:"Configure os detalhes do seu template, adicione os textos iniciais dos cart\xf5es, adicione formata\xe7\xe3o para os textos e veja o preview logo ao lado!"}),(0,d.jsxs)("div",{className:Z,children:[(0,d.jsx)("div",{className:X,children:(0,d.jsx)("div",{className:Q,style:{width:`${_e}%`}})}),(0,d.jsx)("span",{className:Y,children:100===_e?"Pronto para continuar!":`${_e}% completo`})]})]}),(0,d.jsxs)("div",{className:ja.viewControls,children:[(0,d.jsx)(i.A,{className:ja.viewToggle,onClick:()=>E(!I),"aria-label":I?"Ocultar visualiza\xe7\xe3o":"Mostrar visualiza\xe7\xe3o",variant:"text",color:"content",size:"small",iconLeft:I?(0,d.jsx)(u._NO,{size:16}):(0,d.jsx)(u.Vap,{size:16}),children:I?"Ocultar visualiza\xe7\xe3o":"Mostrar visualiza\xe7\xe3o"}),(0,d.jsx)(i.A,{className:ja.hintsToggle,onClick:()=>y(!S),"aria-label":S?"Ocultar dicas":"Mostrar dicas",variant:"text",color:"content",size:"small",iconLeft:(0,d.jsx)(u.S8s,{size:16}),children:S?"Ocultar dicas":"Mostrar dicas"})]}),(0,d.jsxs)("div",{className:`${ja.contentWrapper} ${ae?ja.previewExpanded:""}`,children:[(0,d.jsxs)("div",{className:`${ja.formContainer} ${I?ja.withPreview:""}`,ref:le,children:[(0,d.jsxs)("div",{className:V,children:[(0,d.jsxs)("div",{className:G,children:[(0,d.jsx)("div",{className:W,children:(0,d.jsx)(u.SG1,{size:24})}),(0,d.jsx)("h3",{children:"Informa\xe7\xf5es B\xe1sicas"})]}),(0,d.jsxs)("div",{className:ja.formFields,children:[(0,d.jsx)("div",{className:ja.templateNameWrapper,children:(0,d.jsx)(B,{id:"templateName",name:"templateName",label:"Nome do Template",value:a,onChange:e=>t(e.target.value),placeholder:"Exemplo: meu_carrossel_promocional",required:!0,minLength:3,maxLength:64,error:k.templateName||(a&&!ce?"O nome do template deve ter pelo menos 3 caracteres.":""),hintMessage:S?"Escolha um nome descritivo, sem espa\xe7os.":"",hintVariant:"info",hintList:["Use _ para separar palavras","Exemplo: 'promo_verao' ou 'lancamento_produto'"],size:"medium",fullWidth:!0,clearable:!0,variant:"templateName",allowFormatting:!0,validateOnChange:!0,hintIsCompact:!0})}),(0,d.jsx)(B,{id:"language",name:"language",label:"Idioma do Template",value:r,onChange:e=>n(e.target.value),placeholder:"Escolha um idioma",required:!0,isDropdown:!0,options:[{code:"pt_BR",name:"Portugu\xeas (Brasil)"},{code:"en_US",name:"English (United States)"},{code:"es_ES",name:"Espa\xf1ol (Espa\xf1a)"},{code:"fr_FR",name:"Fran\xe7ais (France)"},{code:"it_IT",name:"Italiano (Italia)"},{code:"de_DE",name:"Deutsch (Deutschland)"},{code:"ja_JP",name:"\u65e5\u672c\u8a9e (\u65e5\u672c)"},{code:"ko_KR",name:"\ud55c\uad6d\uc5b4 (\ub300\ud55c\ubbfc\uad6d)"},{code:"zh_CN",name:"\u4e2d\u6587 (\u4e2d\u56fd)"},{code:"ar_SA",name:"\u0627\u0644\u0639\u0631\u0628\u064a\u0629 (\u0627\u0644\u0645\u0645\u0644\u0643\u0629 \u0627\u0644\u0639\u0631\u0628\u064a\u0629 \u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629)"}],optionLabelKey:"name",optionValueKey:"code",hintMessage:S?"Selecione o idioma principal do seu template. O idioma correto facilita a aprova\xe7\xe3o pelo WhatsApp.":"",hintVariant:"simple",size:"medium",fullWidth:!0,hintIsCompact:!0,searchable:!0}),(0,d.jsx)("div",{className:ja.bodyTextContainer,children:(0,d.jsx)(B,{id:"bodyText",name:"bodyText",type:"textarea",label:"Mensagem de introdu\xe7\xe3o",value:l,onChange:e=>c(e.target.value),placeholder:"Esse texto aparecer\xe1 antes do carrossel. Seja claro e envolvente para seus clientes.",maxLength:1024,rows:3,required:!0,error:k.bodyText||(""===l?"A mensagem de introdu\xe7\xe3o \xe9 obrigat\xf3ria.":""),hintMessage:S?"Escreva de forma objetiva e cativante. Esse texto introduz o carrossel e aparece acima na conversa.":"",textFormatting:!0,hintVariant:"simple",size:"medium",fullWidth:!0,showCharCounter:!0,clearable:!0,hintIsCompact:!0})})]})]}),m>1&&!U.isConsistent&&(0,d.jsxs)("div",{className:ja.buttonInconsistencyWarning,children:[(0,d.jsx)(u.eHT,{size:20}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h4",{children:"Aten\xe7\xe3o! Inconsist\xeancia de bot\xf5es detectada"}),(0,d.jsx)("p",{children:U.message}),"function"===typeof N&&(0,d.jsx)(i.A,{variant:"outline",color:"warning",size:"small",onClick:()=>{N(),T.success("Bot\xf5es padronizados com sucesso!",{position:"bottom-right"})},children:"Padronizar bot\xf5es automaticamente"})]})]}),(0,d.jsxs)("div",{className:V,children:[(0,d.jsxs)("div",{className:G,children:[(0,d.jsx)("div",{className:W,children:(0,d.jsx)(u.SG1,{size:24})}),(0,d.jsx)("h3",{children:"Conte\xfado dos Cards"})]}),(0,d.jsx)("div",{className:ja.cardTabs,children:p.slice(0,m).map(((e,a)=>(0,d.jsxs)(i.A,{className:`${ja.cardTab} ${P===a?ja.activeCardTab:""}`,onClick:()=>L(a),variant:P===a?"solid":"outline",color:P===a?"primary":"content",size:"small",children:["Card ",a+1,!p[a].bodyText&&(0,d.jsx)("span",{className:ja.incompleteIndicator,children:"!"})]},a)))}),(0,d.jsx)("div",{className:ja.activeCardEditor,children:p[P]&&(0,d.jsx)(pa,{id:`card-${P}`,index:P,card:p[P],cards:p,updateCard:h,showHints:S,numCards:m,validationMessage:k[`card-${P}`]||k[`card-${P}-buttons`],focusedInput:O,setFocusedInput:ee})})]}),(0,d.jsxs)("div",{className:q,children:[(0,d.jsx)(i.A,{onClick:()=>g(1),variant:"outline",color:"content",iconLeft:(0,d.jsx)(u.irw,{}),size:"large",fullWidth:!0,children:"Voltar"}),(0,d.jsx)(i.A,{variant:"outline",color:"primary",size:"large",onClick:me,iconLeft:$?(0,d.jsx)(u.A3x,{size:18}):(0,d.jsx)(u.Bc_,{size:18}),fullWidth:!0,children:$?"Salvo!":"Salvar Rascunho"}),(0,d.jsx)(i.A,{className:ja.nextButton,onClick:ue,disabled:x||!he(),variant:"solid",color:"primary",loading:x,iconRight:x?null:(0,d.jsx)(u.fOo,{}),size:"large",fullWidth:!0,children:x?"Processando...":"Criar Template"})]}),w&&!$&&(0,d.jsxs)("div",{className:J,children:[(0,d.jsx)(u.S8s,{size:14}),(0,d.jsxs)("span",{children:["\xdaltimo salvamento: ",new Date(w).toLocaleString(),j&&(0,d.jsx)("span",{className:K,children:" (Altera\xe7\xf5es n\xe3o salvas)"})]})]})]}),I&&(0,d.jsx)("div",{className:`${ja.previewContainer} ${ae?ja.expanded:""}`,ref:ie,children:(0,d.jsxs)("div",{className:ja.previewWrapper,children:[(0,d.jsx)("div",{className:ja.previewHeader,children:(0,d.jsx)("h3",{className:ja.previewTitle,children:"Pr\xe9-visualiza\xe7\xe3o do Carrossel"})}),(0,d.jsx)("p",{className:ja.previewSubtitle,children:"Visualiza\xe7\xe3o ao vivo de como seu carrossel aparecer\xe1 no WhatsApp"}),(0,d.jsx)("div",{className:ja.previewContent,children:(0,d.jsx)(Ca,{cards:p.slice(0,m),bodyText:l,focusedInput:O})})]})})]})]})},ba={jsonContainer:"JsonViewer_jsonContainer__kB70m",fullscreen:"JsonViewer_fullscreen__zfakt",fadeIn:"JsonViewer_fadeIn__JhzRh",titleBar:"JsonViewer_titleBar__iESXM",titleIcon:"JsonViewer_titleIcon__w4y27",title:"JsonViewer_title__cKGpr",toolBar:"JsonViewer_toolBar__PF1Ns",toolButton:"JsonViewer_toolButton__nmocG",active:"JsonViewer_active__e7uMs",copied:"JsonViewer_copied__xvXmM",successIcon:"JsonViewer_successIcon__cEigz",errorContainer:"JsonViewer_errorContainer__acERP",errorIcon:"JsonViewer_errorIcon__mRGDe",emptyContainer:"JsonViewer_emptyContainer__rzaN7",emptyIcon:"JsonViewer_emptyIcon__20bP0",codeContainer:"JsonViewer_codeContainer__EQudz",jsonContent:"JsonViewer_jsonContent__M9Q92",string:"JsonViewer_string__a086W",number:"JsonViewer_number__UmMqQ",boolean:"JsonViewer_boolean__GTE0I",null:"JsonViewer_null__LCDql",key:"JsonViewer_key__ikMmI"};const Na=function(e){let{json:a,onCopy:t,onDownload:r,fileName:o="data.json",collapsible:n=!0,initiallyExpanded:i=!0,title:l,minHeight:c="20dvh",maxHeight:p="50dvh"}=e;const[m,h]=(0,s.useState)(!1),[_,g]=(0,s.useState)(i),[v,x]=(0,s.useState)(""),[f,C]=(0,s.useState)(""),[j,w]=(0,s.useState)(!1),[b,N]=(0,s.useState)(null),T=(0,s.useRef)(null),S=(0,s.useRef)(null),y=(0,s.useMemo)((()=>e=>e?e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,(function(e){let a=ba.number;return/^"/.test(e)?a=/:$/.test(e)?ba.key:ba.string:/true|false/.test(e)?a=ba.boolean:/null/.test(e)&&(a=ba.null),`<span class="${a}">${e}</span>`})):""),[]);return(0,s.useEffect)((()=>{if(a)try{S.current=a;const e=JSON.stringify(a,null,2);if(!e||"null"===e||"{"===e||"["===e)throw new Error("JSON inv\xe1lido ou truncado");x(e),C(y(e)),N(null)}catch(b){console.error("Error formatting JSON:",b),N(`Error formatting JSON: ${b instanceof Error?b.message:String(b)}`)}else x(""),C(""),S.current=null}),[a,y]),a?(0,d.jsxs)("div",{className:`${ba.jsonContainer} ${j?ba.fullscreen:""}`,ref:T,style:{maxHeight:j?"100%":p,minHeight:c},children:[l&&(0,d.jsx)("div",{className:ba.titleBar,children:(0,d.jsxs)("h4",{className:ba.title,children:[(0,d.jsx)(u.PjK,{className:ba.titleIcon}),l]})}),(0,d.jsxs)("div",{className:ba.toolBar,children:[n&&(0,d.jsx)("button",{className:`${ba.toolButton} ${_?"":ba.collapsed}`,onClick:()=>{g(!_)},title:_?"Collapse":"Expand",children:_?(0,d.jsx)(u._NO,{}):(0,d.jsx)(u.Vap,{})}),(0,d.jsx)("button",{className:`${ba.toolButton} ${j?ba.active:""}`,onClick:()=>{w(!j),j||_||g(!0)},title:j?"Exit Fullscreen":"Fullscreen",children:j?(0,d.jsx)(u.SE2,{}):(0,d.jsx)(u.KFS,{})}),(0,d.jsx)("button",{className:`${ba.toolButton} ${m?ba.copied:""}`,onClick:()=>{if(t)t();else{let a=v;if(!a||a.length<5)try{S.current&&(a=JSON.stringify(S.current,null,2))}catch(e){console.error("Error re-generating JSON for copy:",e)}if(!a||a.length<5)return void alert("N\xe3o foi poss\xedvel copiar o JSON. Os dados parecem inv\xe1lidos.");navigator.clipboard.writeText(a).then((()=>{h(!0),setTimeout((()=>h(!1)),2e3)})).catch((e=>{console.error("Error copying to clipboard:",e),alert("Failed to copy to clipboard. Please try again.")}))}},title:"Copy JSON",children:m?(0,d.jsx)(u.A3x,{className:ba.successIcon}):(0,d.jsx)(u.nxz,{})}),(0,d.jsx)("button",{className:ba.toolButton,onClick:()=>{if(r)r();else{let a=v;if(!a||a.length<5)try{S.current&&(a=JSON.stringify(S.current,null,2))}catch(e){console.error("Error re-generating JSON for download:",e)}if(!a||a.length<5)return void alert("N\xe3o foi poss\xedvel fazer o download do JSON. Os dados parecem inv\xe1lidos.");const t=new Blob([a],{type:"application/json"}),s=URL.createObjectURL(t),r=document.createElement("a");r.href=s,r.download=o,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(s)}},title:"Download JSON",children:(0,d.jsx)(u.a4x,{})})]}),b&&(0,d.jsxs)("div",{className:ba.errorContainer,children:[(0,d.jsx)(u.eHT,{className:ba.errorIcon}),(0,d.jsx)("span",{children:b})]}),_&&!b&&(0,d.jsx)("div",{className:ba.codeContainer,style:{maxHeight:j?"100%":p,overflowY:"auto"},children:(0,d.jsx)("pre",{className:ba.jsonContent,dangerouslySetInnerHTML:{__html:f}})})]}):(0,d.jsxs)("div",{className:ba.emptyContainer,children:[(0,d.jsx)(u.PjK,{className:ba.emptyIcon}),(0,d.jsx)("p",{children:"No JSON data available"})]})};var Ta=t(775),Sa=t(515),ya=t(239),Ia=t.n(ya);const Ea="carousel-frames-cache",ka="carousel-cache-timestamp",Fa="carousel-template-hash";const Pa=new class{constructor(){this.ffmpeg=new Ta.m({log:!0}),this.isLoaded=!1,this.cachedFiles={mp4:null,gif:null},this.capturedFramesCache=null,this.isPreRendering=!1,this.loadFromLocalStorage()}generateTemplateHash(e,a,t){try{const s=JSON.stringify({cardsLength:e.length,bodyTextLength:(null===a||void 0===a?void 0:a.length)||0,templateName:t||""});let r=0;for(let e=0;e<s.length;e++){r=(r<<5)-r+s.charCodeAt(e),r|=0}return r.toString()}catch(s){return console.error("Erro ao gerar hash do template:",s),Date.now().toString()}}isCompatibleTemplate(e){return localStorage.getItem(Fa)===e}loadFromLocalStorage(){try{const a=localStorage.getItem(ka);if(!(a&&Date.now()-parseInt(a)<864e5))return this.clearLocalStorageCache(),!1;const t=localStorage.getItem(Ea);if(!t)return!1;try{const e=JSON.parse(t);if(!e||!e.images||!e.count)throw new Error("Dados de frames inv\xe1lidos");return this.capturedFramesCache=[],e.images.forEach((e=>{const a=new Image;a.src=e;const t=document.createElement("canvas"),s=t.getContext("2d");a.onload=()=>{t.width=a.width,t.height=a.height,s.drawImage(a,0,0)},this.capturedFramesCache.push(t)})),console.log(`Carregados ${this.capturedFramesCache.length} frames do localStorage`),!0}catch(e){return console.error("Erro ao reconstruir frames do localStorage:",e),this.clearLocalStorageCache(),!1}}catch(e){return console.error("Erro ao carregar do localStorage:",e),!1}}saveToLocalStorage(e,a){try{if(!e||0===e.length)return!1;const t=15,s=Math.max(1,Math.floor(e.length/t)),r=[];for(let a=0;a<e.length;a+=s)r.length<t&&r.push(e[a]);const o=r.map((e=>{try{return e.toDataURL("image/jpeg",.7)}catch(a){return null}})).filter(Boolean),n={count:e.length,selectedCount:o.length,images:o,timestamp:Date.now()};return localStorage.setItem(Ea,JSON.stringify(n)),localStorage.setItem(ka,Date.now().toString()),localStorage.setItem(Fa,a),console.log(`Salvos ${o.length} frames para o template ${a}`),!0}catch(t){return console.error("Erro ao salvar no localStorage:",t),this.clearLocalStorageCache(),!1}}clearLocalStorageCache(){try{localStorage.removeItem(Ea),localStorage.removeItem(ka),localStorage.removeItem(Fa)}catch(e){console.error("Erro ao limpar cache do localStorage:",e)}}hasLocalStorageCache(){return!!localStorage.getItem(Ea)&&!!localStorage.getItem(ka)}async initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this.isLoaded)return;try{console.log(`Iniciando carregamento do FFmpeg${e>0?` (tentativa ${e+1})`:""}...`);const a=this.ffmpeg.load(),t=new Promise(((e,a)=>{setTimeout((()=>{a(new Error("Timeout ao carregar FFmpeg"))}),3e4)}));await Promise.race([a,t]),this.isLoaded=!0,console.log("FFmpeg carregado com sucesso")}catch(a){if(console.error(`Erro ao inicializar FFmpeg (tentativa ${e+1}/4):`,a),e<3){const a=Math.min(1e3*Math.pow(2,e),8e3);return console.log(`Tentando novamente em ${a/1e3} segundos...`),await new Promise((e=>setTimeout(e,a))),this.initialize(e+1)}throw new Error("Falha ao carregar ferramentas de processamento de v\xeddeo ap\xf3s 4 tentativas.")}}async preloadFFmpeg(){try{setTimeout((async()=>{try{this.isLoaded||(console.log("Pr\xe9-carregando FFmpeg em segundo plano..."),await this.initialize(),console.log("FFmpeg pr\xe9-carregado com sucesso"))}catch(e){console.warn("Pr\xe9-carregamento do FFmpeg falhou silenciosamente:",e)}}),2e3)}catch(e){console.warn("Erro ao agendar pr\xe9-carregamento do FFmpeg:",e)}}async cleanupFileSystem(){if(this.isLoaded)try{console.log("Limpando sistema de arquivos...");try{let s=[];try{s=await this.ffmpeg.readDir("frames")}catch(e){}if(s&&s.length>0)for(const e of s)try{await this.ffmpeg.deleteFile(`frames/${e.name}`)}catch(a){console.warn(`N\xe3o foi poss\xedvel deletar arquivo ${e.name}:`,a)}try{await this.ffmpeg.deleteDir("frames")}catch(t){console.warn("N\xe3o foi poss\xedvel deletar diret\xf3rio frames:",t)}}catch(s){console.warn("Erro ao limpar diret\xf3rio frames:",s)}try{await this.ffmpeg.deleteFile("output.mp4")}catch(r){console.log("Arquivo output.mp4 n\xe3o existe ou n\xe3o pode ser deletado")}try{await this.ffmpeg.deleteFile("output.gif")}catch(o){console.log("Arquivo output.gif n\xe3o existe ou n\xe3o pode ser deletado")}try{await this.ffmpeg.deleteFile("palette.png")}catch(n){}console.log("Limpeza do sistema de arquivos conclu\xedda")}catch(i){console.warn("Aviso durante limpeza do sistema de arquivos:",i)}}async captureFrames(e,a,t,s,r){if(!e)throw new Error("Container de pr\xe9-visualiza\xe7\xe3o n\xe3o encontrado");if(!t||!t.goToCard)throw new Error("Controles de navega\xe7\xe3o do carrossel n\xe3o fornecidos");if(this.capturedFramesCache&&r&&this.isCompatibleTemplate(r))return console.log("\ud83d\uddbc\ufe0f Usando frames do cache (mem\xf3ria/localStorage)"),null===s||void 0===s||s({status:"cached",message:"Usando frames j\xe1 capturados anteriormente..."}),this.capturedFramesCache;null===s||void 0===s||s({status:"capturing",message:"Capturando imagens..."});const o=[],n=a.length;try{const a=async e=>{const a=e.querySelectorAll("img"),t=e.querySelectorAll("video");await Promise.all([...a].map((e=>e.complete?Promise.resolve():new Promise((a=>{e.onload=a,e.onerror=a,setTimeout(a,500)}))))),await Promise.all([...t].map((e=>e.readyState>=3?Promise.resolve():new Promise((a=>{e.oncanplaythrough=a,e.onerror=a,setTimeout(a,500)})))))},i=async function(s,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;t.goToCard(s),await new Promise((e=>setTimeout(e,300))),await a(e);for(let a=0;a<5;a++){const a=await Ia()(e,{scale:2,backgroundColor:null,useCORS:!0,allowTaint:!0,logging:!1});o.push(a)}t.goToCard(r);const i=await Ia()(e,{scale:2,backgroundColor:null,useCORS:!0,allowTaint:!0,logging:!1});o.push(i);const l=[10,20,30,40,50,60,70,80,90,100,110,120,130,140,150,160,170,180,190,200].slice(0,n);for(const a of l){await new Promise((e=>setTimeout(e,a-(a>10?10:0))));const t=await Ia()(e,{scale:2,backgroundColor:null,useCORS:!0,allowTaint:!0,logging:!1});o.push(t)}await new Promise((e=>setTimeout(e,100))),await a(e);const c=await Ia()(e,{scale:2,backgroundColor:null,useCORS:!0,allowTaint:!0,logging:!1});o.push(c);for(let e=0;e<5;e++)o.push(c)};t.goToCard(0),await new Promise((e=>setTimeout(e,300))),await a(e);const l=await Ia()(e,{scale:2,backgroundColor:null,useCORS:!0,allowTaint:!0,logging:!1});for(let e=0;e<10;e++)o.push(l);for(let e=0;e<n-1;e++)null===s||void 0===s||s({status:"capturing",message:`Capturando transi\xe7\xe3o ${e+1}/${n-1}...`,progress:Math.round(e/(n-1)*100)}),await i(e,e+1);return n>1&&(null===s||void 0===s||s({status:"capturing",message:"Capturando transi\xe7\xe3o circular..."}),await i(n-1,0)),console.log(`Total de ${o.length} frames capturados para a anima\xe7\xe3o`),this.capturedFramesCache=o,r&&this.saveToLocalStorage(o,r),o}catch(i){throw console.error("Erro ao capturar frames:",i),new Error(`Falha ao capturar imagens do carrossel: ${i.message}`)}}async generateVideo(e,a,t){if(this.cachedFiles.mp4)return console.log("Usando v\xeddeo em cache"),null===t||void 0===t||t({status:"cached",message:"Usando arquivo gerado anteriormente..."}),this.cachedFiles.mp4;try{this.isLoaded||(console.log("\u23f3 Inicializando FFmpeg para processamento de v\xeddeo..."),await this.initialize(),console.log("\u2705 FFmpeg inicializado com sucesso")),await this.cleanupFileSystem(),null===t||void 0===t||t({status:"processing",message:"Preparando o download..."}),console.log(`Iniciando processamento de ${e.length} frames`),await this.ffmpeg.createDir("frames");const a=[],r=e.length,o=120;if(r<=o)for(let e=0;e<r;e++)a.push(e);else{const e=Math.max(2,Math.ceil(r/30)),t=15,s=[];for(let a=1;a<e;a++){const o=Math.floor(a*(r/e));s.push({start:Math.max(0,o-t),end:Math.min(r-1,o+t)})}let n=0;for(const r of s){if(r.start>n){const e=r.start-n,t=Math.max(3,Math.floor(e/10));if(t>0){const s=Math.floor(e/t);for(let e=0;e<t;e++){const t=n+e*s;t<r.start&&a.push(t)}}}for(let e=r.start;e<=r.end;e++)a.push(e);n=r.end+1}if(n<r-1){const e=r-n,t=Math.max(3,Math.floor(e/10));if(t>0){const s=Math.floor(e/t);for(let e=0;e<t;e++){const t=n+e*s;t<r&&a.push(t)}}}if(r>0&&!a.includes(r-1)&&a.push(r-1),a.sort(((e,a)=>e-a)),a.length>o){const e=[...a];a.length=0;const t=Math.ceil(e.length/o);for(let s=0;s<e.length;s+=t)a.length<o&&a.push(e[s]);r>0&&!a.includes(e[e.length-1])&&a.push(e[e.length-1])}}console.log(`\ud83d\udd04 Processando ${a.length} frames para v\xeddeo (de ${e.length} totais)`);for(let l=0;l<a.length;l++){null===t||void 0===t||t({status:"processing",message:"Processando v\xeddeo...",progress:Math.round(l/a.length*100)});const r=e[a[l]].toDataURL("image/png"),o=`frames/frame_${l.toString().padStart(4,"0")}.png`;try{await this.ffmpeg.writeFile(o,await(0,Sa.t2)(r))}catch(s){throw console.error(`Erro ao processar frame ${l+1}:`,s),new Error(`Falha ao processar frame ${l+1}`)}}null===t||void 0===t||t({status:"encoding",message:"Gerando v\xeddeo..."}),await this.ffmpeg.exec(["-framerate","24","-pattern_type","glob","-i","frames/frame_*.png","-c:v","libx264","-preset","medium","-crf","20","-pix_fmt","yuv420p","-profile:v","high","-vf","scale=trunc(iw/2)*2:trunc(ih/2)*2","-movflags","+faststart","output.mp4"]);const n=await this.ffmpeg.readFile("output.mp4"),i=new Blob([n.buffer],{type:"video/mp4"});return this.cachedFiles.mp4=i,i}catch(r){throw console.error("Erro ao gerar v\xeddeo:",r),new Error(`Falha ao gerar v\xeddeo: ${r.message}`)}}async generateGif(e,a,t){if(this.cachedFiles.gif)return console.log("\ud83c\udf9e\ufe0f Usando GIF em cache (mem\xf3ria)"),null===t||void 0===t||t({status:"cached",message:"Usando GIF j\xe1 preparado anteriormente..."}),this.cachedFiles.gif;try{this.isLoaded||await this.initialize(),await this.cleanupFileSystem(),null===t||void 0===t||t({status:"processing",message:"Processando GIF..."});try{await this.ffmpeg.createDir("frames")}catch(s){console.warn("Erro ao criar diret\xf3rio, tentando continuar:",s)}const a=[],c=e.length;a.push(0);const d=[],p=12,u=Math.max(2,Math.ceil(c/24));for(let e=1;e<u;e++){const a=Math.floor(e*c/u);d.push({start:Math.max(0,a-p/2),end:Math.min(c-1,a+p/2)})}u>2&&d.push({start:Math.max(0,c-p),end:c-1});const m=80;if(c<=m)for(let e=0;e<c;e++)a.push(e);else{const e=new Set;d.forEach((a=>{for(let t=a.start;t<=a.end;t++)e.add(t)}));const t=e.size,s=m-t,r=Math.max(0,s);if(e.forEach((e=>a.push(e))),r>0&&c>t){const t=[];for(let a=0;a<c;a++)e.has(a)||t.push(a);const s=Math.max(1,Math.floor(t.length/r));for(let e=0;e<t.length;e+=s)a.length<m&&e<t.length&&a.push(t[e])}a.sort(((e,a)=>e-a))}console.log(`\ud83d\udd04 Processando ${a.length} frames para GIF (de ${e.length} totais)`);for(let s=0;s<a.length;s++){null===t||void 0===t||t({status:"processing",message:"Capturando GIF...",progress:Math.round(s/a.length*100)});try{const t=e[a[s]].toDataURL("image/png"),r=`frames/frame_${s.toString().padStart(4,"0")}.png`;await this.ffmpeg.writeFile(r,await(0,Sa.t2)(t))}catch(r){console.error(`Erro ao processar frame ${s+1}:`,r)}}null===t||void 0===t||t({status:"encoding",message:"Gerando GIF..."});try{try{await this.ffmpeg.exec(["-framerate","15","-pattern_type","glob","-i","frames/frame_*.png","-vf","palettegen=stats_mode=diff","palette.png"]),await this.ffmpeg.exec(["-framerate","15","-pattern_type","glob","-i","frames/frame_*.png","-i","palette.png","-lavfi","fps=15,scale=400:-1:flags=lanczos [x]; [x][1:v] paletteuse=dither=sierra2_4a","output.gif"])}catch(o){console.warn("M\xe9todo de paleta falhou, tentando m\xe9todo simplificado:",o),await this.ffmpeg.exec(["-framerate","12","-pattern_type","glob","-i","frames/frame_*.png","-vf","scale=400:-1:flags=lanczos","output.gif"])}}catch(n){throw console.error("Todos os m\xe9todos de gera\xe7\xe3o de GIF falharam:",n),new Error(`Falha em todas as tentativas de gera\xe7\xe3o de GIF: ${n.message}`)}let h;try{h=await this.ffmpeg.readFile("output.gif")}catch(i){throw console.error("Erro ao ler arquivo GIF:",i),new Error(`Erro ao ler GIF gerado: ${i.message}`)}const _=new Blob([h.buffer],{type:"image/gif"});this.cachedFiles.gif=_;try{await this.cleanupFileSystem()}catch(l){console.warn("Erro ao limpar sistema de arquivos:",l)}return _}catch(o){console.error("Erro ao gerar GIF:",o);try{await this.cleanupFileSystem()}catch(l){console.warn("Erro ao limpar sistema de arquivos ap\xf3s falha:",l)}throw new Error(`Falha ao gerar GIF: ${o.message||"Erro desconhecido"}`)}}async preRenderAnimations(e,a,t,s,r,o){try{this.isPreRendering=!0,console.log("Iniciando pr\xe9-renderiza\xe7\xe3o dos frames...");const n=this.generateTemplateHash(a,t,s);if(this.capturedFramesCache&&this.isCompatibleTemplate(n))return console.log("Usando frames pr\xe9-renderizados do cache"),this.isPreRendering=!1,this.preRenderFormats(s,o),!0;await this.captureFrames(e,a,r,o,n);return this.isPreRendering=!1,console.log("Frames pr\xe9-renderizados com sucesso"),this.preRenderFormats(s,o),!0}catch(n){return this.isPreRendering=!1,console.error("Erro ao pr\xe9-renderizar frames:",n),!1}}async preRenderFormats(e,a){if(!this.capturedFramesCache||0===this.capturedFramesCache.length)return console.warn("N\xe3o h\xe1 frames para pr\xe9-renderizar formatos"),!1;if(console.log("Iniciando pr\xe9-renderiza\xe7\xe3o de formatos em segundo plano..."),!this.cachedFiles.mp4)try{console.log("Pr\xe9-renderizando MP4...");await this.generateVideo(this.capturedFramesCache,e,(e=>{console.log(`Pr\xe9-renderiza\xe7\xe3o MP4: ${e.message||e.status}`)}));console.log("MP4 pr\xe9-renderizado com sucesso")}catch(t){console.error("Erro na pr\xe9-renderiza\xe7\xe3o do MP4:",t)}if(!this.cachedFiles.gif)try{console.log("Pr\xe9-renderizando GIF...");await this.generateGif(this.capturedFramesCache,e,(e=>{console.log(`Pr\xe9-renderiza\xe7\xe3o GIF: ${e.message||e.status}`)}));console.log("GIF pr\xe9-renderizado com sucesso")}catch(t){console.error("Erro na pr\xe9-renderiza\xe7\xe3o do GIF:",t)}return!0}isPreRenderingActive(){return this.isPreRendering}clearCache(){this.cachedFiles={mp4:null,gif:null},this.capturedFramesCache=null,this.clearLocalStorageCache(),console.log("Cache de arquivos limpo")}async downloadFile(e,a){const t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download=a,document.body.appendChild(s),s.click(),setTimeout((()=>{document.body.removeChild(s),URL.revokeObjectURL(t)}),100)}async generateStaticImage(e,a){try{if(!e)throw new Error("Container de pr\xe9-visualiza\xe7\xe3o n\xe3o encontrado");const a=await Ia()(e,{scale:2,backgroundColor:null,logging:!1,useCORS:!0,allowTaint:!0});return new Promise((e=>{a.toBlob((a=>{e(a)}),"image/png")}))}catch(t){throw console.error("Erro ao gerar imagem est\xe1tica:",t),new Error("Falha ao gerar imagem est\xe1tica")}}},La={viewTabs:"StepThree_viewTabs__kCG9M",viewTab:"StepThree_viewTab__vs1Kg",activeTab:"StepThree_activeTab__KTesr",tabIcon:"StepThree_tabIcon__QuBUm",viewContent:"StepThree_viewContent__D2rvT",fadeIn:"StepThree_fadeIn__oWP-k",visualPreview:"StepThree_visualPreview__48ZLv",previewHeader:"StepThree_previewHeader__Xu2Io",previewTitle:"StepThree_previewTitle__s1bbp",previewSubtitle:"StepThree_previewSubtitle__HdoN+",previewContainer:"StepThree_previewContainer__WcWUe",templateInfo:"StepThree_templateInfo__E0pg7",infoItem:"StepThree_infoItem__+Oq4p",infoLabel:"StepThree_infoLabel__zu6DO",infoValue:"StepThree_infoValue__Gj-lx",formatSelector:"StepThree_formatSelector__zVwW8",formatIcon:"StepThree_formatIcon__V8ZPU",codeView:"StepThree_codeView__ndnGz",codeSection:"StepThree_codeSection__KR+iS",codeSectionHeader:"StepThree_codeSectionHeader__gKB7h",codeSectionTitle:"StepThree_codeSectionTitle__5Iwk8",codeActions:"StepThree_codeActions__VYYwp",codeActionButton:"StepThree_codeActionButton__agIcB",contentWrapper:"StepThree_contentWrapper__4QAMh",previewSection:"StepThree_previewSection__MHOcT",sendSection:"StepThree_sendSection__mzjCB",sectionHeader:"StepThree_sectionHeader__5ha35",sectionTitle:"StepThree_sectionTitle__1DuWn",actionsContainer:"StepThree_actionsContainer__ujytK",sendDescription:"StepThree_sendDescription__8lxik",formGroup:"StepThree_formGroup__pdR9j",label:"StepThree_label__GE+yi",phoneInputWrapper:"StepThree_phoneInputWrapper__7SV5B",phonePrefix:"StepThree_phonePrefix__Kbnzf",phoneInput:"StepThree_phoneInput__IdmUT",inputHelp:"StepThree_inputHelp__mCMnu",sendButtonContainer:"StepThree_sendButtonContainer__F1gqw",successContainer:"StepThree_successContainer__GPcIG",successIcon:"StepThree_successIcon__bBmgy",successTitle:"StepThree_successTitle__lhglT",successMessage:"StepThree_successMessage__4aZXE",phoneDisplay:"StepThree_phoneDisplay__WM8gw",successNote:"StepThree_successNote__7yd5A",navigationButtons:"StepThree_navigationButtons__s79kd",sendForm:"StepThree_sendForm__ETB1w",sendTitle:"StepThree_sendTitle__0qu9X",formLabel:"StepThree_formLabel__Gs5fG",errorText:"StepThree_errorText__gpwW6",helpText:"StepThree_helpText__8LQM9",sendButton:"StepThree_sendButton__L-xZ9",loadingSpinner:"StepThree_loadingSpinner__W4gVQ",spin:"StepThree_spin__OKjwA",sendResult:"StepThree_sendResult__cz43f",sendSuccessIcon:"StepThree_sendSuccessIcon__EKSh-",scaleIn:"StepThree_scaleIn__n0+0d",sendSuccessTitle:"StepThree_sendSuccessTitle__i3TSN",sendSuccessMessage:"StepThree_sendSuccessMessage__HJ8tN",sendResultActions:"StepThree_sendResultActions__tRdI+",sendAgainButton:"StepThree_sendAgainButton__KOmqT",previewAutomation:"StepThree_previewAutomation__cDul-",previewButton:"StepThree_previewButton__ydSay",playing:"StepThree_playing__B9CD6",playIcon:"StepThree_playIcon__Nx7zQ",progressBar:"StepThree_progressBar__l0X6c",progressFill:"StepThree_progressFill__oit6e",statusIndicator:"StepThree_statusIndicator__OuJDD",downloadOptions:"StepThree_downloadOptions__I1D49",downloadTitle:"StepThree_downloadTitle__f8eX-",downloadIcon:"StepThree_downloadIcon__Jywx3",formatOptions:"StepThree_formatOptions__dZhTM",formatOption:"StepThree_formatOption__OT2fI",activeFormat:"StepThree_activeFormat__kuGER",formatLabel:"StepThree_formatLabel__fY0MN",checkMark:"StepThree_checkMark__SFu10",downloadActionArea:"StepThree_downloadActionArea__ZhhVH",downloadButton:"StepThree_downloadButton__HlXSy",progressBarContainer:"StepThree_progressBarContainer__o6QJp",progressPercentage:"StepThree_progressPercentage__PUzKu",downloadError:"StepThree_downloadError__fEME5",downloadSuccess:"StepThree_downloadSuccess__F3agh",ffmpegError:"StepThree_ffmpegError__KP7Xt",errorIcon:"StepThree_errorIcon__QrUjs",fallbackButton:"StepThree_fallbackButton__MaHS3",sendView:"StepThree_sendView__hheqd",container:"StepThree_container__vCpGb"},$a=(0,s.createContext)(),Ba=()=>{const e=(0,s.useContext)($a);if(!e)throw new Error("useCarouselControl deve ser usado dentro de um CarouselControlProvider");return e},za=e=>{let{children:a}=e;const[t,r]=(0,s.useState)(0),[o,n]=(0,s.useState)(null),i=(0,s.useRef)(null),[l,c]=(0,s.useState)(!1),[p,u]=(0,s.useState)(!1);(0,s.useEffect)((()=>{const e=()=>{const e=Pa.isPreRenderingActive();u(e)};e();const a=setInterval(e,500);return window.addEventListener("focus",e),()=>{clearInterval(a),window.removeEventListener("focus",e)}}),[]);(0,s.useEffect)((()=>{if(l&&null!==o){r(o);const e=setTimeout((()=>{i.current&&i.current.goToCard(o),n(null)}),0);return()=>clearTimeout(e)}}),[l,o]);return(0,d.jsx)($a.Provider,{value:{registerCarousel:e=>{e&&!i.current&&(i.current=e,c(!0))},goToNextCard:()=>{if(p||!i.current)return;const e=i.current.getCards();if(!e||0===e.length)return;const a=t===e.length-1?0:t+1;n(a)},goToPrevCard:()=>{if(p||!i.current)return;const e=i.current.getCards();if(!e||0===e.length)return;const a=0===t?e.length-1:t-1;n(a)},goToCard:e=>{if(p&&!Pa.isPreRenderingActive())return;if(!i.current)return;const a=i.current.getCards();a&&0!==a.length&&e>=0&&e<a.length&&n(e)},getCurrentIndex:()=>t,getTotalCards:()=>{if(!i.current)return 0;const e=i.current.getCards();return e?e.length:0},isInitialized:l,interactionDisabled:p},children:a})},Ua="PreRenderStatus_container__kcyP2",Aa="PreRenderStatus_statusCard__0dtle",Oa="PreRenderStatus_statusIconWrapper__AJxKq",Ma="PreRenderStatus_inProgress__X-aCB",Ra="PreRenderStatus_success__XY7ZN",Da="PreRenderStatus_partialSuccess__PVpmi",Ha="PreRenderStatus_statusIcon__u4t1+",Ga="PreRenderStatus_statusContent__M-sZB",Wa="PreRenderStatus_statusTitle__Bh6bJ",Va="PreRenderStatus_statusMessage__BiQEc",qa="PreRenderStatus_progressBar__e3HCB",Ja="PreRenderStatus_progressIndeterminate__mjQd2",Ka="PreRenderStatus_formatContainer__N30ZJ",Za="PreRenderStatus_formatBadge__dE51f",Xa="PreRenderStatus_formatComplete__5qUX7",Qa=e=>{var a,t;let{downloadPreview:r,preRenderStarted:o=!1}=e;const[n,i]=(0,s.useState)((()=>{var e,a,t,s;return null!==(e=r.cachedFiles)&&void 0!==e&&e.mp4&&null!==(a=r.cachedFiles)&&void 0!==a&&a.gif?"completed-all":null!==(t=r.cachedFiles)&&void 0!==t&&t.mp4||null!==(s=r.cachedFiles)&&void 0!==s&&s.gif?"completed-partial":r.hasLocalStorageCache()?"frames-stored":r.capturedFramesCache?"frames-captured":o?"in-progress":"idle"})),[l,c]=(0,s.useState)({mp4:null!==(a=r.cachedFiles)&&void 0!==a&&a.mp4?"completed":"pending",gif:null!==(t=r.cachedFiles)&&void 0!==t&&t.gif?"completed":"pending"});if((0,s.useEffect)((()=>{const e=()=>{var e,a,t,s,n,d;const p=null!==(e=r.cachedFiles)&&void 0!==e&&e.mp4?"completed":"pending",u=null!==(a=r.cachedFiles)&&void 0!==a&&a.gif?"completed":"pending";p===l.mp4&&u===l.gif||c({mp4:p,gif:u}),null!==(t=r.cachedFiles)&&void 0!==t&&t.mp4&&null!==(s=r.cachedFiles)&&void 0!==s&&s.gif?i("completed-all"):null!==(n=r.cachedFiles)&&void 0!==n&&n.mp4||null!==(d=r.cachedFiles)&&void 0!==d&&d.gif?i("completed-partial"):r.hasLocalStorageCache()?i("frames-stored"):r.capturedFramesCache?i("frames-captured"):o&&i("in-progress")};e();const a=setInterval(e,500);return()=>clearInterval(a)}),[r,o]),"idle"===n)return null;return(0,d.jsxs)("div",{className:Ua,children:["in-progress"===n&&(0,d.jsxs)("div",{className:Aa,children:[(0,d.jsx)("div",{className:Oa+" "+Ma,children:(0,d.jsx)(u.TwU,{className:Ha})}),(0,d.jsxs)("div",{className:Ga,children:[(0,d.jsx)("h4",{className:Wa,children:"Estamos animando, estamos animando!"}),(0,d.jsx)("p",{className:Va,children:"Segura a\xed! Estamos criando uma anima\xe7\xe3o do seu carrossel..."}),(0,d.jsx)("div",{className:qa,children:(0,d.jsx)("div",{className:Ja})})]})]}),"frames-captured"===n&&(0,d.jsxs)("div",{className:Aa,children:[(0,d.jsx)("div",{className:Oa+" "+Ma,children:(0,d.jsx)(u.Ohp,{className:Ha})}),(0,d.jsxs)("div",{className:Ga,children:[(0,d.jsx)("h4",{className:Wa,children:"Processando Quadros"}),(0,d.jsx)("p",{className:Va,children:"Quase l\xe1! Que carrossel bonito esse seu \ud83e\udd29..."}),(0,d.jsx)("div",{className:qa,children:(0,d.jsx)("div",{className:Ja})})]})]}),"frames-stored"===n&&(0,d.jsxs)("div",{className:Aa,children:[(0,d.jsx)("div",{className:Oa+" "+Ma,children:(0,d.jsx)(u.jTZ,{className:Ha})}),(0,d.jsxs)("div",{className:Ga,children:[(0,d.jsx)("h4",{className:Wa,children:"Preparando Formatos"}),(0,d.jsx)("p",{className:Va,children:"Gerando seus formatos de download, aguenta firme..."}),(0,d.jsxs)("div",{className:Ka,children:[(0,d.jsxs)("div",{className:`${Za} ${"completed"===l.mp4?Xa:""}`,children:["completed"===l.mp4?"\u2713":"\u2715"," MP4"]}),(0,d.jsxs)("div",{className:`${Za} ${"completed"===l.gif?Xa:""}`,children:["completed"===l.gif?"\u2713":"\u2715"," GIF"]})]})]})]}),"completed-partial"===n&&(0,d.jsxs)("div",{className:Aa,children:[(0,d.jsx)("div",{className:Oa+" "+Da,children:(0,d.jsx)(u.A3x,{className:Ha})}),(0,d.jsxs)("div",{className:Ga,children:[(0,d.jsx)("h4",{className:Wa,children:"Formatos Prontos"}),(0,d.jsxs)("p",{className:Va,children:[(()=>{let e=0;return"completed"===l.mp4&&e++,"completed"===l.gif&&e++,e})()," de 2 formatos prontos para download!"]}),(0,d.jsxs)("div",{className:Ka,children:[(0,d.jsxs)("div",{className:`${Za} ${"completed"===l.mp4?Xa:""}`,children:["completed"===l.mp4?"\u2713":"\u2715"," MP4"]}),(0,d.jsxs)("div",{className:`${Za} ${"completed"===l.gif?Xa:""}`,children:["completed"===l.gif?"\u2713":"\u2715"," GIF"]})]})]})]}),"completed-all"===n&&(0,d.jsxs)("div",{className:Aa,children:[(0,d.jsx)("div",{className:Oa+" "+Ra,children:(0,d.jsx)(u.A3x,{className:Ha})}),(0,d.jsxs)("div",{className:Ga,children:[(0,d.jsx)("h4",{className:Wa,children:"Todos os Formatos Prontos"}),(0,d.jsx)("p",{className:Va,children:"Todos os formatos est\xe3o prontos! Fa\xe7a o download agora mesmo!"}),(0,d.jsxs)("div",{className:Ka,children:[(0,d.jsx)("div",{className:`${Za} ${Xa}`,children:"\u2713 MP4"}),(0,d.jsx)("div",{className:`${Za} ${Xa}`,children:"\u2713 GIF"})]})]})]})]})},Ya=(e=>{const a=s.forwardRef(((a,t)=>{const{registerCarousel:r,interactionDisabled:o}=Ba(),n=s.useRef(null);s.useEffect((()=>{n.current&&r(n.current)}),[r]);return(0,d.jsx)(e,{...a,ref:e=>{n.current=e,t&&("function"===typeof t?t(e):t.current=e)},disableInteraction:o})}));return a.displayName=`WithCarouselControl(${e.displayName||e.name||"Component"})`,a})(Ca),et=e=>{let{previewFormat:a,setPreviewFormat:t,captureSequence:s,handleSimpleDownload:r,isGeneratingPreview:o,downloadStatus:n,areDownloadButtonsDisabled:l,interactionDisabled:c,alert:p}=e;return(0,d.jsxs)("div",{className:La.downloadOptions,children:[(0,d.jsxs)("h4",{className:La.downloadTitle,children:[(0,d.jsx)("span",{className:La.downloadIcon,children:(0,d.jsx)(u.a4x,{})}),"Salvar Visualiza\xe7\xe3o"]}),"error"===n.status&&n.message.includes("ferramenta de gera\xe7\xe3o de v\xeddeo")?(0,d.jsxs)("div",{className:La.ffmpegError,children:[(0,d.jsx)(u.eHT,{className:La.errorIcon}),(0,d.jsx)("p",{children:"N\xe3o foi poss\xedvel carregar a ferramenta de gera\xe7\xe3o de v\xeddeo. Voc\xea ainda pode baixar uma imagem est\xe1tica."}),(0,d.jsx)(i.A,{variant:"outline",color:"primary",onClick:r,loading:o,disabled:o||c,iconLeft:(0,d.jsx)(u.fZZ,{}),children:"Baixar Imagem Est\xe1tica"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{className:La.formatSelector,children:(0,d.jsxs)("div",{className:La.formatOptions,children:[(0,d.jsxs)(i.A,{variant:"mp4"===a?"solid":"outline",color:"mp4"===a?"primary":"content",onClick:()=>t("mp4"),disabled:l,className:La.formatOption,iconLeft:(0,d.jsx)(u.C19,{}),children:["V\xeddeo MP4","mp4"===a&&(0,d.jsx)("span",{className:La.checkMark,children:(0,d.jsx)(u.YrT,{})})]}),(0,d.jsxs)(i.A,{variant:"gif"===a?"solid":"outline",color:"gif"===a?"primary":"content",onClick:()=>t("gif"),disabled:l,className:La.formatOption,iconLeft:(0,d.jsx)(u.fZZ,{}),children:["Anima\xe7\xe3o GIF","gif"===a&&(0,d.jsx)("span",{className:La.checkMark,children:(0,d.jsx)(u.YrT,{})})]}),(0,d.jsxs)(i.A,{variant:"png"===a?"solid":"outline",color:"png"===a?"primary":"content",onClick:()=>t("png"),disabled:l,className:La.formatOption,iconLeft:(0,d.jsx)(u.fZZ,{}),children:["Imagem Est\xe1tica","png"===a&&(0,d.jsx)("span",{className:La.checkMark,children:(0,d.jsx)(u.YrT,{})})]})]})}),(0,d.jsxs)("div",{className:La.downloadActionArea,children:[(0,d.jsx)(i.A,{variant:"solid",color:"primary",onClick:"png"===a?r:s,loading:o,disabled:l,iconLeft:(0,d.jsx)(u.a4x,{}),fullWidth:!0,className:La.downloadButton,children:o?`${n.message||"Processando..."}`:"Baixar "+("mp4"===a?"V\xeddeo":"gif"===a?"GIF":"Imagem")}),"idle"!==n.status&&(0,d.jsx)("div",{className:La.statusIndicator,children:n.progress>0&&"success"!==n.status&&"error"!==n.status&&(0,d.jsxs)("div",{className:La.progressBarContainer,children:[(0,d.jsx)("div",{className:La.progressBar,children:(0,d.jsx)("div",{className:La.progressFill,style:{width:`${n.progress}%`}})}),(0,d.jsxs)("span",{className:La.progressPercentage,children:[Math.round(n.progress),"%"]})]})})]}),"error"===n.status&&(0,d.jsxs)("div",{className:La.downloadError,children:[(0,d.jsx)(u.eHT,{className:La.errorIcon}),(0,d.jsx)("p",{children:n.message}),(0,d.jsx)(i.A,{variant:"outline",color:"primary",onClick:r,disabled:l,children:"Usar Imagem Est\xe1tica"})]}),"success"===n.status&&(0,d.jsxs)("div",{className:La.downloadSuccess,children:[(0,d.jsx)(u.A3x,{className:La.successIcon}),(0,d.jsx)("p",{children:n.message})]})]})]})},at=e=>{let{cards:a,bodyText:t,templateName:r,finalJson:o,copyToClipboard:n,justCopied:i,handleCopy:l,handleDownload:c,downloadStatus:p,setDownloadStatus:u,isGeneratingPreview:m,setIsGeneratingPreview:h,previewFormat:_,setPreviewFormat:g,alert:v}=e;const{goToNextCard:x,goToPrevCard:f,goToCard:C,isInitialized:j,interactionDisabled:w}=Ba(),b=(0,s.useRef)(null),[N,T]=(0,s.useState)(!1),[S,y]=(0,s.useState)(!1),I=e=>{u({...e,message:e.message||"Processando...",progress:e.progress||0}),"success"===e.status?v.success(`Download conclu\xeddo: ${_.toUpperCase()} pronto!`,{position:"bottom-right",autoCloseTime:3e3}):"error"===e.status&&v.error(`Falha ao gerar ${_.toUpperCase()}: ${e.message}`,{position:"top-center",autoCloseTime:7e3})};(0,s.useEffect)((()=>{y(!j||w||m)}),[j,w,m]);(0,s.useEffect)((()=>{j&&a.length>0&&(async()=>{if(j&&b.current)try{T(!0);const e={goToCard:C,goToNextCard:x,goToPrevCard:f};console.log("Iniciando pr\xe9-renderiza\xe7\xe3o em background..."),Pa.generateTemplateHash(a,t,r),setTimeout((async()=>{try{await Pa.preRenderAnimations(b.current,a,t,r,e,(e=>{console.log(`Pr\xe9-renderiza\xe7\xe3o: ${e.message||e.status} ${e.progress||""}`)})),v.info("Pr\xe9-renderiza\xe7\xe3o conclu\xedda. O download ser\xe1 mais r\xe1pido agora!",{position:"bottom-right",autoCloseTime:3e3})}catch(s){console.error("Erro durante pr\xe9-renderiza\xe7\xe3o:",s)}}),1e3)}catch(e){console.error("Erro ao iniciar pr\xe9-renderiza\xe7\xe3o:",e)}})()}),[j,a.length]);(0,s.useEffect)((()=>{Pa.clearCache()}),[a,t,r]);return(0,s.useEffect)((()=>{j&&setTimeout((()=>{C(0)}),300)}),[j]),(0,d.jsxs)("div",{className:La.previewSection,children:[(0,d.jsxs)("div",{className:La.sectionHeader,children:[(0,d.jsx)("h3",{children:"Visualiza\xe7\xe3o Final"}),(0,d.jsx)("p",{children:"Este \xe9 o carrossel que seus clientes ver\xe3o no WhatsApp. Deslize para ver todos os cart\xf5es."})]}),(0,d.jsx)("div",{className:La.previewContainer,ref:b,children:(0,d.jsx)(Ya,{cards:a,bodyText:t})}),(0,d.jsxs)("div",{className:La.templateInfo,children:[(0,d.jsxs)("div",{className:La.infoItem,children:[(0,d.jsx)("span",{className:La.infoLabel,children:"Nome do Template:"}),(0,d.jsx)("span",{className:La.infoValue,children:r})]}),(0,d.jsxs)("div",{className:La.infoItem,children:[(0,d.jsx)("span",{className:La.infoLabel,children:"Cart\xf5es:"}),(0,d.jsx)("span",{className:La.infoValue,children:a.length})]}),(0,d.jsx)(Qa,{downloadPreview:Pa,preRenderStarted:N}),(0,d.jsx)(et,{previewFormat:_,setPreviewFormat:g,captureSequence:async()=>{if(!j)return v.error("O carrossel ainda n\xe3o est\xe1 inicializado. Tente novamente em instantes.",{position:"top-center"}),void u({status:"error",message:"O carrossel ainda n\xe3o est\xe1 inicializado. Tente novamente em instantes."});const e=Pa.generateTemplateHash(a,t,r);h(!0);try{if(Pa.cachedFiles&&Pa.cachedFiles[_]){u({status:"cached",message:"Usando arquivo em mem\xf3ria...",progress:80});const e=Pa.cachedFiles[_],a=`${r||"carrossel"}_preview.${_}`;return u({status:"downloading",message:"Preparando download...",progress:90}),await Pa.downloadFile(e,a),u({status:"success",message:"Download conclu\xeddo!",progress:100}),v.success(`${_.toUpperCase()} gerado com sucesso!`,{position:"bottom-right"}),setTimeout((()=>{u({status:"idle",message:""})}),3e3),void h(!1)}Pa.hasLocalStorageCache()&&Pa.isCompatibleTemplate(e)&&u({status:"cached",message:"Usando frames do cache local...",progress:30});const t={goToCard:C,goToNextCard:x,goToPrevCard:f};let o,n;if(Pa.capturedFramesCache?(u({status:"reusing",message:"Utilizando frames j\xe1 capturados...",progress:30}),o=Pa.capturedFramesCache):(u({status:"capturing",message:"Preparando para capturar frames...",progress:0}),o=await Pa.captureFrames(b.current,a,t,I,e)),!o||0===o.length)throw new Error("N\xe3o foi poss\xedvel capturar imagens do carrossel");if("gif"===_){u({status:"processing",message:"Gerando GIF...",progress:50});for(let e=1;e<=3;e++)try{n=await Pa.generateGif(o,r,I);break}catch(s){if(console.error(`Tentativa ${e} falhou:`,s),3===e)throw s;await Pa.cleanupFileSystem(),u({status:"retrying",message:`Tentativa ${e} falhou, tentando novamente...`,progress:40})}}else u({status:"processing",message:"Gerando v\xeddeo...",progress:50}),n=await Pa.generateVideo(o,r,I);u({status:"downloading",message:"Preparando download...",progress:90});const i=`${r||"carrossel"}_preview.${_}`;await Pa.downloadFile(n,i),u({status:"success",message:"Download conclu\xeddo!",progress:100}),v.success(`${_.toUpperCase()} gerado com sucesso!`,{position:"bottom-right",autoCloseTime:3e3}),setTimeout((()=>{u({status:"idle",message:""})}),3e3)}catch(o){console.error("Erro ao gerar pr\xe9-visualiza\xe7\xe3o animada:",o),u({status:"error",message:`Falha ao gerar ${_.toUpperCase()}: ${(null===o||void 0===o?void 0:o.message)||"Erro desconhecido"}. Tente usar a op\xe7\xe3o de imagem est\xe1tica.`}),v.error(`Erro na gera\xe7\xe3o do ${_.toUpperCase()}: ${(null===o||void 0===o?void 0:o.message)||"Falha desconhecida"}`,{position:"top-center",autoCloseTime:7e3})}finally{setTimeout((()=>{j&&C(0)}),500),h(!1)}},handleSimpleDownload:async()=>{h(!0),u({status:"capturing",message:"Capturando pr\xe9-visualiza\xe7\xe3o..."});try{const e=await Pa.generateStaticImage(b.current,r),a=`${r||"carrossel"}_preview.png`;await Pa.downloadFile(e,a),u({status:"success",message:"Download conclu\xeddo!"}),v.success("Imagem est\xe1tica gerada com sucesso!",{position:"bottom-right",autoCloseTime:3e3}),setTimeout((()=>{u({status:"idle",message:""})}),3e3)}catch(e){console.error("Erro ao capturar pr\xe9-visualiza\xe7\xe3o:",e),u({status:"error",message:"Falha ao capturar pr\xe9-visualiza\xe7\xe3o. Tente novamente."}),v.error(`Erro ao gerar imagem: ${e.message||"Falha desconhecida"}`,{position:"top-center",autoCloseTime:5e3})}finally{h(!1)}},isGeneratingPreview:m,downloadStatus:p,areDownloadButtonsDisabled:S,interactionDisabled:w,alert:v})]})]})},tt=e=>{let{finalJson:a,copyToClipboard:t,resetForm:r,error:n,success:l,cards:c,bodyText:p,setStep:m,templateName:h,sendTemplate:_,loading:g}=e;const v=(0,o.MW)(),[x,f]=(0,s.useState)("send"),[C,j]=(0,s.useState)({createTemplate:!1,sendTemplate:!1,builderTemplate:!1}),[w,b]=(0,s.useState)(!1),[N,T]=(0,s.useState)(""),[S,y]=(0,s.useState)(!1),[I,E]=(0,s.useState)("mp4"),[k,F]=(0,s.useState)({status:"idle",message:""});(0,s.useEffect)((()=>{n&&v.error(n,{position:"top-center",autoCloseTime:7e3}),l&&v.success(l,{position:"top-right"})}),[n,l,v]),(0,s.useEffect)((()=>{(async()=>{try{console.log("Tentando inicializar servi\xe7o de download..."),Pa.preloadFFmpeg()}catch(n){console.warn("Falha ao pr\xe9-carregar recursos:",n),F({status:"error",message:"N\xe3o foi poss\xedvel carregar a ferramenta de gera\xe7\xe3o de v\xeddeo. Voc\xea ainda pode baixar uma imagem est\xe1tica."}),v.warning("N\xe3o foi poss\xedvel carregar as ferramentas de v\xeddeo. A op\xe7\xe3o de imagem est\xe1tica ainda est\xe1 dispon\xedvel.",{position:"top-center",autoCloseTime:7e3})}})()}),[v]);const P=e=>{t(e),j({...C,[e]:!0}),v.info(`JSON do tipo "${e}" copiado para a \xe1rea de transfer\xeancia`,{position:"bottom-right",autoCloseTime:2e3}),setTimeout((()=>{j({...C,[e]:!1})}),2e3)},L=e=>{if(a&&a[e])try{const t=JSON.stringify(a[e],null,2),s=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(s),o=document.createElement("a");o.href=r,o.download=`${h||"template"}_${e}.json`,document.body.appendChild(o),o.click(),setTimeout((()=>{document.body.removeChild(o),URL.revokeObjectURL(r)}),100),v.success(`JSON "${e}" baixado com sucesso`,{position:"bottom-right",autoCloseTime:3e3})}catch(n){console.error("Erro ao fazer download do JSON:",n),v.error(`Falha ao baixar o JSON. ${n.message||"Tente novamente."}`,{position:"top-center"})}else v.error(`Tipo de JSON "${e}" n\xe3o dispon\xedvel para download`,{position:"top-center"})};return(0,d.jsxs)("div",{className:M,children:[(0,d.jsxs)("div",{className:R,children:[(0,d.jsx)("h2",{className:D,children:"Template Conclu\xeddo"}),(0,d.jsx)("p",{className:H,children:"Seu template foi criado com sucesso! Veja abaixo a pr\xe9via de como ficar\xe1 para seus clientes, fa\xe7a download para compartilhar com sua equipe ou envie para um n\xfamero de teste."})]}),(0,d.jsxs)("div",{className:La.viewTabs,children:[(0,d.jsx)(i.A,{className:`${La.viewTab} ${"send"===x?La.activeTab:""}`,onClick:()=>f("send"),variant:"text",color:"send"===x?"primary":"content",iconLeft:(0,d.jsx)(u.kGk,{className:La.tabIcon}),children:"Visualiza\xe7\xe3o e Envio"}),(0,d.jsx)(i.A,{className:`${La.viewTab} ${"code"===x?La.activeTab:""}`,onClick:()=>f("code"),variant:"text",color:"code"===x?"primary":"content",iconLeft:(0,d.jsx)(u.PjK,{className:La.tabIcon}),children:"C\xf3digo JSON"})]}),(0,d.jsxs)("div",{className:La.viewContent,children:["send"===x&&(0,d.jsx)("div",{className:La.sendView,children:(0,d.jsxs)("div",{className:La.contentWrapper,children:[(0,d.jsx)(za,{children:(0,d.jsx)(at,{cards:c,bodyText:p,templateName:h,finalJson:a,copyToClipboard:t,justCopied:C,handleCopy:P,handleDownload:L,downloadStatus:k,setDownloadStatus:F,isGeneratingPreview:S,setIsGeneratingPreview:y,previewFormat:I,setPreviewFormat:E,alert:v})}),(0,d.jsx)("div",{className:La.sendSection,children:w?(0,d.jsxs)("div",{className:La.successContainer,children:[(0,d.jsx)("div",{className:La.successIcon,children:(0,d.jsx)(u.A3x,{size:40})}),(0,d.jsx)("h3",{className:La.successTitle,children:"Template Enviado!"}),(0,d.jsx)("p",{className:La.successMessage,children:"Template enviado com sucesso para:"}),(0,d.jsx)("div",{className:La.phoneDisplay,children:(e=>{if(!e)return"";const a=e.replace(/\D/g,"");if(a.length<7)return e;try{const e=a.substring(0,2),t=a.substring(2,4),s=a.substring(4,9);return`+${e} (${t}) ${s}-${a.substring(9)}`}catch(n){return a}})(N)}),(0,d.jsx)("p",{className:La.successNote,children:"Verifique o recebimento no dispositivo. Se n\xe3o receber em alguns instantes, confirme se o n\xfamero est\xe1 correto e se o contato j\xe1 enviou mensagem para sua conta WhatsApp Business."}),(0,d.jsx)(i.A,{variant:"outline",color:"primary",onClick:()=>{b(!1),T("")},iconLeft:(0,d.jsx)(u.jTZ,{}),children:"Enviar para outro n\xfamero"})]}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:La.sectionHeader,children:[(0,d.jsx)("h3",{children:"Testar Template"}),(0,d.jsx)("p",{children:"Envie seu template para um n\xfamero WhatsApp para confirmar como ele ser\xe1 exibido para seus clientes"})]}),(0,d.jsx)("div",{className:La.formGroup,children:(0,d.jsx)(B,{label:"N\xfamero do WhatsApp",variant:"phoneNumber",className:La.phoneInput,value:N||"",onChange:e=>{const a=e.target.value.replace(/\D/g,"");T(a)},placeholder:"5521999999999"})}),(0,d.jsx)("div",{className:La.sendButtonContainer,children:(0,d.jsx)(i.A,{variant:"solid",color:"primary",onClick:async()=>{if(N)try{await _(N),b(!0)}catch(n){console.error("Erro ao enviar template:",n)}else v.warning("\xc9 necess\xe1rio fornecer um n\xfamero de telefone v\xe1lido",{position:"top-center"})},disabled:!N||g,loading:g,iconLeft:(0,d.jsx)(u.kGk,{}),fullWidth:!0,children:"Enviar Template"})})]})})]})}),"code"===x&&(0,d.jsxs)("div",{className:La.codeView,children:[(0,d.jsxs)("div",{className:La.codeSection,children:[(0,d.jsxs)("div",{className:La.codeSectionHeader,children:[(0,d.jsx)("h3",{className:La.codeSectionTitle,children:"JSON para Envio do Template"}),(0,d.jsx)("p",{className:La.codeSectionDescription,children:"Use este JSON para enviar seu template atrav\xe9s da API do WhatsApp."})]}),(0,d.jsx)("div",{className:La.jsonViewerWrapper,children:(0,d.jsx)(Na,{json:a.sendTemplate,fileName:`${h||"template"}_sendTemplate.json`,onCopy:()=>P("sendTemplate"),onDownload:()=>L("sendTemplate")})})]}),(0,d.jsxs)("div",{className:La.codeSection,children:[(0,d.jsxs)("div",{className:La.codeSectionHeader,children:[(0,d.jsx)("h3",{className:La.codeSectionTitle,children:"JSON para Cria\xe7\xe3o do Template"}),(0,d.jsx)("p",{className:La.codeSectionDescription,children:"Use este JSON para registrar seu template no WhatsApp."})]}),(0,d.jsx)("div",{className:La.jsonViewerWrapper,children:(0,d.jsx)(Na,{json:a.createTemplate,fileName:`${h||"template"}_createTemplate.json`,onCopy:()=>P("createTemplate"),onDownload:()=>L("createTemplate")})})]}),(0,d.jsxs)("div",{className:La.codeSection,children:[(0,d.jsxs)("div",{className:La.codeSectionHeader,children:[(0,d.jsx)("h3",{className:La.codeSectionTitle,children:"JSON para Conte\xfado Din\xe2mico (Builder Blip)"}),(0,d.jsx)("p",{className:La.codeSectionDescription,children:"Use este JSON para integrar seu template na plataforma Blip."})]}),(0,d.jsx)("div",{className:La.jsonViewerWrapper,children:(0,d.jsx)(Na,{json:a.builderTemplate,fileName:`${h||"template"}_builderTemplate.json`,onCopy:()=>P("builderTemplate"),onDownload:()=>L("builderTemplate")})})]})]})]}),(0,d.jsxs)("div",{className:q,children:[(0,d.jsx)(i.A,{variant:"outline",onClick:()=>m(2),iconLeft:(0,d.jsx)(u.irw,{}),size:"large",children:"Voltar para Edi\xe7\xe3o"}),(0,d.jsx)(i.A,{onClick:()=>{r(),v.info("Iniciando um novo template. Dados anteriores foram limpos.",{position:"top-right",autoCloseTime:3e3})},size:"large",children:"Criar Novo Template"})]})]})},st={progressContainer:"ProgressHeader_progressContainer__ttKQ2",progressBar:"ProgressHeader_progressBar__zRjVX",progressFill:"ProgressHeader_progressFill__G+uwy",stepsContainer:"ProgressHeader_stepsContainer__UGL0x",step:"ProgressHeader_step__AJ81A",stepNumber:"ProgressHeader_stepNumber__QPdF8",stepContent:"ProgressHeader_stepContent__f4mPA",stepName:"ProgressHeader_stepName__d3b7e",stepIcon:"ProgressHeader_stepIcon__jtsO-",stepDescription:"ProgressHeader_stepDescription__R5Aph",active:"ProgressHeader_active__YWM21",completed:"ProgressHeader_completed__gwxY7",checkIcon:"ProgressHeader_checkIcon__mR30D",checkmark:"ProgressHeader_checkmark__S-XrY",next:"ProgressHeader_next__1Lo8B",upcoming:"ProgressHeader_upcoming__BFgJh"},rt=e=>{let{step:a,setStep:t,isStepValid:s}=e;const r=[{id:1,name:"Enviar Arquivos",icon:(0,d.jsx)(u.B88,{}),description:"Fa\xe7a o upload dos arquivos e configure a m\xeddia do cart\xe3o."},{id:2,name:"Personalizar Template",icon:(0,d.jsx)(u.Pj4,{}),description:"Configure o texto e os bot\xf5es do modelo e envie para aprova\xe7\xe3o."},{id:3,name:"Teste o Template",icon:(0,d.jsx)(u.A3x,{}),description:"Colete os c\xf3digos JSON e envie o carrossel para seu Whatsapp."}];return(0,d.jsxs)("div",{className:st.progressContainer,children:[(0,d.jsx)("div",{className:st.progressBar,children:(0,d.jsx)("div",{className:st.progressFill,style:{width:(a-1)/(r.length-1)*100+"%"}})}),(0,d.jsx)("div",{className:st.stepsContainer,children:r.map((e=>{const r=(o=e.id)<a?"completed":o===a?"active":o===a+1&&s(a)?"next":"upcoming";var o;return(0,d.jsxs)("div",{className:`${st.step} ${st[r]}`,onClick:()=>(e=>{(e<a||e===a+1&&s(a))&&t(e)})(e.id),children:[(0,d.jsx)("div",{className:st.stepNumber,children:"completed"===r?(0,d.jsx)(u.A3x,{className:st.checkIcon}):(0,d.jsx)("span",{children:e.id})}),(0,d.jsxs)("div",{className:st.stepContent,children:[(0,d.jsxs)("div",{className:st.stepName,children:[e.icon&&(0,d.jsx)("span",{className:st.stepIcon,children:e.icon}),e.name]}),(0,d.jsx)("div",{className:st.stepDescription,children:e.description})]})]},e.id)}))})]})},ot="IntroductionGuide_overlay__Dj5ld",nt="IntroductionGuide_guideContainer__cmmIH",it="IntroductionGuide_closeButton__G-2Td",lt="IntroductionGuide_guideContent__t+lhd",ct="IntroductionGuide_iconContainer__mi-am",dt="IntroductionGuide_guideTitle__wvUgA",pt="IntroductionGuide_guideText__UIC5r",ut="IntroductionGuide_progressIndicator__7kD+n",mt="IntroductionGuide_progressDot__k9TEh",ht="IntroductionGuide_activeDot__HnxeS",_t="IntroductionGuide_guideActions__xQsvx",gt="IntroductionGuide_backButton__+7HX2 IntroductionGuide_actionButton__FQC1j",vt="IntroductionGuide_nextButton__impKU IntroductionGuide_actionButton__FQC1j",xt=e=>{let{onClose:a}=e;const[t,r]=(0,s.useState)(0),o=[{title:"Bem-vindo ao Criador de Carross\xe9is do WhatsApp",icon:(0,d.jsx)(u.S8s,{size:28}),content:"Crie carross\xe9is interativos para o WhatsApp de forma simples e r\xe1pida. Este guia passo a passo ajudar\xe1 voc\xea a come\xe7ar."},{title:"1. Adicione seus arquivos",icon:(0,d.jsx)(u.B88,{size:28}),content:(0,d.jsxs)(d.Fragment,{children:["Envie imagens ou v\xeddeos para cada card do seu carrossel. Voc\xea pode adicionar at\xe9 ",(0,d.jsx)("strong",{children:"10 cards"}),", cada um com m\xeddia e bot\xf5es interativos."]})},{title:"2. Personalize seu carrossel",icon:(0,d.jsx)(u.Pj4,{size:28}),content:(0,d.jsxs)(d.Fragment,{children:["Adicione textos e bot\xf5es interativos a cada card. Inclua at\xe9 ",(0,d.jsx)("strong",{children:"2 bot\xf5es por card"}),", com a\xe7\xf5es como links ou respostas r\xe1pidas."]})},{title:"3. Teste e finalize",icon:(0,d.jsx)(u.A3x,{size:28}),content:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("strong",{children:"Seu carrossel est\xe1 pronto!"})," Visualize a pr\xe9via, obtenha o c\xf3digo JSON ou envie para testes."]})},{title:"Por que criei isso?",icon:(0,d.jsx)(u.x_j,{size:28}),content:(0,d.jsxs)(d.Fragment,{children:["Como a ",(0,d.jsx)("strong",{children:"Meta"})," e a ",(0,d.jsx)("strong",{children:"Blip"})," ainda n\xe3o liberaram uma interface de cria\xe7\xe3o de carross\xe9is, tudo tinha que ser feito atrav\xe9s de APIs, o que era muito trabalhoso."]})}],n=o[t];return(0,d.jsx)("div",{className:ot,children:(0,d.jsxs)("div",{className:nt,children:[(0,d.jsx)("button",{className:it,onClick:a,"aria-label":"Close guide",children:(0,d.jsx)(u.yGN,{size:24})}),(0,d.jsxs)("div",{className:lt,children:[(0,d.jsx)("div",{className:ct,children:n.icon}),(0,d.jsx)("h2",{className:dt,children:n.title}),(0,d.jsx)("p",{className:pt,children:n.content}),(0,d.jsx)("div",{className:ut,children:o.map(((e,a)=>(0,d.jsx)("div",{className:`${mt} ${a===t?ht:""}`,onClick:()=>r(a)},a)))})]}),(0,d.jsxs)("div",{className:_t,children:[t>0&&(0,d.jsxs)("button",{className:gt,onClick:()=>{t>0&&r(t-1)},children:[(0,d.jsx)(u.irw,{size:18}),"Voltar"]}),(0,d.jsx)("button",{className:vt,onClick:()=>{t<o.length-1?r(t+1):a()},children:t<o.length-1?(0,d.jsxs)(d.Fragment,{children:["Seguir",(0,d.jsx)(u.fOo,{size:18})]}):(0,d.jsxs)(d.Fragment,{children:["Vamos l\xe1!",(0,d.jsx)(u.dyV,{size:18})]})})]})]})})},ft="WhatsAppCarouselCreator_container__c4oR4",Ct="WhatsAppCarouselCreator_header__Mfl+p",jt="WhatsAppCarouselCreator_title__Mpikx",wt="WhatsAppCarouselCreator_subtitle__mtihy",bt="WhatsAppCarouselCreator_content__n7chO",Nt="WhatsAppCarouselCreator_scrollTopButton__AlGIF",Tt="WhatsAppCarouselCreator_showScrollTop__pGcxn";var St=t(804),yt=t(184);const It="Footer_footer__IEqDI",Et="Footer_footerContent__pc9if",kt="Footer_footerInfo__KsPw+",Ft="Footer_footerActions__zAtJy",Pt="Footer_footerLink__BaoY9",Lt="Footer_footerButton__v8n7d",$t=()=>(0,d.jsx)("footer",{className:It,children:(0,d.jsxs)("div",{className:Et,children:[(0,d.jsxs)("div",{className:kt,children:[(0,d.jsxs)("p",{children:["WhatsApp Carousel Creator \xa9 ",(new Date).getFullYear()]}),(0,d.jsx)("p",{href:"https://www.linkedin.com/in/luigiferronatto/",children:"Developed By: Luigi Ferronatto"}),(0,d.jsxs)("p",{children:["CDA | Solution's Advocate at ",(0,d.jsx)("span",{children:"Blip"})]})]}),(0,d.jsxs)("div",{className:Ft,children:[(0,d.jsx)("a",{href:"https://www.linkedin.com/in/luigiferronatto/",target:"_blank",rel:"noopener noreferrer",className:Pt,title:"LinkedIn",children:(0,d.jsx)(yt.QEs,{})}),(0,d.jsx)("button",{onClick:()=>{window.open("URL_PARA_REPORTAR_ERRO","_blank")},className:Lt,title:"Report Bug",children:(0,d.jsx)(St.yVX,{})}),(0,d.jsx)("button",{onClick:()=>{window.open("URL_DA_DOCUMENTACAO","_blank")},className:Lt,title:"Documentation",children:(0,d.jsx)(u.jH2,{})}),(0,d.jsx)("button",{onClick:()=>{window.open("URL_DO_SUPORTE","_blank")},className:Lt,title:"Support",children:(0,d.jsx)(u.S8s,{})}),(0,d.jsx)("button",{onClick:()=>{window.open("URL_PARA_SUGESTOES","_blank")},className:Lt,title:"Suggestions",children:(0,d.jsx)(u.mEP,{})})]})]})}),Bt=()=>{const e=(0,r.$)(),{step:a,setStep:t,isStepValid:o,resetForm:n}=e,[i,l]=(0,s.useState)(!1),[c,p]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!0);(0,s.useEffect)((()=>{localStorage.getItem("introductionGuideShown")||l(!0)}),[]),(0,s.useEffect)((()=>{const e=()=>{p(window.scrollY>300)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);return(0,d.jsxs)("div",{className:ft,children:[(0,d.jsxs)("div",{className:Ct,children:[(0,d.jsx)("h1",{className:jt,children:"Criador de Carrossel do WhatsApp"}),(0,d.jsx)("p",{className:wt,children:"Crie templates interativos de carrossel para seu Router no Blip atrav\xe9s de mensagens da API do WhatsApp Business"}),(0,d.jsx)(rt,{step:a,setStep:t,isStepValid:o})]}),(0,d.jsx)("div",{className:bt,children:(()=>{switch(a){case 1:return(0,d.jsx)(ee,{...e});case 2:return(0,d.jsx)(wa,{...e,showHints:m});case 3:return(0,d.jsx)(tt,{...e});default:return null}})()}),(0,d.jsx)("button",{className:`${Nt} ${c?Tt:""}`,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},"aria-label":"Voltar ao topo",children:(0,d.jsx)(u.ei4,{size:20})}),i&&(0,d.jsx)(xt,{onClose:()=>{l(!1),localStorage.setItem("introductionGuideShown","true")}}),(0,d.jsx)($t,{})]})}}}]);
//# sourceMappingURL=422.fcc4778f.chunk.js.map